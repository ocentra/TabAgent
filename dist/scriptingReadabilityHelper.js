(function(){const r="offscreenIframeResult";console.log("[Dynamic Script Helper] Running in iframe...");let n={success:!1,source:"dynamic-script-helper"};const t=()=>{try{if(typeof Readability>"u")throw new Error("Readability library not found in iframe context.");const e=new Readability(document).parse();n={success:!0,source:"dynamic-script-helper",title:e?e.title:"",textContent:e?e.textContent:"",content:e?e.content:"",byline:e?e.byline:"",length:e?e.length:0,excerpt:e?e.excerpt:"",siteName:e?e.siteName:""},console.log("[Dynamic Script Helper] Readability parsing successful.")}catch(e){console.error("[Dynamic Script Helper] Error:",e),n.error=e.message||"Unknown error in dynamic script helper"}console.log("[Dynamic Script Helper] Sending result back to background:",n),chrome.runtime.sendMessage({type:r,payload:n})};document.readyState==="complete"||document.readyState==="interactive"?(console.log("[Dynamic Script Helper] Document already ready. Running Readability..."),t()):(console.log("[Dynamic Script Helper] Document not ready. Adding load listener..."),window.addEventListener("load",()=>{console.log("[Dynamic Script Helper] Window load event fired. Running Readability..."),t()},{once:!0}))})();
//# sourceMappingURL=scriptingReadabilityHelper.js.map

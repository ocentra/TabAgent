{"version":3,"file":"sidepanel.js","mappings":";;;;;;;;;AAAA;AACA,QAAQ,IAA2B;AACnC;AACA;AACA,MAAM,KAAK,aAcN;AACL,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;;AAEf,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;;AAEf,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,QAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;;AAEA;AACA;AACA,8CAA8C,IAAI;AAClD;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,QAAQ;AAC7B;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;;AAEA;AACA;AACA,8CAA8C,IAAI;AAClD;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,cAAc;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,YAAY;AAChC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,oBAAoB,gBAAgB;AACpC;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAqB,aAAa;AAClC;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,YAAY;AAChC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA,gBAAgB,UAAU;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA,8CAA8C,IAAI;AAClD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,SAAS;AACxB;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,SAAS;AACxB,eAAe,SAAS;AACxB;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,aAAa;AAC5B;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB,aAAa;AAClC;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,YAAY;AAChC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,aAAa;AAC5B;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;;;;;;;;;;AC9uBD;AACA,MAAM,IAA0C;AAChD,IAAI,iCAAgC,CAAC,MAAQ,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,kGAAC;AACxD,IAAI,KAAK,YAQN;AACH,CAAC;AACD;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,GAAG;AACpB,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA,iBAAiB,UAAU;AAC3B;AACA,iBAAiB,QAAQ;AACzB;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA,iBAAiB,QAAQ;AACzB;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,iDAAiD,kBAAkB,EAAE,sCAAsC,MAAM,KAAK,UAAU,YAAY;AAC5I;AACA;AACA,gDAAgD,kBAAkB,EAAE,sCAAsC,MAAM,KAAK,UAAU,YAAY;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,gBAAgB;AAChB,gCAAgC,MAAM;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,eAAe;AACf;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA,iBAAiB,QAAQ,cAAc;AACvC;AACA;AACA;AACA,6DAA6D,gBAAgB;AAC7E;AACA,iBAAiB,QAAQ,cAAc;AACvC;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,mBAAmB;AACnB;AACA,+CAA+C,eAAe;AAC9D;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,oCAAoC;AACrD;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,GAAG;AACtB;AACA,mBAAmB,QAAQ;AAC3B;AACA,mBAAmB,aAAa;AAChC;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,+CAA+C,kBAAkB,EAAE,sCAAsC,MAAM,KAAK,UAAU,YAAY;AAC1I;AACA;AACA,8CAA8C,kBAAkB,EAAE,sCAAsC,MAAM,KAAK,UAAU,YAAY;AACzI;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;;;;ACxsCA,gCAAgC;AAEhC,oBAAoB;AACpB,MAAM,cAAc,GAAG,gWAAgW,CAAC;AACxX,MAAM,YAAY,GAAG,i9BAAi9B,CAAC;AACv+B,MAAM,eAAe,GAAG,6TAA6T,CAAC;AACtV,MAAM,YAAY,GAAG,6EAA6E,CAAC;AAEnG,iDAAiD;AAEjD,SAAS,YAAY,CAAC,kBAA+B;IACjD,IAAI,CAAC,kBAAkB;QAAE,OAAO;IAChC,MAAM,WAAW,GAAG,kBAAkB,CAAC,aAAa,CAAC,uBAAuB,CAAuB,CAAC;IACpG,MAAM,WAAW,GAAG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AAC,OAAO,GAAG,MAAM,CAAC;QAC/B,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;IACjC,CAAC;AACH,CAAC;;;;;;;UC1/BD;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA;WACA,uBAAuB,4BAA4B;WACnD;WACA;WACA;WACA,iBAAiB,oBAAoB;WACrC;WACA,mGAAmG,YAAY;WAC/G;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,mEAAmE,iCAAiC;WACpG;WACA;WACA;WACA;;;;;WCzCA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WClBA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA,iCAAiC;;WAEjC;WACA;WACA;WACA,KAAK;WACL,eAAe;WACf;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;WACA;WACA;;;;;UErFA;UACA;UACA;UACA","sources":["webpack://tabagent/./node_modules/spark-md5/spark-md5.js","webpack://tabagent/./node_modules/webextension-polyfill/dist/browser-polyfill.js","webpack://tabagent/./src/Components/HistoryItem.ts","webpack://tabagent/./src/Controllers/DiscoverController.ts","webpack://tabagent/./src/Controllers/DriveController.ts","webpack://tabagent/./src/Controllers/HistoryPopupController.ts","webpack://tabagent/./src/Controllers/LibraryController.ts","webpack://tabagent/./src/Controllers/ONNXSelectionPopupController.ts","webpack://tabagent/./src/Controllers/SettingsController.ts","webpack://tabagent/./src/Controllers/SpacesController.ts","webpack://tabagent/./src/DB/db.ts","webpack://tabagent/./src/DB/dbActions.ts","webpack://tabagent/./src/DB/dbEvents.ts","webpack://tabagent/./src/DB/idbAttachment.ts","webpack://tabagent/./src/DB/idbBase.ts","webpack://tabagent/./src/DB/idbChat.ts","webpack://tabagent/./src/DB/idbEmbedding.ts","webpack://tabagent/./src/DB/idbKnowledgeGraph.ts","webpack://tabagent/./src/DB/idbLog.ts","webpack://tabagent/./src/DB/idbMessage.ts","webpack://tabagent/./src/DB/idbModelAsset.ts","webpack://tabagent/./src/DB/idbSchema.ts","webpack://tabagent/./src/DB/idbSummary.ts","webpack://tabagent/./src/Home/chatRenderer.ts","webpack://tabagent/./src/Home/fileHandler.ts","webpack://tabagent/./src/Home/messageOrchestrator.ts","webpack://tabagent/./src/Home/uiController.ts","webpack://tabagent/./src/Utilities/dbChannels.ts","webpack://tabagent/./src/Utilities/downloadFormatter.ts","webpack://tabagent/./src/Utilities/downloadUtils.ts","webpack://tabagent/./src/Utilities/generalUtils.ts","webpack://tabagent/./src/Utilities/modelMetadata.ts","webpack://tabagent/./src/events/eventNames.ts","webpack://tabagent/./src/modelAssetDownloader.ts","webpack://tabagent/./src/navigation.ts","webpack://tabagent/./src/notifications.ts","webpack://tabagent/./src/sidepanel.ts","webpack://tabagent/webpack/bootstrap","webpack://tabagent/webpack/runtime/compat get default export","webpack://tabagent/webpack/runtime/define property getters","webpack://tabagent/webpack/runtime/ensure chunk","webpack://tabagent/webpack/runtime/get javascript chunk filename","webpack://tabagent/webpack/runtime/global","webpack://tabagent/webpack/runtime/hasOwnProperty shorthand","webpack://tabagent/webpack/runtime/load script","webpack://tabagent/webpack/runtime/make namespace object","webpack://tabagent/webpack/runtime/publicPath","webpack://tabagent/webpack/runtime/jsonp chunk loading","webpack://tabagent/webpack/before-startup","webpack://tabagent/webpack/startup","webpack://tabagent/webpack/after-startup"],"sourcesContent":["(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b  = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash.slice()\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} [raw] True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} [raw]     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     [raw] True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n","(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(\"webextension-polyfill\", [\"module\"], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod);\n    global.browser = mod.exports;\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : this, function (module) {\n  /* webextension-polyfill - v0.12.0 - Tue May 14 2024 18:01:29 */\n  /* -*- Mode: indent-tabs-mode: nil; js-indent-level: 2 -*- */\n  /* vim: set sts=2 sw=2 et tw=80: */\n  /* This Source Code Form is subject to the terms of the Mozilla Public\n   * License, v. 2.0. If a copy of the MPL was not distributed with this\n   * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n  \"use strict\";\n\n  if (!(globalThis.chrome && globalThis.chrome.runtime && globalThis.chrome.runtime.id)) {\n    throw new Error(\"This script should only be loaded in a browser extension.\");\n  }\n  if (!(globalThis.browser && globalThis.browser.runtime && globalThis.browser.runtime.id)) {\n    const CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE = \"The message port closed before a response was received.\";\n\n    // Wrapping the bulk of this polyfill in a one-time-use function is a minor\n    // optimization for Firefox. Since Spidermonkey does not fully parse the\n    // contents of a function until the first time it's called, and since it will\n    // never actually need to be called, this allows the polyfill to be included\n    // in Firefox nearly for free.\n    const wrapAPIs = extensionAPIs => {\n      // NOTE: apiMetadata is associated to the content of the api-metadata.json file\n      // at build time by replacing the following \"include\" with the content of the\n      // JSON file.\n      const apiMetadata = {\n        \"alarms\": {\n          \"clear\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"clearAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"bookmarks\": {\n          \"create\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getChildren\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getRecent\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getSubTree\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getTree\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"move\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeTree\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"search\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"update\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          }\n        },\n        \"browserAction\": {\n          \"disable\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"enable\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"getBadgeBackgroundColor\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getBadgeText\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getPopup\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getTitle\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"openPopup\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"setBadgeBackgroundColor\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setBadgeText\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setIcon\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"setPopup\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setTitle\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          }\n        },\n        \"browsingData\": {\n          \"remove\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"removeCache\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeCookies\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeDownloads\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeFormData\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeHistory\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeLocalStorage\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removePasswords\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removePluginData\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"settings\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"commands\": {\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"contextMenus\": {\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"update\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          }\n        },\n        \"cookies\": {\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAll\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAllCookieStores\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"set\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"devtools\": {\n          \"inspectedWindow\": {\n            \"eval\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 2,\n              \"singleCallbackArg\": false\n            }\n          },\n          \"panels\": {\n            \"create\": {\n              \"minArgs\": 3,\n              \"maxArgs\": 3,\n              \"singleCallbackArg\": true\n            },\n            \"elements\": {\n              \"createSidebarPane\": {\n                \"minArgs\": 1,\n                \"maxArgs\": 1\n              }\n            }\n          }\n        },\n        \"downloads\": {\n          \"cancel\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"download\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"erase\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getFileIcon\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"open\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"pause\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeFile\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"resume\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"search\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"show\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          }\n        },\n        \"extension\": {\n          \"isAllowedFileSchemeAccess\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"isAllowedIncognitoAccess\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"history\": {\n          \"addUrl\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"deleteAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"deleteRange\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"deleteUrl\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getVisits\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"search\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"i18n\": {\n          \"detectLanguage\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAcceptLanguages\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"identity\": {\n          \"launchWebAuthFlow\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"idle\": {\n          \"queryState\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"management\": {\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"getSelf\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"setEnabled\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"uninstallSelf\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          }\n        },\n        \"notifications\": {\n          \"clear\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"create\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"getPermissionLevel\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"update\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          }\n        },\n        \"pageAction\": {\n          \"getPopup\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getTitle\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"hide\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setIcon\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"setPopup\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"setTitle\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          },\n          \"show\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1,\n            \"fallbackToNoCallback\": true\n          }\n        },\n        \"permissions\": {\n          \"contains\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"request\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"runtime\": {\n          \"getBackgroundPage\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"getPlatformInfo\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"openOptionsPage\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"requestUpdateCheck\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"sendMessage\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 3\n          },\n          \"sendNativeMessage\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"setUninstallURL\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"sessions\": {\n          \"getDevices\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getRecentlyClosed\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"restore\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          }\n        },\n        \"storage\": {\n          \"local\": {\n            \"clear\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 0\n            },\n            \"get\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"getBytesInUse\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"remove\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            },\n            \"set\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            }\n          },\n          \"managed\": {\n            \"get\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"getBytesInUse\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            }\n          },\n          \"sync\": {\n            \"clear\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 0\n            },\n            \"get\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"getBytesInUse\": {\n              \"minArgs\": 0,\n              \"maxArgs\": 1\n            },\n            \"remove\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            },\n            \"set\": {\n              \"minArgs\": 1,\n              \"maxArgs\": 1\n            }\n          }\n        },\n        \"tabs\": {\n          \"captureVisibleTab\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 2\n          },\n          \"create\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"detectLanguage\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"discard\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"duplicate\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"executeScript\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getCurrent\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          },\n          \"getZoom\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getZoomSettings\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"goBack\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"goForward\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"highlight\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"insertCSS\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"move\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          },\n          \"query\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"reload\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 2\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"removeCSS\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"sendMessage\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 3\n          },\n          \"setZoom\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"setZoomSettings\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"update\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          }\n        },\n        \"topSites\": {\n          \"get\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"webNavigation\": {\n          \"getAllFrames\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"getFrame\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          }\n        },\n        \"webRequest\": {\n          \"handlerBehaviorChanged\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 0\n          }\n        },\n        \"windows\": {\n          \"create\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"get\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 2\n          },\n          \"getAll\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getCurrent\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"getLastFocused\": {\n            \"minArgs\": 0,\n            \"maxArgs\": 1\n          },\n          \"remove\": {\n            \"minArgs\": 1,\n            \"maxArgs\": 1\n          },\n          \"update\": {\n            \"minArgs\": 2,\n            \"maxArgs\": 2\n          }\n        }\n      };\n      if (Object.keys(apiMetadata).length === 0) {\n        throw new Error(\"api-metadata.json has not been included in browser-polyfill\");\n      }\n\n      /**\n       * A WeakMap subclass which creates and stores a value for any key which does\n       * not exist when accessed, but behaves exactly as an ordinary WeakMap\n       * otherwise.\n       *\n       * @param {function} createItem\n       *        A function which will be called in order to create the value for any\n       *        key which does not exist, the first time it is accessed. The\n       *        function receives, as its only argument, the key being created.\n       */\n      class DefaultWeakMap extends WeakMap {\n        constructor(createItem, items = undefined) {\n          super(items);\n          this.createItem = createItem;\n        }\n        get(key) {\n          if (!this.has(key)) {\n            this.set(key, this.createItem(key));\n          }\n          return super.get(key);\n        }\n      }\n\n      /**\n       * Returns true if the given object is an object with a `then` method, and can\n       * therefore be assumed to behave as a Promise.\n       *\n       * @param {*} value The value to test.\n       * @returns {boolean} True if the value is thenable.\n       */\n      const isThenable = value => {\n        return value && typeof value === \"object\" && typeof value.then === \"function\";\n      };\n\n      /**\n       * Creates and returns a function which, when called, will resolve or reject\n       * the given promise based on how it is called:\n       *\n       * - If, when called, `chrome.runtime.lastError` contains a non-null object,\n       *   the promise is rejected with that value.\n       * - If the function is called with exactly one argument, the promise is\n       *   resolved to that value.\n       * - Otherwise, the promise is resolved to an array containing all of the\n       *   function's arguments.\n       *\n       * @param {object} promise\n       *        An object containing the resolution and rejection functions of a\n       *        promise.\n       * @param {function} promise.resolve\n       *        The promise's resolution function.\n       * @param {function} promise.reject\n       *        The promise's rejection function.\n       * @param {object} metadata\n       *        Metadata about the wrapped method which has created the callback.\n       * @param {boolean} metadata.singleCallbackArg\n       *        Whether or not the promise is resolved with only the first\n       *        argument of the callback, alternatively an array of all the\n       *        callback arguments is resolved. By default, if the callback\n       *        function is invoked with only a single argument, that will be\n       *        resolved to the promise, while all arguments will be resolved as\n       *        an array if multiple are given.\n       *\n       * @returns {function}\n       *        The generated callback function.\n       */\n      const makeCallback = (promise, metadata) => {\n        return (...callbackArgs) => {\n          if (extensionAPIs.runtime.lastError) {\n            promise.reject(new Error(extensionAPIs.runtime.lastError.message));\n          } else if (metadata.singleCallbackArg || callbackArgs.length <= 1 && metadata.singleCallbackArg !== false) {\n            promise.resolve(callbackArgs[0]);\n          } else {\n            promise.resolve(callbackArgs);\n          }\n        };\n      };\n      const pluralizeArguments = numArgs => numArgs == 1 ? \"argument\" : \"arguments\";\n\n      /**\n       * Creates a wrapper function for a method with the given name and metadata.\n       *\n       * @param {string} name\n       *        The name of the method which is being wrapped.\n       * @param {object} metadata\n       *        Metadata about the method being wrapped.\n       * @param {integer} metadata.minArgs\n       *        The minimum number of arguments which must be passed to the\n       *        function. If called with fewer than this number of arguments, the\n       *        wrapper will raise an exception.\n       * @param {integer} metadata.maxArgs\n       *        The maximum number of arguments which may be passed to the\n       *        function. If called with more than this number of arguments, the\n       *        wrapper will raise an exception.\n       * @param {boolean} metadata.singleCallbackArg\n       *        Whether or not the promise is resolved with only the first\n       *        argument of the callback, alternatively an array of all the\n       *        callback arguments is resolved. By default, if the callback\n       *        function is invoked with only a single argument, that will be\n       *        resolved to the promise, while all arguments will be resolved as\n       *        an array if multiple are given.\n       *\n       * @returns {function(object, ...*)}\n       *       The generated wrapper function.\n       */\n      const wrapAsyncFunction = (name, metadata) => {\n        return function asyncFunctionWrapper(target, ...args) {\n          if (args.length < metadata.minArgs) {\n            throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n          }\n          if (args.length > metadata.maxArgs) {\n            throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n          }\n          return new Promise((resolve, reject) => {\n            if (metadata.fallbackToNoCallback) {\n              // This API method has currently no callback on Chrome, but it return a promise on Firefox,\n              // and so the polyfill will try to call it with a callback first, and it will fallback\n              // to not passing the callback if the first call fails.\n              try {\n                target[name](...args, makeCallback({\n                  resolve,\n                  reject\n                }, metadata));\n              } catch (cbError) {\n                console.warn(`${name} API method doesn't seem to support the callback parameter, ` + \"falling back to call it without a callback: \", cbError);\n                target[name](...args);\n\n                // Update the API method metadata, so that the next API calls will not try to\n                // use the unsupported callback anymore.\n                metadata.fallbackToNoCallback = false;\n                metadata.noCallback = true;\n                resolve();\n              }\n            } else if (metadata.noCallback) {\n              target[name](...args);\n              resolve();\n            } else {\n              target[name](...args, makeCallback({\n                resolve,\n                reject\n              }, metadata));\n            }\n          });\n        };\n      };\n\n      /**\n       * Wraps an existing method of the target object, so that calls to it are\n       * intercepted by the given wrapper function. The wrapper function receives,\n       * as its first argument, the original `target` object, followed by each of\n       * the arguments passed to the original method.\n       *\n       * @param {object} target\n       *        The original target object that the wrapped method belongs to.\n       * @param {function} method\n       *        The method being wrapped. This is used as the target of the Proxy\n       *        object which is created to wrap the method.\n       * @param {function} wrapper\n       *        The wrapper function which is called in place of a direct invocation\n       *        of the wrapped method.\n       *\n       * @returns {Proxy<function>}\n       *        A Proxy object for the given method, which invokes the given wrapper\n       *        method in its place.\n       */\n      const wrapMethod = (target, method, wrapper) => {\n        return new Proxy(method, {\n          apply(targetMethod, thisObj, args) {\n            return wrapper.call(thisObj, target, ...args);\n          }\n        });\n      };\n      let hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);\n\n      /**\n       * Wraps an object in a Proxy which intercepts and wraps certain methods\n       * based on the given `wrappers` and `metadata` objects.\n       *\n       * @param {object} target\n       *        The target object to wrap.\n       *\n       * @param {object} [wrappers = {}]\n       *        An object tree containing wrapper functions for special cases. Any\n       *        function present in this object tree is called in place of the\n       *        method in the same location in the `target` object tree. These\n       *        wrapper methods are invoked as described in {@see wrapMethod}.\n       *\n       * @param {object} [metadata = {}]\n       *        An object tree containing metadata used to automatically generate\n       *        Promise-based wrapper functions for asynchronous. Any function in\n       *        the `target` object tree which has a corresponding metadata object\n       *        in the same location in the `metadata` tree is replaced with an\n       *        automatically-generated wrapper function, as described in\n       *        {@see wrapAsyncFunction}\n       *\n       * @returns {Proxy<object>}\n       */\n      const wrapObject = (target, wrappers = {}, metadata = {}) => {\n        let cache = Object.create(null);\n        let handlers = {\n          has(proxyTarget, prop) {\n            return prop in target || prop in cache;\n          },\n          get(proxyTarget, prop, receiver) {\n            if (prop in cache) {\n              return cache[prop];\n            }\n            if (!(prop in target)) {\n              return undefined;\n            }\n            let value = target[prop];\n            if (typeof value === \"function\") {\n              // This is a method on the underlying object. Check if we need to do\n              // any wrapping.\n\n              if (typeof wrappers[prop] === \"function\") {\n                // We have a special-case wrapper for this method.\n                value = wrapMethod(target, target[prop], wrappers[prop]);\n              } else if (hasOwnProperty(metadata, prop)) {\n                // This is an async method that we have metadata for. Create a\n                // Promise wrapper for it.\n                let wrapper = wrapAsyncFunction(prop, metadata[prop]);\n                value = wrapMethod(target, target[prop], wrapper);\n              } else {\n                // This is a method that we don't know or care about. Return the\n                // original method, bound to the underlying object.\n                value = value.bind(target);\n              }\n            } else if (typeof value === \"object\" && value !== null && (hasOwnProperty(wrappers, prop) || hasOwnProperty(metadata, prop))) {\n              // This is an object that we need to do some wrapping for the children\n              // of. Create a sub-object wrapper for it with the appropriate child\n              // metadata.\n              value = wrapObject(value, wrappers[prop], metadata[prop]);\n            } else if (hasOwnProperty(metadata, \"*\")) {\n              // Wrap all properties in * namespace.\n              value = wrapObject(value, wrappers[prop], metadata[\"*\"]);\n            } else {\n              // We don't need to do any wrapping for this property,\n              // so just forward all access to the underlying object.\n              Object.defineProperty(cache, prop, {\n                configurable: true,\n                enumerable: true,\n                get() {\n                  return target[prop];\n                },\n                set(value) {\n                  target[prop] = value;\n                }\n              });\n              return value;\n            }\n            cache[prop] = value;\n            return value;\n          },\n          set(proxyTarget, prop, value, receiver) {\n            if (prop in cache) {\n              cache[prop] = value;\n            } else {\n              target[prop] = value;\n            }\n            return true;\n          },\n          defineProperty(proxyTarget, prop, desc) {\n            return Reflect.defineProperty(cache, prop, desc);\n          },\n          deleteProperty(proxyTarget, prop) {\n            return Reflect.deleteProperty(cache, prop);\n          }\n        };\n\n        // Per contract of the Proxy API, the \"get\" proxy handler must return the\n        // original value of the target if that value is declared read-only and\n        // non-configurable. For this reason, we create an object with the\n        // prototype set to `target` instead of using `target` directly.\n        // Otherwise we cannot return a custom object for APIs that\n        // are declared read-only and non-configurable, such as `chrome.devtools`.\n        //\n        // The proxy handlers themselves will still use the original `target`\n        // instead of the `proxyTarget`, so that the methods and properties are\n        // dereferenced via the original targets.\n        let proxyTarget = Object.create(target);\n        return new Proxy(proxyTarget, handlers);\n      };\n\n      /**\n       * Creates a set of wrapper functions for an event object, which handles\n       * wrapping of listener functions that those messages are passed.\n       *\n       * A single wrapper is created for each listener function, and stored in a\n       * map. Subsequent calls to `addListener`, `hasListener`, or `removeListener`\n       * retrieve the original wrapper, so that  attempts to remove a\n       * previously-added listener work as expected.\n       *\n       * @param {DefaultWeakMap<function, function>} wrapperMap\n       *        A DefaultWeakMap object which will create the appropriate wrapper\n       *        for a given listener function when one does not exist, and retrieve\n       *        an existing one when it does.\n       *\n       * @returns {object}\n       */\n      const wrapEvent = wrapperMap => ({\n        addListener(target, listener, ...args) {\n          target.addListener(wrapperMap.get(listener), ...args);\n        },\n        hasListener(target, listener) {\n          return target.hasListener(wrapperMap.get(listener));\n        },\n        removeListener(target, listener) {\n          target.removeListener(wrapperMap.get(listener));\n        }\n      });\n      const onRequestFinishedWrappers = new DefaultWeakMap(listener => {\n        if (typeof listener !== \"function\") {\n          return listener;\n        }\n\n        /**\n         * Wraps an onRequestFinished listener function so that it will return a\n         * `getContent()` property which returns a `Promise` rather than using a\n         * callback API.\n         *\n         * @param {object} req\n         *        The HAR entry object representing the network request.\n         */\n        return function onRequestFinished(req) {\n          const wrappedReq = wrapObject(req, {} /* wrappers */, {\n            getContent: {\n              minArgs: 0,\n              maxArgs: 0\n            }\n          });\n          listener(wrappedReq);\n        };\n      });\n      const onMessageWrappers = new DefaultWeakMap(listener => {\n        if (typeof listener !== \"function\") {\n          return listener;\n        }\n\n        /**\n         * Wraps a message listener function so that it may send responses based on\n         * its return value, rather than by returning a sentinel value and calling a\n         * callback. If the listener function returns a Promise, the response is\n         * sent when the promise either resolves or rejects.\n         *\n         * @param {*} message\n         *        The message sent by the other end of the channel.\n         * @param {object} sender\n         *        Details about the sender of the message.\n         * @param {function(*)} sendResponse\n         *        A callback which, when called with an arbitrary argument, sends\n         *        that value as a response.\n         * @returns {boolean}\n         *        True if the wrapped listener returned a Promise, which will later\n         *        yield a response. False otherwise.\n         */\n        return function onMessage(message, sender, sendResponse) {\n          let didCallSendResponse = false;\n          let wrappedSendResponse;\n          let sendResponsePromise = new Promise(resolve => {\n            wrappedSendResponse = function (response) {\n              didCallSendResponse = true;\n              resolve(response);\n            };\n          });\n          let result;\n          try {\n            result = listener(message, sender, wrappedSendResponse);\n          } catch (err) {\n            result = Promise.reject(err);\n          }\n          const isResultThenable = result !== true && isThenable(result);\n\n          // If the listener didn't returned true or a Promise, or called\n          // wrappedSendResponse synchronously, we can exit earlier\n          // because there will be no response sent from this listener.\n          if (result !== true && !isResultThenable && !didCallSendResponse) {\n            return false;\n          }\n\n          // A small helper to send the message if the promise resolves\n          // and an error if the promise rejects (a wrapped sendMessage has\n          // to translate the message into a resolved promise or a rejected\n          // promise).\n          const sendPromisedResult = promise => {\n            promise.then(msg => {\n              // send the message value.\n              sendResponse(msg);\n            }, error => {\n              // Send a JSON representation of the error if the rejected value\n              // is an instance of error, or the object itself otherwise.\n              let message;\n              if (error && (error instanceof Error || typeof error.message === \"string\")) {\n                message = error.message;\n              } else {\n                message = \"An unexpected error occurred\";\n              }\n              sendResponse({\n                __mozWebExtensionPolyfillReject__: true,\n                message\n              });\n            }).catch(err => {\n              // Print an error on the console if unable to send the response.\n              console.error(\"Failed to send onMessage rejected reply\", err);\n            });\n          };\n\n          // If the listener returned a Promise, send the resolved value as a\n          // result, otherwise wait the promise related to the wrappedSendResponse\n          // callback to resolve and send it as a response.\n          if (isResultThenable) {\n            sendPromisedResult(result);\n          } else {\n            sendPromisedResult(sendResponsePromise);\n          }\n\n          // Let Chrome know that the listener is replying.\n          return true;\n        };\n      });\n      const wrappedSendMessageCallback = ({\n        reject,\n        resolve\n      }, reply) => {\n        if (extensionAPIs.runtime.lastError) {\n          // Detect when none of the listeners replied to the sendMessage call and resolve\n          // the promise to undefined as in Firefox.\n          // See https://github.com/mozilla/webextension-polyfill/issues/130\n          if (extensionAPIs.runtime.lastError.message === CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE) {\n            resolve();\n          } else {\n            reject(new Error(extensionAPIs.runtime.lastError.message));\n          }\n        } else if (reply && reply.__mozWebExtensionPolyfillReject__) {\n          // Convert back the JSON representation of the error into\n          // an Error instance.\n          reject(new Error(reply.message));\n        } else {\n          resolve(reply);\n        }\n      };\n      const wrappedSendMessage = (name, metadata, apiNamespaceObj, ...args) => {\n        if (args.length < metadata.minArgs) {\n          throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);\n        }\n        if (args.length > metadata.maxArgs) {\n          throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);\n        }\n        return new Promise((resolve, reject) => {\n          const wrappedCb = wrappedSendMessageCallback.bind(null, {\n            resolve,\n            reject\n          });\n          args.push(wrappedCb);\n          apiNamespaceObj.sendMessage(...args);\n        });\n      };\n      const staticWrappers = {\n        devtools: {\n          network: {\n            onRequestFinished: wrapEvent(onRequestFinishedWrappers)\n          }\n        },\n        runtime: {\n          onMessage: wrapEvent(onMessageWrappers),\n          onMessageExternal: wrapEvent(onMessageWrappers),\n          sendMessage: wrappedSendMessage.bind(null, \"sendMessage\", {\n            minArgs: 1,\n            maxArgs: 3\n          })\n        },\n        tabs: {\n          sendMessage: wrappedSendMessage.bind(null, \"sendMessage\", {\n            minArgs: 2,\n            maxArgs: 3\n          })\n        }\n      };\n      const settingMetadata = {\n        clear: {\n          minArgs: 1,\n          maxArgs: 1\n        },\n        get: {\n          minArgs: 1,\n          maxArgs: 1\n        },\n        set: {\n          minArgs: 1,\n          maxArgs: 1\n        }\n      };\n      apiMetadata.privacy = {\n        network: {\n          \"*\": settingMetadata\n        },\n        services: {\n          \"*\": settingMetadata\n        },\n        websites: {\n          \"*\": settingMetadata\n        }\n      };\n      return wrapObject(extensionAPIs, staticWrappers, apiMetadata);\n    };\n\n    // The build process adds a UMD wrapper around this file, which makes the\n    // `module` variable available.\n    module.exports = wrapAPIs(chrome);\n  } else {\n    module.exports = globalThis.browser;\n  }\n});\n//# sourceMappingURL=browser-polyfill.js.map\n","// src/Components/HistoryItem.js\r\n\r\n// --- SVG Icons ---\r\nconst previewIconSvg = `<svg class=\"w-4 h-4 action-icon\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z\" /></svg>`;\r\nconst trashIconSvg = `<svg class=\"w-4 h-4 action-icon\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19.5 5.5L18.8803 15.5251C18.7219 18.0864 18.6428 19.3671 17.8798 20.1818C17.1169 21 15.8356 21 13.2731 21H10.7269C8.16438 21 6.8831 21 6.12019 20.1818C5.35728 19.3671 5.27811 18.0864 5.11973 15.5251L4.5 5.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/><path d=\"M3 5.5H21M16.5 5.5L16.1733 3.57923C16.0596 2.8469 15.9989 2.48073 15.8184 2.21449C15.638 1.94825 15.362 1.75019 15.039 1.67153C14.7158 1.59286 14.3501 1.59286 13.6186 1.59286H10.3814C9.64993 1.59286 9.28419 1.59286 8.96099 1.67153C8.63796 1.75019 8.36201 1.94825 8.18156 2.21449C8.00111 2.48073 7.9404 2.8469 7.82672 3.57923L7.5 5.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/><path d=\"M10 10.5V15.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/><path d=\"M14 10.5V15.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/></svg>`;\r\nconst downloadIconSvg = `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-4 h-4 action-icon\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3\" /></svg>`;\r\nconst shareIconSvg = `<img src=\"icons/LinkChain.png\" alt=\"Share\" class=\"w-4 h-4 action-icon-img\">`;\r\n\r\n// --- Helper functions for inline editing UI ---\r\n\r\nfunction startEditing(historyItemElement: HTMLElement): void {\r\n    if (!historyItemElement) return;\r\n    const previewSpan = historyItemElement.querySelector('.history-item-preview') as HTMLElement | null;\r\n    const renameInput = historyItemElement.querySelector('.history-item-rename-input') as HTMLInputElement | null;\r\n\r\n    if (!previewSpan || !renameInput) return;\r\n\r\n    historyItemElement.classList.add('is-editing');\r\n    previewSpan.style.display = 'none';\r\n    renameInput.style.display = 'block';\r\n    renameInput.value = previewSpan.textContent || '';\r\n    renameInput.focus();\r\n    renameInput.select();\r\n}\r\n\r\nfunction cancelEditing(historyItemElement: HTMLElement): void {\r\n    if (!historyItemElement) return;\r\n    const previewSpan = historyItemElement.querySelector('.history-item-preview') as HTMLElement | null;\r\n    const renameInput = historyItemElement.querySelector('.history-item-rename-input') as HTMLInputElement | null;\r\n\r\n    if (!previewSpan || !renameInput) return;\r\n\r\n    renameInput.style.display = 'none';\r\n    previewSpan.style.display = 'block';\r\n    historyItemElement.classList.remove('is-editing');\r\n    // No need to reset value here as it wasn't submitted\r\n}\r\n\r\n// --- Main Component Rendering Function ---\r\n\r\nexport function renderHistoryItemComponent(props: any): HTMLElement | null {\r\n    const { \r\n        entry, \r\n        onStarClick = () => {}, \r\n        onDownloadClick = () => {}, \r\n        onDeleteClick = () => {}, \r\n        onLoadClick = () => {}, \r\n        onRenameSubmit = () => {}, \r\n        onShareClick = () => {}, \r\n        onPreviewClick = () => {} \r\n    } = props;\r\n\r\n    if (!entry || !entry.id) {\r\n        console.error(\"renderHistoryItemComponent: Invalid entry data provided\", entry);\r\n        return null; // Or return an error element\r\n    }\r\n\r\n    const item = document.createElement('div');\r\n    item.className = 'history-item group relative mb-2';\r\n    item.dataset.id = entry.id; \r\n    if (entry.isStarred) {\r\n        item.classList.add('starred');\r\n    }\r\n\r\n    const date = new Date(entry.timestamp);\r\n    const formattedDate = date.toLocaleString(); // Consider using Intl.DateTimeFormat for better localization\r\n    const previewText = entry.title || (entry.messages && entry.messages.length > 0 \r\n        ? (entry.messages[0].text || '').substring(0, 50) + '...' \r\n        : 'Empty chat');\r\n\r\n    const starIconSrc = entry.isStarred ? 'icons/StarFilled.png' : 'icons/StarHollow.png';\r\n    const starToggleClass = entry.isStarred ? 'starred' : 'unstarred';\r\n\r\n    item.innerHTML = `\r\n        <div class=\"chat-card bg-gray-100 dark:bg-gray-700 rounded-lg shadow p-3 flex flex-col justify-between min-h-[100px]\">\r\n            <div>\r\n                <div class=\"card-header flex justify-between items-center mb-2\">\r\n                    <button data-action=\"toggle-star\" class=\"action-button history-item-star-toggle ${starToggleClass}\" title=\"Toggle Star\">\r\n                         <img src=\"${starIconSrc}\" alt=\"Star\" class=\"w-4 h-4 action-icon-img ${entry.isStarred ? '' : 'icon-unstarred'}\">\r\n                    </button>\r\n                    <div class=\"actions flex items-center space-x-1\">\r\n                        <!-- Normal Actions (initially visible) -->\r\n                        <div class=\"normal-actions flex items-center space-x-1\" data-normal-container>\r\n                             <button data-action=\"download-chat\" class=\"action-button\" title=\"Download\">${downloadIconSvg}</button>\r\n                             <button data-action=\"share-chat\" class=\"action-button\" title=\"Share\">${shareIconSvg}</button>\r\n                             <button data-action=\"delete-chat\" class=\"action-button text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400\" title=\"Delete\">${trashIconSvg}</button>\r\n                             <button data-action=\"preview-chat\" class=\"action-button history-item-preview-btn\" title=\"Preview\">${previewIconSvg}</button>\r\n                        </div>\r\n                        <!-- Confirm Delete Actions (initially hidden) -->\r\n                        <div class=\"confirm-delete-actions hidden flex items-center space-x-1\" data-confirm-container>\r\n                            <span class=\"text-xs text-red-600 dark:text-red-400 mr-1\">Confirm?</span>\r\n                            <button data-action=\"confirm-delete\" class=\"action-button text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\" title=\"Confirm Delete\">\r\n                                <svg class=\"w-4 h-4 action-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path></svg> <!-- Checkmark -->\r\n                            </button>\r\n                            <button data-action=\"cancel-delete\" class=\"action-button text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\" title=\"Cancel Delete\">\r\n                                <svg class=\"w-4 h-4 action-icon\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path></svg> <!-- X mark -->\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"card-body mb-1\">\r\n                    <div class=\"history-item-preview font-semibold text-sm truncate\" title=\"${previewText}\">${previewText}</div>\r\n                    <input type=\"text\" class=\"history-item-rename-input w-full text-sm p-1 border rounded\" value=\"${previewText}\" style=\"display: none;\"/>\r\n                </div>\r\n                <div class=\"history-item-preview-content hidden mt-2 p-2 border-t border-gray-200 dark:border-gray-600 text-xs max-h-24 overflow-y-auto\">\r\n                     <!-- Preview content will be loaded here -->\r\n                </div>\r\n            </div>\r\n            <div class=\"card-footer mt-auto flex justify-between items-center\">\r\n                 <span class=\"history-item-date text-xs text-gray-500 dark:text-gray-400\">${formattedDate}</span>\r\n                 <button class=\"history-item-load-btn text-xs p-0.5 rounded\" data-action=\"load-chat\" title=\"Load Chat\">\r\n                    <img src=\"icons/Load.png\" alt=\"Load\" class=\"h-6 w-auto\">\r\n                 </button>\r\n            </div>\r\n        </div>\r\n    `;\r\n\r\n    // --- Add Event Listeners ---\r\n\r\n    const previewSpan = item.querySelector('.history-item-preview');\r\n    const renameInput = item.querySelector('.history-item-rename-input');\r\n    \r\n    // Rename UI Listeners\r\n    if (previewSpan && renameInput) {\r\n        previewSpan.addEventListener('dblclick', (e) => {\r\n            e.stopPropagation(); \r\n            startEditing(item);\r\n        });\r\n        renameInput.addEventListener('blur', () => {\r\n            // Option 1: Cancel on blur (Commented out)\r\n            // cancelEditing(item); \r\n            \r\n            // Option 2: Submit on blur (Enabled)\r\n            const newTitle = (renameInput as HTMLInputElement).value.trim();\r\n            const originalTitle = previewSpan.textContent;\r\n            if (newTitle && newTitle !== originalTitle) {\r\n                onRenameSubmit(entry.id, newTitle); // Call parent's submit handler\r\n                // Update the preview span immediately for responsiveness\r\n                previewSpan.textContent = newTitle;\r\n                (previewSpan as HTMLElement).title = newTitle;\r\n                cancelEditing(item); // Exit editing mode after successful submission\r\n            } else {\r\n                // If title is empty or unchanged, just cancel\r\n                cancelEditing(item); \r\n            }\r\n        });\r\n        // Use a wrapper to ensure correct event type for keydown\r\n        renameInput.addEventListener('keydown', function(event) {\r\n            const keyboardEvent = event as KeyboardEvent;\r\n            if (keyboardEvent.key === 'Enter') {\r\n                keyboardEvent.preventDefault();\r\n                const newTitle = (renameInput as HTMLInputElement).value.trim();\r\n                const originalTitle = previewSpan.textContent; \r\n                if (newTitle && newTitle !== originalTitle) {\r\n                    onRenameSubmit(entry.id, newTitle); // Call parent's submit handler\r\n                } else {\r\n                    // If title is empty or unchanged, just cancel\r\n                    cancelEditing(item);\r\n                }\r\n            } else if (keyboardEvent.key === 'Escape') {\r\n                 keyboardEvent.preventDefault();\r\n                 cancelEditing(item); // Cancel editing on Escape\r\n            }\r\n        });\r\n    }\r\n\r\n    // Action Button Listeners\r\n    const starButton = item.querySelector('[data-action=\"toggle-star\"]');\r\n    if (starButton) starButton.addEventListener('click', (e) => { e.stopPropagation(); onStarClick(entry.id); });\r\n\r\n    const downloadButton = item.querySelector('[data-action=\"download-chat\"]');\r\n    if (downloadButton) downloadButton.addEventListener('click', (e) => { e.stopPropagation(); onDownloadClick(entry.id); });\r\n    \r\n    const shareButton = item.querySelector('[data-action=\"share-chat\"]');\r\n    if (shareButton) shareButton.addEventListener('click', (e) => { e.stopPropagation(); onShareClick(entry.id); });\r\n\r\n    // --- Delete Confirmation Logic ---\r\n    const deleteButton = item.querySelector('[data-action=\"delete-chat\"]'); // Original trash icon button\r\n    const normalActionsContainer = item.querySelector('[data-normal-container]'); \r\n    const confirmActionsContainer = item.querySelector('[data-confirm-container]');\r\n    const confirmDeleteButton = item.querySelector('[data-action=\"confirm-delete\"]'); // Checkmark button\r\n    const cancelDeleteButton = item.querySelector('[data-action=\"cancel-delete\"]'); // X button\r\n\r\n    // Initial Delete Click (Trash Icon)\r\n    if (deleteButton && normalActionsContainer && confirmActionsContainer) {\r\n        deleteButton.addEventListener('click', (e) => { \r\n            e.stopPropagation(); \r\n\r\n            // Cancel editing if active\r\n            if (item.classList.contains('is-editing')) {\r\n                 cancelEditing(item); \r\n            }\r\n\r\n            // Toggle UI to show confirmation state\r\n            item.classList.add('is-confirming-delete'); // Optional class for styling parent if needed\r\n            normalActionsContainer.classList.add('hidden');\r\n            confirmActionsContainer.classList.remove('hidden');\r\n        });\r\n    }\r\n\r\n    // Cancel Delete Click (X Icon)\r\n    if (cancelDeleteButton && normalActionsContainer && confirmActionsContainer) {\r\n        cancelDeleteButton.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            // Revert UI to normal state\r\n            item.classList.remove('is-confirming-delete');\r\n            normalActionsContainer.classList.remove('hidden');\r\n            confirmActionsContainer.classList.add('hidden');\r\n        });\r\n    }\r\n\r\n    // Confirm Delete Click (Checkmark Icon)\r\n    if (confirmDeleteButton && normalActionsContainer && confirmActionsContainer) {\r\n        confirmDeleteButton.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            item.classList.remove('is-confirming-delete');\r\n            // Optionally hide confirm actions immediately? Or let controller handle full item state change.\r\n            // confirmActionsContainer.classList.add('hidden'); \r\n\r\n            // Call the actual delete handler passed from the parent\r\n            onDeleteClick(entry.id, item); // Pass item element (still needed by controller)\r\n        });\r\n    }\r\n    // --- End Delete Confirmation Logic ---\r\n    \r\n    const previewButton = item.querySelector('[data-action=\"preview-chat\"]');\r\n    const previewContentDiv = item.querySelector('.history-item-preview-content'); // Get content div reference\r\n\r\n    if (previewButton && previewContentDiv) {\r\n        previewButton.addEventListener('click', (e) => {\r\n            e.stopPropagation();\r\n            const isPreviewVisible = !previewContentDiv.classList.contains('hidden');\r\n\r\n            if (isPreviewVisible) {\r\n                // --- Hiding Preview ---\r\n                previewContentDiv.classList.add('hidden');\r\n                previewContentDiv.innerHTML = ''; // Clear content immediately on hide\r\n                item.classList.remove('preview-active');\r\n                previewButton.innerHTML = previewIconSvg; // Restore '...' icon\r\n                console.log(`HistoryItem: Hiding preview for ${entry.id}`);\r\n            } else {\r\n                // --- Showing Preview ---\r\n                // 1. Hide any other open previews (optional, but good UX)\r\n                document.querySelectorAll('.history-item.preview-active').forEach(activeItem => {\r\n                    if (activeItem !== item) { // Don't hide self\r\n                        const otherPreviewDiv = activeItem.querySelector('.history-item-preview-content');\r\n                        const otherPreviewBtn = activeItem.querySelector('[data-action=\"preview-chat\"]');\r\n                        if (otherPreviewDiv) {\r\n                            otherPreviewDiv.classList.add('hidden');\r\n                            otherPreviewDiv.innerHTML = '';\r\n                        }\r\n                        activeItem.classList.remove('preview-active');\r\n                        if (otherPreviewBtn) otherPreviewBtn.innerHTML = previewIconSvg; // Restore icon\r\n                    }\r\n                });\r\n\r\n                // 2. Update UI for *this* item (Show loading state is now handled by the controller)\r\n                item.classList.add('preview-active');\r\n                previewButton.innerHTML = '<svg class=\"w-4 h-4 action-icon\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 18 18 6M6 6l12 12\" /></svg>'; // Change icon to 'X'\r\n                previewContentDiv.classList.remove('hidden'); // Make container visible\r\n\r\n                // 3. Call the handler (which will fetch data and fill contentDiv)\r\n                console.log(`HistoryItem: Requesting preview for ${entry.id}`);\r\n                onPreviewClick(entry.id, previewContentDiv); // Pass the content div\r\n            }\r\n        });\r\n    }\r\n\r\n    const loadButton = item.querySelector('[data-action=\"load-chat\"]');\r\n    if (loadButton) loadButton.addEventListener('click', (e) => { e.stopPropagation(); onLoadClick(entry.id); });\r\n\r\n    // Optional: Add listener to card body for loading if desired\r\n    // const cardBody = item.querySelector('.card-body');\r\n    // if (cardBody) cardBody.addEventListener('click', (e) => { e.stopPropagation(); onLoadClick(entry.id); });\r\n\r\n    return item;\r\n} ","// src/Controllers/DiscoverController.js\r\n\r\n\r\nlet isInitialized = false;\r\n\r\n\r\n\r\nexport function initializeDiscoverController(/* Pass necessary elements or functions if needed */) {\r\n    if (isInitialized) {\r\n        console.log(\"[DiscoverController] Already initialized.\");\r\n        return;\r\n    }\r\n    console.log(\"[DiscoverController] Initializing...\");\r\n    \r\n\r\n\r\n    isInitialized = true;\r\n    console.log(\"[DiscoverController] Initialized successfully.\");\r\n\r\n\r\n    return {}; \r\n} \r\n\r\n","import browser from 'webextension-polyfill'; \nimport { showNotification } from '../notifications';\nimport { RuntimeMessageTypes } from '../events/eventNames';\n\n\nconst GOOGLE_FOLDER_MIME_TYPE = 'application/vnd.google-apps.folder';\n\nlet driveButton: HTMLElement | null;\nlet driveViewerModal: HTMLElement | null, driveViewerClose: HTMLElement | null, driveViewerList: HTMLElement | null, driveViewerCancel: HTMLElement | null, driveViewerInsert: HTMLElement | null, driveViewerSearch: HTMLInputElement | null, driveViewerSelectedArea: HTMLElement | null, driveViewerBreadcrumbsContainer: HTMLElement | null, driveViewerBack: HTMLElement | null;\nlet isDriveOpen = false;\nlet currentFolderId: string = 'root';\nlet currentFolderPath: { id: string, name: string }[] = [{ id: 'root', name: 'Root' }];\nlet driveFilesCache: Record<string, any[]> = {};\nlet selectedDriveFiles: Record<string, any> = {};\nlet isFetchingDriveList = false;\nlet driveSearchTerm: string = '';\nlet showNotificationDep = showNotification; \nlet debounceDep: any = null; \n\nfunction showDriveViewerModal(): void {\n    console.log(\"Attempting to show Drive modal...\");\n    if (isDriveOpen) return;\n    if (!driveViewerModal) {\n        console.error(\"DriveViewerModal element not found.\");\n        return;\n    }\n\n    console.log(\"DriveController: Showing Drive Viewer modal.\");\n    currentFolderId = 'root';\n    currentFolderPath = [{ id: 'root', name: 'Root' }];\n    selectedDriveFiles = {};\n    driveFilesCache = {};\n    driveSearchTerm = '';\n    if (driveViewerSearch) (driveViewerSearch as HTMLInputElement).value = '';\n    updateInsertButtonState();\n    renderSelectedFiles();\n    console.log(\"Fetching root content and making modal visible.\");\n    fetchAndDisplayViewerFolderContent('root');\n    driveViewerModal.classList.remove('hidden');\n    isDriveOpen = true;\n}\n\nfunction hideDriveViewerModal(): void {\n    if (!isDriveOpen) return;\n    if (!driveViewerModal) return;\n    console.log(\"DriveController: Hiding Drive Viewer modal.\");\n    driveViewerModal.classList.add('hidden');\n    isDriveOpen = false;\n    if (driveViewerList) {\n        driveViewerList.innerHTML = `<div class=\"text-center text-gray-500 dark:text-gray-400 p-4\">Loading...</div>`; // Reset list content on close\n    }\n}\n\n\nfunction getFallbackIcon(mimeType: string): string {\n    if (mimeType === GOOGLE_FOLDER_MIME_TYPE) {\n        return '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-5 h-5\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z\" /></svg>';\n    }\n\n    return '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-5 h-5\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\" /></svg>';\n}\n\nfunction renderDriveViewerItems(items: any[]): void {\n    console.log(`[DriveController:Render] renderDriveViewerItems called with ${items?.length ?? 0} items.`); // Log entry\n    if (!driveViewerList) return;\n    driveViewerList.innerHTML = ''; \n\n    const searchTermLower = driveSearchTerm.toLowerCase();\n    const filteredItems = driveSearchTerm\n        ? items.filter(item => item.name.toLowerCase().includes(searchTermLower))\n        : items;\n\n    if (!filteredItems || filteredItems.length === 0) {\n        driveViewerList.innerHTML = `<div class=\"text-center text-gray-500 dark:text-gray-400 p-4\">${driveSearchTerm ? 'No results found.' : 'Folder is empty.'}</div>`;\n        return;\n    }\n\n    filteredItems.forEach(item => {\n        const isFolder = item.mimeType === GOOGLE_FOLDER_MIME_TYPE;\n        const itemElement = document.createElement('div');\n        itemElement.className = 'drive-viewer-item flex items-center p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer'; // Tailwind classes from old code\n        itemElement.dataset.id = item.id;\n        itemElement.dataset.name = item.name;\n        itemElement.dataset.mimeType = item.mimeType;\n        itemElement.dataset.iconLink = item.iconLink || ''; \n\n        const iconDiv = document.createElement('div');\n        iconDiv.className = 'flex-shrink-0 w-6 h-6 mr-3 flex items-center justify-center';\n        if (item.iconLink) {\n            iconDiv.innerHTML = `<img src=\"${item.iconLink}\" alt=\"${isFolder ? 'Folder' : 'File'}\" class=\"w-5 h-5\">`;\n        } else {\n            iconDiv.innerHTML = getFallbackIcon(item.mimeType); \n        }\n\n        const nameSpan = document.createElement('span');\n        nameSpan.className = 'flex-grow truncate';\n        nameSpan.textContent = item.name;\n        nameSpan.title = item.name; \n\n        itemElement.appendChild(iconDiv);\n        itemElement.appendChild(nameSpan);\n\n        if (selectedDriveFiles[item.id]) {\n            itemElement.classList.add('selected'); \n        }\n\n        itemElement.addEventListener('click', handleDriveItemClick);\n\n        if (!driveViewerList) return;\n        driveViewerList.appendChild(itemElement);\n    });\n}\n\nfunction fetchAndDisplayViewerFolderContent(folderId: string): void {\n    if (!driveViewerList || isFetchingDriveList) {\n        return;\n    }\n\n    isFetchingDriveList = true;\n    console.log(`DriveController: Fetching Drive content for folder: ${folderId}`);\n    updateBreadcrumbs(); \n    updateHeaderState(); \n\n    driveViewerList.innerHTML = `<div class=\"text-center text-gray-500 dark:text-gray-400 p-4\">Loading...</div>`;\n\n    if (driveFilesCache[folderId]) {\n        console.log(`DriveController: Using cached content for folder: ${folderId}`);\n        renderDriveViewerItems(driveFilesCache[folderId]);\n        isFetchingDriveList = false;\n        return;\n    }\n\n    browser.runtime.sendMessage({\n        type: RuntimeMessageTypes.GET_DRIVE_FILE_LIST,\n        folderId: folderId\n    })\n    .then((response: any) => {\n        isFetchingDriveList = false;\n        if (response && response.success && response.files) {\n            console.log(`[DriveController] Success! Caching and rendering ${response.files.length} files.`);\n            driveFilesCache[folderId] = response.files;\n            renderDriveViewerItems(response.files);\n        } else {\n            const errorMsg = response?.error || 'Unknown error fetching files.';\n            console.error(`[DriveController] Drive file list error for ${folderId}: ${errorMsg}`);\n            showNotificationDep(`Error fetching folder content: ${errorMsg}`, 'error');\n            if (driveViewerList) {\n                driveViewerList.innerHTML = `<div class=\"text-center text-red-500 p-4\">Error loading content: ${errorMsg}</div>`;\n            }\n        }\n    })\n    .catch((error: any) => {\n        isFetchingDriveList = false;\n        console.error(\"[DriveController] Error sending getDriveFileList message:\", error?.message || error);\n        showNotificationDep(`Error contacting background script: ${error?.message || 'Unknown error'}`, 'error');\n        if (driveViewerList) driveViewerList.innerHTML = `<div class=\"text-center text-red-500 p-4\">Error sending request.</div>`;\n    });\n}\n\nfunction handleDriveItemClick(event: any): void {\n    event.stopPropagation();\n    const itemElement = event.currentTarget;\n    const itemId = (itemElement.dataset.id || '');\n    const itemName = (itemElement.dataset.name || '');\n    const mimeType = (itemElement.dataset.mimeType || '');\n    const iconLink = (itemElement.dataset.iconLink || '');\n\n    if (!itemId || !mimeType) {\n        console.error(\"DriveController: Clicked Drive item missing ID or mimeType.\");\n        return;\n    }\n\n    if (mimeType === GOOGLE_FOLDER_MIME_TYPE) {\n        console.log(`DriveController: Navigating into folder: ${itemName} (${itemId})`);\n        currentFolderId = itemId;\n        currentFolderPath.push({ id: itemId, name: itemName }); \n        driveSearchTerm = ''; \n        if (driveViewerSearch) (driveViewerSearch as HTMLInputElement).value = '';\n        fetchAndDisplayViewerFolderContent(itemId);\n    } else {\n        console.log(`DriveController: Toggling selection for file: ${itemName} (${itemId})`);\n        toggleFileSelection(itemId, itemElement, { id: itemId, name: itemName, mimeType: mimeType, iconLink: iconLink });\n    }\n}\n\nfunction updateBreadcrumbs(): void {\n    if (!driveViewerBreadcrumbsContainer) return;\n    driveViewerBreadcrumbsContainer.innerHTML = '';\n    currentFolderPath.forEach((folder, index) => {\n        const crumbElement = document.createElement(index === currentFolderPath.length - 1 ? 'span' : 'button');\n        crumbElement.textContent = folder.name;\n        crumbElement.dataset.id = folder.id;\n        crumbElement.dataset.index = String(index);\n        if (index < currentFolderPath.length - 1) {\n            crumbElement.className = 'text-blue-600 hover:underline dark:text-blue-400 cursor-pointer';\n            crumbElement.addEventListener('click', handleBreadcrumbClick);\n            const separator = document.createElement('span');\n            separator.textContent = ' / ';\n            separator.className = 'mx-1 text-gray-400';\n            if (driveViewerBreadcrumbsContainer) driveViewerBreadcrumbsContainer.appendChild(crumbElement);\n            if (driveViewerBreadcrumbsContainer) driveViewerBreadcrumbsContainer.appendChild(separator);\n        } else {\n            crumbElement.className = 'font-semibold';\n            if (driveViewerBreadcrumbsContainer) driveViewerBreadcrumbsContainer.appendChild(crumbElement);\n        }\n    });\n}\n\nfunction handleBreadcrumbClick(event: any): void {\n    const targetIndex = parseInt((event.currentTarget as HTMLElement).dataset.index || '', 10);\n    const targetFolderId = (event.currentTarget as HTMLElement).dataset.id || '';\n\n    if (isNaN(targetIndex) || !targetFolderId) {\n        console.error(\"DriveController: Invalid breadcrumb data.\");\n        return;\n    }\n    if (targetFolderId === currentFolderId) return;\n\n    console.log(`DriveController: Breadcrumb click - Navigating to index ${targetIndex} (${targetFolderId})`);\n    currentFolderPath = currentFolderPath.slice(0, Number(targetIndex) + 1);\n    currentFolderId = targetFolderId; \n    driveSearchTerm = ''; \n    if (driveViewerSearch) (driveViewerSearch as HTMLInputElement).value = '';\n    fetchAndDisplayViewerFolderContent(targetFolderId);\n}\n\nfunction toggleFileSelection(fileId: string, element: HTMLElement, fileData: any): void {\n    if (selectedDriveFiles[fileId]) {\n        delete selectedDriveFiles[fileId];\n        element?.classList.remove('selected');\n    } else {\n        selectedDriveFiles[fileId] = fileData;\n        element?.classList.add('selected');\n    }\n    renderSelectedFiles();\n    updateInsertButtonState();\n}\n\nfunction renderSelectedFiles(): void {\n    if (!driveViewerSelectedArea) return;\n\n    const selectedIds = Object.keys(selectedDriveFiles);\n    const pillContainer = driveViewerSelectedArea; \n\n    if (!pillContainer) {\n         console.error(\"Selected area container not found\");\n         return;\n    }\n\n    const pillInnerContainer = pillContainer.querySelector('.flex-wrap') as HTMLElement | null || pillContainer; \n    pillInnerContainer.innerHTML = ''; \n\n    if (selectedIds.length === 0) {\n        pillContainer.classList.add('hidden'); \n    } else {\n        pillContainer.classList.remove('hidden');\n        selectedIds.forEach(id => {\n            const file = selectedDriveFiles[id];\n            const pill = document.createElement('span');\n            pill.className = 'selected-file-item'; \n\n            const iconHtml = file.iconLink ? `<img src=\"${file.iconLink}\" alt=\"\" class=\"w-3 h-3 mr-1.5\">` : '';\n            const removeBtnHtml = `<button class=\"selected-file-remove\" data-id=\"${id}\">&times;</button>`;\n\n            pill.innerHTML = `${iconHtml}${file.name} ${removeBtnHtml}`;\n            pillInnerContainer.appendChild(pill);\n\n            const removeBtn = pill.querySelector('.selected-file-remove');\n            removeBtn?.addEventListener('click', handleRemoveSelectedFile);\n        });\n    }\n}\n\n\nfunction handleRemoveSelectedFile(event: any): void {\n    const fileId = (event.currentTarget as HTMLElement).dataset.id;\n    if (fileId && selectedDriveFiles[fileId]) {\n        delete selectedDriveFiles[fileId];\n        renderSelectedFiles();\n        updateInsertButtonState();\n        if (!driveViewerList) return;\n        const listItem = driveViewerList.querySelector(`.drive-viewer-item[data-id=\"${fileId}\"]`) as HTMLElement | null;\n        if (listItem) listItem.classList.remove('selected');\n    }\n}\n\nfunction updateInsertButtonState(): void {\n    if (!driveViewerInsert) return;\n    const count = Object.keys(selectedDriveFiles).length;\n    (driveViewerInsert as HTMLButtonElement).disabled = count === 0;\n    driveViewerInsert.textContent = `Insert (${count})`;\n}\n\n\nfunction handleDriveSearchInput(event: any): void {\n    driveSearchTerm = event.target.value.trim();\n    console.log(`DriveController: Filtering Drive items by term: \"${driveSearchTerm}\"`);\n    if (driveFilesCache[currentFolderId]) {\n        renderDriveViewerItems(driveFilesCache[currentFolderId]);\n    } else {\n        if (driveViewerList) driveViewerList.innerHTML = `<div class=\"text-center text-gray-500 dark:text-gray-400 p-4\">Folder not loaded or empty.</div>`;\n    }\n}\n\nfunction handleDriveBackButtonClick(): void {\n    if (currentFolderPath.length <= 1) return; \n\n    const parentFolder = currentFolderPath[currentFolderPath.length - 2]; \n    currentFolderPath.pop();\n    currentFolderId = parentFolder.id; \n    console.log(`DriveController: Back button click - Navigating to ${parentFolder.name} (${parentFolder.id})`);\n    driveSearchTerm = ''; \n    if (driveViewerSearch) (driveViewerSearch as HTMLInputElement).value = '';\n    fetchAndDisplayViewerFolderContent(parentFolder.id);\n}\n\nfunction updateHeaderState(): void {\n    if (!driveViewerBack) return;\n    if (currentFolderPath.length > 1) {\n        driveViewerBack.classList.remove('hidden');\n    } else {\n        driveViewerBack.classList.add('hidden');\n    }\n}\n\nexport function initializeDriveController(dependencies: any): void {\n    console.log(\"Initializing DriveController...\");\n\n    if (!dependencies || !dependencies.showNotification || !dependencies.debounce) {\n        console.error(\"DriveController requires dependencies: showNotification, debounce!\");\n        return; \n    }\n    showNotificationDep = dependencies.showNotification;\n    debounceDep = dependencies.debounce;\n    driveButton = document.getElementById('drive-button');\n    driveViewerModal = document.getElementById('drive-viewer-modal');\n    driveViewerClose = document.getElementById('drive-viewer-close');\n    driveViewerList = document.getElementById('drive-viewer-list');\n    driveViewerCancel = document.getElementById('drive-viewer-cancel');\n    driveViewerInsert = document.getElementById('drive-viewer-insert');\n    const searchElem = document.getElementById('drive-viewer-search');\n    driveViewerSearch = (searchElem instanceof HTMLInputElement) ? searchElem : null;\n    driveViewerSelectedArea = document.getElementById('drive-viewer-selected');\n    driveViewerBreadcrumbsContainer = document.getElementById('drive-viewer-breadcrumbs');\n    driveViewerBack = document.getElementById('drive-viewer-back');\n\n    if (!driveViewerModal || !driveViewerList) {\n        console.error(\"DriveController: Essential modal elements (#drive-viewer-modal, #drive-viewer-list) not found!\");\n        return; \n    }\n\n    if (driveButton) {\n        driveButton.addEventListener('click', handleDriveButtonClick);\n    }\n    if (driveViewerClose) {\n        driveViewerClose.addEventListener('click', hideDriveViewerModal);\n    }\n    if (driveViewerCancel) {\n        driveViewerCancel.addEventListener('click', hideDriveViewerModal);\n    }\n    if (driveViewerInsert) {\n        driveViewerInsert.addEventListener('click', () => {\n            console.warn(\"Insert button functionality not yet implemented.\");\n            // Placeholder: Insert selected files into chat\n            // You'll need access to the chat input/send mechanism here\n            hideDriveViewerModal();\n        });\n    }\n    if (driveViewerSearch && debounceDep) {\n         driveViewerSearch.addEventListener('input', debounceDep(handleDriveSearchInput, 300));\n     } else if (driveViewerSearch) {\n         console.warn(\"Debounce dependency missing, search will trigger on every keypress.\");\n         driveViewerSearch.addEventListener('input', handleDriveSearchInput);\n     }\n    if (driveViewerBack) {\n        driveViewerBack.addEventListener('click', handleDriveBackButtonClick);\n    }\n\n    console.log(\"DriveController Initialized successfully.\");\n}\n\n\nconst handleDriveButtonClick = (event: any): void => {\n    console.log(\"Drive button clicked!\");\n    event.stopPropagation(); \n    showDriveViewerModal();\n};\n\n","// src/Controllers/HistoryPopupController.js\n\nimport browser from 'webextension-polyfill';\nimport { \n    DbGetAllSessionsRequest, \n    DbToggleStarRequest, DbDeleteSessionRequest, DbRenameSessionRequest, DbGetSessionRequest,    \n    DbSessionUpdatedNotification,\n} from '../DB/dbEvents';\nimport { renderHistoryItemComponent } from '../Components/HistoryItem';\nimport { debounce } from '../Utilities/generalUtils';\nimport { showNotification } from '../notifications';\nimport { navigateTo } from '../navigation';\nimport { initiateChatDownload } from '../Utilities/downloadUtils';\n\n\n\nlet isInitialized = false;\nlet historyPopupElement: HTMLElement | null = null;\nlet historyListElement: HTMLElement | null = null;\nlet historySearchElement: HTMLInputElement | null = null;\nlet closeHistoryButtonElement: HTMLElement | null = null;\nlet requestDbAndWaitFunc: any = null;\n\nlet currentHistoryItems: any[] = [];\nlet currentSearchTerm: string = '';\n\nfunction handleSessionUpdate(notification: any): void {\n    if (!isInitialized || !notification || !notification.payload || !notification.payload.session) {\n        console.warn(\"[HistoryPopupController] Invalid session update notification received.\", notification);\n        return;\n    }\n\n    const updatedSessionData = notification.payload.session; \n    const sessionId = updatedSessionData.id;\n    const updateType = notification.payload.updateType || 'update'; \n\n    if (!updatedSessionData) {\n        console.warn(`[HistoryPopupController] Session update notification for ${sessionId} missing session data.`, notification);\n        return;\n    }\n\n    console.log(`[HistoryPopupController] Received session update for ${sessionId}. Type: ${updateType}, New starred: ${updatedSessionData.isStarred}`);\n\n    const itemIndex = currentHistoryItems.findIndex(item => item.id === sessionId); \n\n    let listChanged = false;\n\n    if (updateType === 'delete') {\n        if (itemIndex !== -1) {\n            console.log(`[HistoryPopupController] Removing deleted session ${sessionId} from local list.`);\n            currentHistoryItems.splice(itemIndex, 1);\n            listChanged = true;\n        }\n    } else {\n        if (itemIndex !== -1) {\n            console.log(`[HistoryPopupController] Updating session ${sessionId} in local list.`);\n            currentHistoryItems[itemIndex] = { \n                ...currentHistoryItems[itemIndex], \n                ...updatedSessionData\n            };\n            listChanged = true; \n        } else {\n            console.log(`[HistoryPopupController] Adding new/updated session ${sessionId} to local list.`);\n            currentHistoryItems.push(updatedSessionData); \n            listChanged = true;\n        }\n    }\n\n    if (listChanged && historyPopupElement && !historyPopupElement.classList.contains('hidden')) {\n        console.log(`[HistoryPopupController] Popup visible and list changed, calling renderHistoryList()`);\n        renderHistoryList(); \n    } else {\n        console.log(`[HistoryPopupController] Popup not visible or list unchanged, skipping renderHistoryList()`);\n    }\n}\n\nfunction renderHistoryList(): void {\n    if (!isInitialized || !historyListElement) return;\n    console.log(`[HistoryPopupController] Rendering history list (Search: \"${currentSearchTerm}\")...`);\n\n    let filteredItems = currentHistoryItems;\n    if (currentSearchTerm) {\n        const lowerCaseTerm = currentSearchTerm.toLowerCase();\n        filteredItems = currentHistoryItems.filter(entry => \n            (entry.name || '').toLowerCase().includes(lowerCaseTerm)\n        );\n        console.log(`[HistoryPopupController] Filtered down to ${filteredItems.length} sessions.`);\n    } else {\n        console.log(`[HistoryPopupController] Rendering all ${filteredItems.length} sessions (no search term).`);\n    }\n\n    historyListElement.innerHTML = ''; \n\n    if (filteredItems.length === 0) {\n        const message = currentSearchTerm\n            ? `<p class=\"p-4 text-center text-gray-500 dark:text-gray-400 italic\">No history items match \"${currentSearchTerm}\".</p>`\n            : '<p class=\"p-4 text-center text-gray-500 dark:text-gray-400 italic\">No chat history yet.</p>';\n        historyListElement.innerHTML = message;\n    } else {\n        filteredItems.forEach(entry => {\n            const props = {\n                entry: {\n                    id: entry.id,\n                    name: entry.title,\n                    title: entry.title,\n                    timestamp: entry.timestamp,\n                    isStarred: entry.isStarred,\n                    messages: [] \n                },\n                onLoadClick: handleLoadClick,\n                onStarClick: handleStarClick,\n                onDeleteClick: handleDeleteClick,\n                onRenameSubmit: handleRenameSubmit,\n                onDownloadClick: handleDownloadClick,\n                onShareClick: handleShareClick,\n                onPreviewClick: handlePreviewClick\n            };\n            const itemElement = renderHistoryItemComponent(props);\n            if (itemElement && historyListElement) {\n                historyListElement.appendChild(itemElement);\n            }\n        });\n    }\n    console.log(\"[HistoryPopupController] History list rendered.\");\n}\n\nasync function showPopup(): Promise<void> { \n    if (!isInitialized || !historyPopupElement || !requestDbAndWaitFunc) return;\n    console.log(\"[Trace][HistoryPopupController] showPopup: Requesting all sessions...\");\n    try {\n        const sessionsArray = await requestDbAndWaitFunc(new DbGetAllSessionsRequest());\n        console.log(\"[Trace][HistoryPopupController] showPopup: Received sessionsArray:\", sessionsArray);\n        if (Array.isArray(sessionsArray) && sessionsArray.length > 0) {\n             console.log(\"[Trace][HistoryPopupController] showPopup: First session item sample:\", sessionsArray[0]);\n        } else if (sessionsArray === null || sessionsArray === undefined) {\n             console.log(\"[Trace][HistoryPopupController] showPopup: sessionsArray is null or undefined.\");\n        } else {\n             console.log(\"[Trace][HistoryPopupController] showPopup: sessionsArray is empty or not an array:\", typeof sessionsArray);\n        }\n        currentHistoryItems = sessionsArray || []; \n        console.log(`[Trace][HistoryPopupController] showPopup: Assigned ${currentHistoryItems.length} sessions to currentHistoryItems.`);\n        renderHistoryList(); \n        historyPopupElement.classList.remove('hidden');\n    } catch (error) {\n        console.error(\"[Trace][HistoryPopupController] showPopup: Error fetching history list:\", error);\n        showNotification(\"Failed to load history.\", 'error');\n        if (historyListElement) {\n            historyListElement.innerHTML = '<p class=\"p-4 text-center text-red-500 dark:text-red-400\">Error loading history. Please try again.</p>';\n        }\n        historyPopupElement.classList.remove('hidden'); \n    }\n}\n\nfunction hidePopup(): void {\n    if (!isInitialized || !historyPopupElement) return;\n    console.log(\"[HistoryPopupController] Hiding popup.\");\n    historyPopupElement.classList.add('hidden');\n}\n\nfunction handleSearchInput(event: any): void {\n    if (!isInitialized) return;\n    currentSearchTerm = event.target.value.trim();\n    renderHistoryList(); \n}\n\n\nasync function handleLoadClick(sessionId: string): Promise<void> {\n    console.log(`[HistoryPopupController] Load clicked: ${sessionId}`);\n    if (!sessionId) return;\n    try {\n        await browser.storage.local.set({ lastSessionId: sessionId });\n        navigateTo('page-home');\n        hidePopup();\n    } catch (error) {\n        console.error(\"[HistoryPopupController] Error setting storage or navigating:\", error);\n        showNotification(\"Failed to load chat.\", 'error');\n    }\n}\n\nasync function handleStarClick(sessionId: string): Promise<void> {\n    if (!sessionId || !requestDbAndWaitFunc) return;\n    console.log(`[HistoryPopupController] Star clicked: ${sessionId}`);\n    try {\n        await requestDbAndWaitFunc(new DbToggleStarRequest(sessionId));\n        showNotification(\"Star toggled\", 'success');\n    } catch (error) {\n        const err = error as Error;\n        console.error(\"[HistoryPopupController] Error toggling star:\", err);\n        showNotification(`Failed to toggle star: ${err.message}`, 'error');\n    }\n}\n\nasync function handleDeleteClick(sessionId: string, itemElement: HTMLElement): Promise<void> {\n    if (!sessionId || !itemElement || !requestDbAndWaitFunc) return;\n    console.log(`[HistoryPopupController] Delete confirmed inline for: ${sessionId}. Applying deleting state.`);\n    \n    itemElement.classList.add('is-deleting'); \n    itemElement.querySelectorAll('button').forEach(btn => btn.disabled = true);\n\n    const footer = itemElement.querySelector('.card-footer');\n    const existingMsg = footer?.querySelector('.deleting-message'); \n    if (footer && !existingMsg) { \n        const deletingMsg = document.createElement('span');\n        deletingMsg.textContent = 'Deleting...';\n        deletingMsg.className = 'text-xs text-red-500 ml-2 deleting-message';\n        footer.appendChild(deletingMsg);\n    }\n\n    try {\n        await requestDbAndWaitFunc(new DbDeleteSessionRequest(sessionId));\n        showNotification(\"Chat deletion initiated...\", 'info'); \n    } catch (error) {\n        const err = error as Error;\n        console.error(\"[HistoryPopupController] Error deleting chat:\", err);\n        showNotification(`Failed to delete chat: ${err.message}`, 'error');\n        itemElement.classList.remove('is-deleting'); \n        itemElement.querySelectorAll('button').forEach(btn => btn.disabled = false);\n        footer?.querySelector('.deleting-message')?.remove();\n        const normalActionsContainer = itemElement.querySelector('[data-normal-container]');\n        if(normalActionsContainer) normalActionsContainer.classList.remove('hidden');\n        const confirmActionsContainer = itemElement.querySelector('[data-confirm-container]');\n        if(confirmActionsContainer) confirmActionsContainer.classList.add('hidden');\n    }\n}\n\nasync function handleRenameSubmit(sessionId: string, newName: string): Promise<void> {\n    if (!sessionId || !newName || !requestDbAndWaitFunc) return;\n    console.log(`[HistoryPopupController] Rename submitted: ${sessionId} to \"${newName}\"`);\n    try {\n        await requestDbAndWaitFunc(new DbRenameSessionRequest(sessionId, newName));\n        showNotification(\"Rename successful\", 'success');\n    } catch (error) {\n        const err = error as Error;\n        console.error(\"[HistoryPopupController] Error submitting rename:\", err);\n        showNotification(`Failed to rename chat: ${err.message}`, 'error');\n    }\n}\n\nasync function handleDownloadClick(sessionId: string): Promise<void> {\n    if (requestDbAndWaitFunc) {\n        initiateChatDownload(sessionId, requestDbAndWaitFunc, (msg, type) => showNotification(msg, type as 'info' | 'success' | 'error'));\n    } else {\n        console.error(\"[HistoryPopupController] Cannot download: requestDbAndWaitFunc not available.\");\n        showNotification(\"Download failed: Internal setup error.\", 'error');\n    }\n}\n\nfunction handleShareClick(sessionId: string): void {\n    console.log(`[HistoryPopupController] Share clicked: ${sessionId}`);\n}\n\nasync function handlePreviewClick(sessionId: string, contentElement: HTMLElement): Promise<void> {\n    if (!sessionId || !contentElement || !requestDbAndWaitFunc) {\n        console.error(\"[HistoryPopupController] Preview failed: Missing sessionId, contentElement, or requestDbAndWaitFunc.\");\n        return;\n    }\n    \n    console.log(`[HistoryPopupController] Handling preview click for: ${sessionId}`);\n    contentElement.innerHTML = '<span class=\"text-gray-500 dark:text-gray-400 italic text-xs\">Loading preview...</span>'; \n\n    try {\n        const sessionData = await requestDbAndWaitFunc(new DbGetSessionRequest(sessionId));\n        \n        if (!sessionData || !sessionData.messages || sessionData.messages.length === 0) {\n            contentElement.innerHTML = '<span class=\"text-gray-500 dark:text-gray-400 text-xs\">No messages in this chat.</span>';\n            return;\n        }\n\n        const messagesToPreview = sessionData.messages.slice(0, 3);\n\n        const previewHtml = messagesToPreview.map((msg: any) => {\n            const sender = msg.sender === 'user' ? 'You' : (msg.sender === 'ai' ? 'Agent' : 'System');\n            const text = (msg.text || '')\n                         .replace(/</g, \"&lt;\")\n                         .replace(/>/g, \"&gt;\")\n                         .substring(0, 100) + (msg.text && msg.text.length > 100 ? '...' : '');\n            return `<div class=\"preview-message mb-1 last:mb-0\"><span class=\"font-medium\">${sender}:</span><span class=\"ml-1\">${text}</span></div>`;\n        }).join('');\n\n        contentElement.innerHTML = previewHtml; \n\n    } catch (error) {\n        const err = error as Error;\n        console.error(`[HistoryPopupController] Error fetching preview for ${sessionId}:`, err);\n        contentElement.innerHTML = `<span class=\"text-red-500 text-xs\">Error loading preview: ${err.message}</span>`;\n    }\n}\n\ndocument.addEventListener(DbSessionUpdatedNotification.type, (e) => handleSessionUpdate((e as CustomEvent).detail));\nexport function initializeHistoryPopup(elements: any, requestFunc: any): any {\n    console.log(\"[HistoryPopupController] Entering initializeHistoryPopup...\");\n\n    if (!elements || !elements.popupContainer || !elements.listContainer || !elements.searchInput || !elements.closeButton || !requestFunc) {\n        console.error(\"[HistoryPopupController] Initialization failed: Missing required elements or request function.\", { elements, requestFunc });\n        return null;\n    }\n\n    historyPopupElement = elements.popupContainer;\n    historyListElement = elements.listContainer;\n    historySearchElement = elements.searchInput;\n    closeHistoryButtonElement = elements.closeButton;\n    requestDbAndWaitFunc = requestFunc;\n    console.log(\"[HistoryPopupController] Elements and request function assigned.\");\n\n    try {\n        if (closeHistoryButtonElement) closeHistoryButtonElement.addEventListener('click', hidePopup);\n        const debouncedSearchHandler = debounce(handleSearchInput, 300);\n        if (historySearchElement) historySearchElement.addEventListener('input', debouncedSearchHandler);\n        \n        isInitialized = true;\n        console.log(\"[HistoryPopupController] Initialization successful. History will be rendered when popup is shown.\");\n\n        return {\n            show: showPopup,\n            hide: hidePopup\n        };\n    } catch (error) {\n        console.error(\"[HistoryPopupController] Error during initialization listeners/subscriptions:\", error);\n        isInitialized = false;\n        return null; \n    }\n}\n","import { DbGetStarredSessionsRequest,\n      DbToggleStarRequest,\n      DbDeleteSessionRequest,\n      DbRenameSessionRequest,\n      DbSessionUpdatedNotification\n      } from '../DB/dbEvents';\nimport { renderHistoryItemComponent } from '../Components/HistoryItem';\nimport { initiateChatDownload } from '../Utilities/downloadUtils'; \nimport { showNotification } from '../notifications'; \nimport { debounce } from '../Utilities/generalUtils'; \nimport { navigateTo } from '../navigation'; \nimport { UIEventNames } from '../events/eventNames'; // Adjust path if necessary\nimport browser from 'webextension-polyfill';\n\nlet isInitialized = false;\nlet starredListElement: HTMLElement | null = null;\nlet librarySearchInput: HTMLInputElement | null = null;\nlet requestDbAndWaitFunc: any = null;\nlet currentStarredItems: any[] = [];\nlet currentSearchFilter: string = '';\nlet searchListenerAttached = false;\n\n\nasync function handleStarClick(sessionId: string): Promise<void> {\n    console.log(`[LibraryController] Star clicked: ${sessionId}`);\n    if (!requestDbAndWaitFunc) return;\n    try {\n        await requestDbAndWaitFunc(new DbToggleStarRequest(sessionId));\n        showNotification(\"Star toggled\", 'success');\n    } catch (error) {\n        const err = error as Error;\n        console.error(\"[LibraryController] Error toggling star:\", err);\n        showNotification(`Failed to toggle star: ${err.message}`, 'error');\n    }\n}\n\nasync function handleDeleteClick(sessionId: string): Promise<void> {\n    console.log(`[LibraryController] Delete clicked: ${sessionId}`);\n    if (!requestDbAndWaitFunc) return;\n    if (confirm('Are you sure you want to delete this chat history item? This cannot be undone.')) {\n        try {\n            await requestDbAndWaitFunc(new DbDeleteSessionRequest(sessionId));\n            showNotification(\"Chat deleted\", 'success');\n        } catch (error) {\n            const err = error as Error;\n            console.error(\"[LibraryController] Error deleting chat:\", err);\n            showNotification(`Failed to delete chat: ${err.message}`, 'error');\n        }\n    }\n}\n\nasync function handleRenameSubmit(sessionId: string, newName: string): Promise<void> {\n    console.log(`[LibraryController] Rename submitted: ${sessionId} to \"${newName}\"`);\n    if (!requestDbAndWaitFunc) return;\n    try {\n        await requestDbAndWaitFunc(new DbRenameSessionRequest(sessionId, newName));\n        showNotification(\"Rename successful\", 'success');\n    } catch (error) {\n        const err = error as Error;\n        console.error(\"[LibraryController] Error submitting rename:\", err);\n        showNotification(`Failed to rename chat: ${err.message}`, 'error');\n    }\n}\n\nasync function handleDownloadClick(sessionId: string): Promise<void> {\n\n    if (requestDbAndWaitFunc) {\n        initiateChatDownload(sessionId, requestDbAndWaitFunc, (msg, type) => showNotification(msg, type as 'info' | 'success' | 'error'));\n    } else {\n        console.error(\"[LibraryController] Cannot download: requestDbAndWaitFunc not available.\");\n        showNotification(\"Download failed: Internal setup error.\", 'error');\n    }\n}\n\nasync function handleLoadClick(sessionId: string): Promise<void> {\n    console.log(`[LibraryController] Load clicked: ${sessionId}`);\n    try {\n        await browser.storage.local.set({ lastSessionId: sessionId });\n        navigateTo('page-home'); \n    } catch (error) {\n        const err = error as Error;\n        console.error(\"[LibraryController] Error setting storage or navigating:\", err);\n        showNotification(\"Failed to load chat.\", 'error');\n        await browser.storage.local.remove('lastSessionId');\n    }\n}\n\nfunction handleShareClick(sessionId: string): void {\n    console.log(`[LibraryController] Share clicked: ${sessionId}`);\n    showNotification(\"Share functionality not yet implemented.\", 'info');\n}\n\nfunction handlePreviewClick(sessionId: string, contentElement: HTMLElement): void {\n    console.log(`[LibraryController] Preview clicked: ${sessionId}`);\n    showNotification(\"Preview functionality not yet implemented.\", 'info');\n    if (contentElement) {\n        contentElement.innerHTML = 'Preview loading...';\n        contentElement.classList.toggle('hidden');\n    }\n}\n\n\n\nfunction handleNavigationChange(event: any): void {\n    if (!isInitialized || event?.pageId !== 'page-library') {\n        return; \n    }\n    console.log(\"[LibraryController] Library page activated.\");\n\n    if (!searchListenerAttached) {\n        librarySearchInput = document.getElementById('library-search') as HTMLInputElement | null;\n        if (librarySearchInput) {\n            librarySearchInput.addEventListener('input', handleSearchInput);\n            searchListenerAttached = true;\n            console.log(\"[LibraryController] Search input listener attached.\");\n        } else {\n            console.warn(\"[LibraryController] Library search input (#library-search) still not found even when page is active.\");\n        }\n    }\n    \n    fetchAndRenderLibrary(); \n}\n\nasync function fetchAndRenderLibrary(): Promise<void> {\n    if (!isInitialized || !starredListElement || !requestDbAndWaitFunc) {\n        console.error(\"[LibraryController] Cannot fetch/render - not initialized or missing elements/functions.\");\n        return;\n    }\n    console.log(\"[LibraryController] Fetching starred items...\");\n    starredListElement.innerHTML = '<p class=\"p-4 text-center text-gray-500 dark:text-gray-400 italic\">Loading starred items...</p>';\n    currentSearchFilter = librarySearchInput?.value.trim() || ''; \n\n    try {\n        const responsePayload = await requestDbAndWaitFunc(new DbGetStarredSessionsRequest());\n        currentStarredItems = Array.isArray(responsePayload) ? responsePayload : (responsePayload?.sessions || []); \n        console.log(`[LibraryController] Received ${currentStarredItems.length} starred items.`);\n        renderLibraryList(currentSearchFilter); \n    } catch (error) {\n        console.error(\"[LibraryController] Error fetching starred items:\", error);\n        starredListElement.innerHTML = '<div class=\"p-4 text-red-500\">Error loading starred items.</div>';\n    }\n}\n\nfunction handleSessionUpdate(notification: any): void {\n    if (!isInitialized || !notification || !notification.payload || !notification.payload.session) {\n        console.warn(\"[LibraryController] Invalid session update notification received.\", notification);\n        return;\n    }\n\n    const updatedSessionData = notification.payload.session; \n    const sessionId = updatedSessionData.id;\n\n    if (!updatedSessionData) {\n         console.warn(`[LibraryController] Session update notification for ${sessionId} missing session data in payload.session.`, notification);\n         return;\n    }\n    \n    console.log(`[LibraryController] Received session update for ${sessionId}. New starred status: ${updatedSessionData.isStarred}`);\n\n    const itemIndex = currentStarredItems.findIndex(item => item.sessionId === sessionId); \n\n    if (updatedSessionData.isStarred) {\n        if (itemIndex === -1) {\n            console.log(`[LibraryController] Session ${sessionId} is newly starred. Adding to list.`);\n\n             const newItem = {\n                 sessionId: sessionId,\n                 name: updatedSessionData.title || 'Untitled', \n                 lastUpdated: updatedSessionData.timestamp || Date.now(), \n                 isStarred: true\n             };\n             currentStarredItems.push(newItem);\n        } else {\n            console.log(`[LibraryController] Session ${sessionId} was already starred. Updating data.`);\n            currentStarredItems[itemIndex] = {\n                ...currentStarredItems[itemIndex], \n                name: updatedSessionData.title || currentStarredItems[itemIndex].name, \n                lastUpdated: updatedSessionData.timestamp || currentStarredItems[itemIndex].lastUpdated, \n                isStarred: true\n            };\n        }\n    } else {\n        if (itemIndex !== -1) {\n            console.log(`[LibraryController] Session ${sessionId} is no longer starred. Removing from list.`);\n            currentStarredItems.splice(itemIndex, 1);\n        } else {\n             console.log(`[LibraryController] Session ${sessionId} is not starred and was not in the list.`);\n        }\n    }\n\n    const libraryPage = document.getElementById('page-library');\n    if (libraryPage && !libraryPage.classList.contains('hidden')) {\n        console.log(\"[LibraryController] Library page is active, re-rendering list with filter.\");\n        currentSearchFilter = librarySearchInput?.value.trim() || '';\n        renderLibraryList(currentSearchFilter);\n    } else {\n        console.log(\"[LibraryController] Library page not active, internal list updated passively.\");\n    }\n}\n\ndocument.addEventListener(UIEventNames.NAVIGATION_PAGE_CHANGED, (e) => handleNavigationChange((e as CustomEvent).detail));\n\nfunction renderLibraryList(filter: string = ''): void {\n    if (!isInitialized || !starredListElement) return;\n    console.log(`[LibraryController] Rendering with filter \"${filter}\"`);\n    \n    let itemsToRender = [...currentStarredItems];\n\n    if (filter) {\n        const searchTerm = filter.toLowerCase();\n        itemsToRender = itemsToRender.filter(entry =>\n            (entry.name || '').toLowerCase().includes(searchTerm)\n        );\n    }\n\n    itemsToRender.sort((a, b) => b.lastUpdated - a.lastUpdated);\n\n    starredListElement.innerHTML = ''; \n\n    if (itemsToRender.length === 0) {\n        const message = filter\n            ? `<p class=\"p-4 text-center text-gray-500 dark:text-gray-400 italic\">No starred items match \"${filter}\".</p>`\n            : '<p class=\"p-4 text-center text-gray-500 dark:text-gray-400 italic\">No starred items yet.</p>';\n        starredListElement.innerHTML = message;\n    } else {\n        itemsToRender.forEach(entry => {\n            const props = {\n                entry: {\n                    id: entry.sessionId,\n                    name: entry.name,\n                    title: entry.name,\n                    timestamp: entry.lastUpdated,\n                    isStarred: entry.isStarred,\n                    messages: [] \n                },\n                onLoadClick: handleLoadClick,\n                onStarClick: handleStarClick,\n                onDeleteClick: handleDeleteClick,\n                onRenameSubmit: handleRenameSubmit,\n                onDownloadClick: handleDownloadClick,\n                onShareClick: handleShareClick, \n                onPreviewClick: handlePreviewClick \n            };\n            const itemElement = renderHistoryItemComponent(props);\n            if (itemElement && starredListElement) {\n                starredListElement.appendChild(itemElement);\n            }\n        });\n    }\n     console.log(`[LibraryController] Rendered ${itemsToRender.length} items.`);\n}\n\nconst handleSearchInput = debounce((event: any): void => {\n    if (!isInitialized) return;\n    currentSearchFilter = event.target.value.trim();\n    console.log(`[LibraryController] Search input changed: \"${currentSearchFilter}\"`);\n    renderLibraryList(currentSearchFilter);\n}, 300);\n\nexport function initializeLibraryController(elements: any, requestFunc: any): any {\n    console.log(\"[LibraryController] Initializing...\");\n    if (!elements || !elements.listContainer || !requestFunc) { // Removed searchInput from mandatory checks here, handled in navigation\n        console.error(\"[LibraryController] Initialization failed: Missing required elements (listContainer) or request function.\", { elements, requestFunc });\n        return null;\n    }\n\n    starredListElement = elements.listContainer;\n    requestDbAndWaitFunc = requestFunc;\n    console.log(\"[LibraryController] Elements and request function assigned.\");\n\n    isInitialized = true;\n    console.log(\"[LibraryController] Initialization successful. Library will render when activated.\");\n\n    // --- Add event listener for session updates ---\n    document.addEventListener(DbSessionUpdatedNotification.type, (e) => handleSessionUpdate((e as CustomEvent).detail));\n\n    return {\n\n    };\n} ","import { UIEventNames } from \"../events/eventNames\";\r\nimport { registerPopupCallbacks } from \"../modelAssetDownloader\";\r\nimport type { FilePlan, FileState } from \"../modelAssetDownloader\";\r\n\r\nlet modalElement: HTMLElement | null = null;\r\nlet fileListElement: HTMLElement | null = null;\r\nlet modelTitleElement: HTMLElement | null = null;\r\n\r\nlet currentOnnxFiles: any[] = [];\r\nlet currentAllFiles: any[] = [];\r\nlet currentFileStates: { [fileName: string]: { status: string, progress: number } } = {};\r\nlet currentNonOnnxProgress: number = 0;\r\nlet currentNonOnnxStatus: string = 'unknown';\r\n\r\nlet activeOnnxDownloadName: string | null = null;\r\nlet requestFileDownloadCbRef: ((filePlan: any) => void) | null = null;\r\n\r\nfunction formatFileSize(bytes: number): string {\r\n  if (!bytes || bytes === 0) return 'N/A';\r\n  const mb = bytes / 1024 / 1024;\r\n  if (mb < 1) return (bytes / 1024).toFixed(1) + ' KB';\r\n  return mb.toFixed(1) + ' MB';\r\n}\r\n\r\nfunction renderFileList() {\r\n  const requestFileDownloadCb = requestFileDownloadCbRef;\r\n  if (!fileListElement || !modalElement) return;\r\n  fileListElement.innerHTML = '';\r\n\r\n  const nonOnnxFilesToDisplay = currentAllFiles.filter(f => !f.manifest.fileName.endsWith('.onnx'));\r\n\r\n  if (nonOnnxFilesToDisplay.length) {\r\n    const nonOnnxRow = document.createElement('div');\r\n    nonOnnxRow.id = 'non-onnx-row';\r\n    nonOnnxRow.className = 'mb-3 px-4 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg shadow flex flex-col gap-1';\r\n    \r\n    const infoDiv = document.createElement('div');\r\n    infoDiv.className = 'flex justify-between items-center text-xs';\r\n    let statusText = currentNonOnnxStatus.charAt(0).toUpperCase() + currentNonOnnxStatus.slice(1);\r\n    if (currentNonOnnxStatus === 'downloaded') statusText = 'Ready';\r\n    if (currentNonOnnxStatus === 'present') statusText = 'Ready';\r\n\r\n    infoDiv.innerHTML = `<span class=\"font-semibold text-xs text-gray-700 dark:text-gray-200\">Supporting Files</span> <span class=\"text-xs px-2 py-1 rounded ${currentNonOnnxStatus === 'downloaded' || currentNonOnnxStatus === 'present' ? 'bg-green-100 text-green-700 dark:bg-green-700 dark:text-green-100' : 'bg-blue-100 text-blue-700 dark:bg-blue-700 dark:text-blue-100'}\">${statusText}</span>`;\r\n    nonOnnxRow.appendChild(infoDiv);\r\n\r\n    if (currentNonOnnxStatus === 'downloading' || currentNonOnnxStatus === 'queued') {\r\n      const progressBarContainer = document.createElement('div');\r\n      progressBarContainer.className = 'w-full h-1 bg-gray-200 dark:bg-gray-700 rounded overflow-hidden mt-1';\r\n      const progressBar = document.createElement('div');\r\n      progressBar.className = `h-1 transition-all duration-300 rounded ${currentNonOnnxStatus === 'downloading' ? 'bg-blue-500' : 'bg-gray-400'}`;\r\n      progressBar.id = 'progress-non-onnx';\r\n      progressBar.style.width = `${currentNonOnnxProgress}%`;\r\n      progressBarContainer.appendChild(progressBar);\r\n      nonOnnxRow.appendChild(progressBarContainer);\r\n    }\r\n    fileListElement.appendChild(nonOnnxRow);\r\n  }\r\n\r\n  currentOnnxFiles.forEach(file => {\r\n    const row = document.createElement('div');\r\n    row.className = 'mb-2 px-3 py-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow flex flex-col gap-1';\r\n    row.id = `file-row-${file.manifest.fileName.replace(/[/.]/g, '-')}`;\r\n    \r\n    const fileState = currentFileStates[file.manifest.fileName] || { status: 'unknown', progress: 0 };\r\n    \r\n    // Debug log for ONNX files\r\n    if (file.manifest.fileName.endsWith('.onnx')) {\r\n        console.log('[ONNXSelectionPopupController] renderFileList:', file.manifest.fileName, 'fileState:', fileState);\r\n    }\r\n\r\n    const infoDiv = document.createElement('div');\r\n    infoDiv.className = 'flex justify-between items-center text-xs';\r\n    infoDiv.innerHTML = `<span class=\"font-semibold text-xs text-gray-800 dark:text-gray-100\">${file.manifest.fileName.split('/').pop()}</span> <span class=\"text-xs text-gray-500 dark:text-gray-400\">${formatFileSize(file.manifest.size)}</span>`;\r\n    \r\n    const loadBtn = document.createElement('button');\r\n    loadBtn.className = 'onnx-load-btn px-2 py-0.5 text-xs font-semibold rounded shadow focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-offset-gray-800';\r\n\r\n    let disableButton = false;\r\n    if (activeOnnxDownloadName && activeOnnxDownloadName !== file.manifest.fileName) disableButton = true;\r\n    if (currentNonOnnxStatus === 'downloading' || currentNonOnnxStatus === 'queued') disableButton = true;\r\n\r\n    if (fileState.status === 'present' || fileState.status === 'downloaded') {\r\n        loadBtn.textContent = 'Loaded';\r\n        loadBtn.disabled = true;\r\n        loadBtn.className += ' bg-green-500 text-white cursor-not-allowed';\r\n    } else if (fileState.status === 'downloading') {\r\n        loadBtn.textContent = `Loading... ${fileState.progress}%`;\r\n        loadBtn.disabled = true;\r\n        loadBtn.className += ' bg-yellow-500 text-white cursor-wait';\r\n        activeOnnxDownloadName = file.manifest.fileName; \r\n    } else if (fileState.status === 'queued') {\r\n        loadBtn.textContent = 'Queued';\r\n        loadBtn.disabled = true;\r\n        loadBtn.className += ' bg-gray-400 text-white cursor-wait dark:bg-gray-600';\r\n    } else if (fileState.status === 'failed') {\r\n        loadBtn.textContent = 'Failed - Retry';\r\n        loadBtn.disabled = disableButton;\r\n        loadBtn.className += ` ${disableButton ? 'bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-gray-700 dark:text-gray-400' : 'bg-red-500 hover:bg-red-600 text-white focus:ring-red-400'}`;\r\n        if (requestFileDownloadCb) loadBtn.onclick = () => { console.log('[ONNXSelectionPopupController] Load button clicked', file); requestFileDownloadCb(file); };\r\n    } else {\r\n        loadBtn.textContent = 'Load Model';\r\n        loadBtn.disabled = disableButton;\r\n        loadBtn.className += ` ${disableButton ? 'bg-gray-300 text-gray-500 cursor-not-allowed dark:bg-gray-700 dark:text-gray-400' : 'bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500'}`;\r\n        if (requestFileDownloadCb) loadBtn.onclick = () => { console.log('[ONNXSelectionPopupController] Load button clicked', file); requestFileDownloadCb(file); };\r\n    }\r\n    infoDiv.appendChild(loadBtn);\r\n    row.appendChild(infoDiv);\r\n\r\n    if (fileState.status === 'downloading' || fileState.status === 'queued') {\r\n      const progressBarContainer = document.createElement('div');\r\n      progressBarContainer.className = 'w-full h-1 bg-gray-200 dark:bg-gray-700 rounded overflow-hidden mt-1';\r\n      const progressBar = document.createElement('div');\r\n      let barColor = 'bg-blue-500';\r\n      if (fileState.status === 'downloading') barColor = 'bg-green-500';\r\n      else if (fileState.status === 'queued') barColor = 'bg-gray-400';\r\n      progressBar.className = `h-1 ${barColor} transition-all duration-300 rounded`;\r\n      progressBar.id = `progress-${file.manifest.fileName.replace(/[/.]/g, '-')}`;\r\n      progressBar.style.width = `${fileState.progress}%`;\r\n      progressBarContainer.appendChild(progressBar);\r\n      row.appendChild(progressBarContainer);\r\n    }\r\n    if (fileListElement) fileListElement.appendChild(row);\r\n  });\r\n}\r\n\r\nfunction updateFileState(fileName: string, status: string, progress: number) {\r\n    if (!currentFileStates[fileName]) currentFileStates[fileName] = { status: 'unknown', progress: 0 };\r\n    currentFileStates[fileName].status = status;\r\n    currentFileStates[fileName].progress = progress;\r\n\r\n    // Debug log for ONNX files\r\n    if (fileName.endsWith('.onnx')) {\r\n        console.log('[ONNXSelectionPopupController] updateFileState:', fileName, 'status:', status, 'progress:', progress);\r\n    }\r\n\r\n    if (status === 'downloading' && currentOnnxFiles.some(f => f.manifest.fileName === fileName)) {\r\n        activeOnnxDownloadName = fileName;\r\n    } else if ((status === 'downloaded' || status === 'failed' || status === 'present') && activeOnnxDownloadName === fileName) {\r\n        activeOnnxDownloadName = null;\r\n    }\r\n    renderFileList();\r\n}\r\n\r\nfunction updateNonOnnxState(status: string, progress: number) {\r\n    currentNonOnnxStatus = status;\r\n    currentNonOnnxProgress = progress;\r\n    if (status === 'downloaded' || status === 'present' || status === 'failed'){\r\n       // Potentially re-enable ONNX buttons if non-ONNX is done or failed\r\n       if (activeOnnxDownloadName === null) renderFileList();\r\n    } else {\r\n       renderFileList();\r\n    }\r\n}\r\n\r\n\r\nfunction handleDownloaderUpdate(update: any) {\r\n    if (update.type === 'file_update') {\r\n        updateFileState(update.fileName, update.status, update.progress);\r\n    } else if (update.type === 'non_onnx_update') {\r\n        updateNonOnnxState(update.status, update.progress);\r\n    } else if (update.type === 'all_non_onnx_complete') {\r\n        currentNonOnnxStatus = 'downloaded';\r\n        currentNonOnnxProgress = 100;\r\n        activeOnnxDownloadName = null; \r\n        renderFileList();\r\n    } else if (update.type === 'all_downloads_complete') {\r\n        activeOnnxDownloadName = null;\r\n        renderFileList();\r\n        if (update.success) {\r\n           setTimeout(hide, 1500); // Auto-close on full success\r\n        }\r\n    }\r\n}\r\n\r\nfunction show(\r\n    modelId: string,\r\n    onnxFilesArg: any[],\r\n    allFilesArg: any[],\r\n    initialFileStatesArg: { [fileName: string]: { status: string, progress: number } },\r\n    nonOnnxInitialProgressArg: number,\r\n    nonOnnxInitialStatusArg: string,\r\n    requestFileDownloadCb: (filePlan: any) => void \r\n) {\r\n    currentOnnxFiles = onnxFilesArg;\r\n    currentAllFiles = allFilesArg;\r\n    currentFileStates = JSON.parse(JSON.stringify(initialFileStatesArg)); \r\n    currentNonOnnxProgress = nonOnnxInitialProgressArg;\r\n    currentNonOnnxStatus = nonOnnxInitialStatusArg;\r\n    activeOnnxDownloadName = null;\r\n    requestFileDownloadCbRef = requestFileDownloadCb;\r\n\r\n    console.log('[ONNXSelectionPopupController] Callback set', typeof requestFileDownloadCbRef);\r\n\r\n    const activeOnnx = currentOnnxFiles.find(f => currentFileStates[f.manifest.fileName]?.status === 'downloading');\r\n    if (activeOnnx) {\r\n        activeOnnxDownloadName = activeOnnx.manifest.fileName;\r\n    }\r\n    if (modelTitleElement) modelTitleElement.textContent = `Select ONNX Model for: ${modelId.split('/').pop()}`;\r\n\r\n    renderFileList();\r\n    modalElement?.classList.remove('hidden');\r\n    modalElement?.classList.add('flex');\r\n}\r\n\r\nfunction hide() {\r\n    modalElement?.classList.add('hidden');\r\n    modalElement?.classList.remove('flex');\r\n    // Notify main UI that popup was closed, so it can reset progress/button\r\n    document.dispatchEvent(new CustomEvent(UIEventNames.MODEL_DOWNLOAD_PROGRESS, { detail: { status: 'popupclosed', done: true } }));\r\n}\r\n\r\nexport function initializeONNXSelectionPopup(elements: { modal: HTMLElement, fileList: HTMLElement, modelTitle: HTMLElement }): any {\r\n    modalElement = elements.modal;\r\n    fileListElement = elements.fileList;\r\n    modelTitleElement = elements.modelTitle;\r\n\r\n    if (!modalElement || !fileListElement || !modelTitleElement) {\r\n        console.error('[ONNXSelectionPopupController] Initialization failed: missing elements');\r\n        return null;\r\n    }\r\n\r\n    registerPopupCallbacks(handleDownloaderUpdate);\r\n\r\n    (window as any).showOnnxSelectionPopup = show;\r\n    (window as any).hideOnnxSelectionPopup = hide;\r\n    \r\n    return { show, hide };\r\n}\r\n\r\ndeclare global {\r\n    interface Window {\r\n        showOnnxSelectionPopup?: (\r\n            modelId: string,\r\n            onnxFiles: FilePlan[],\r\n            allFilePlans: FilePlan[],\r\n            fileStates: { [fileName: string]: FileState },\r\n            nonOnnxProgress: number,\r\n            nonOnnxStatus: string,\r\n            callback: (filePlan: FilePlan) => void\r\n        ) => void;\r\n        hideOnnxSelectionPopup?: () => void;\r\n    }\r\n}","// src/Controllers/SettingsController.js\nimport browser from 'webextension-polyfill';\nimport { sendDbRequestSmart } from '../sidepanel';\nimport { DbResetDatabaseRequest } from '../DB/dbEvents';\nlet isInitialized = false;\n\nconst updateThemeButtonText = (button: HTMLElement | null): void => {\n    if (!button) return;\n    const isDarkMode = document.documentElement.classList.contains('dark');\n    button.textContent = isDarkMode ? 'Switch to Light Mode' : 'Switch to Dark Mode';\n};\n\nfunction setupThemeToggle(): void {\n    const settingsPageContainer = document.getElementById('page-settings');\n    if (!settingsPageContainer) {\n        console.warn(\"[SettingsController] Could not find #page-settings container.\");\n        return;\n    }\n\n    let themeToggleButton = settingsPageContainer.querySelector('#theme-toggle-button') as HTMLButtonElement | null;\n\n    if (!themeToggleButton) {\n        console.log(\"[SettingsController] Creating theme toggle button.\");\n        themeToggleButton = document.createElement('button');\n        themeToggleButton.id = 'theme-toggle-button';\n        themeToggleButton.className = 'p-2 border rounded bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 mt-4'; // Standard styling\n\n        themeToggleButton.onclick = () => {\n            const htmlElement = document.documentElement;\n            const isCurrentlyDark = htmlElement.classList.contains('dark');\n            console.log(`[SettingsToggle] Before toggle - isDark: ${isCurrentlyDark}`);\n\n            if (isCurrentlyDark) {\n                htmlElement.classList.remove('dark');\n                localStorage.setItem('theme', 'light');\n                console.log(`[SettingsToggle] Removed dark class, set localStorage to light`);\n            } else {\n                htmlElement.classList.add('dark');\n                localStorage.setItem('theme', 'dark');\n                console.log(`[SettingsToggle] Added dark class, set localStorage to dark`);\n            }\n            updateThemeButtonText(themeToggleButton); \n        };\n        \n        const placeholderText = settingsPageContainer.querySelector('p');\n        if (placeholderText) {\n            placeholderText.insertAdjacentElement('afterend', themeToggleButton);\n        } else {\n            settingsPageContainer.appendChild(themeToggleButton);\n        }\n    } else {\n        console.log(\"[SettingsController] Theme toggle button already exists.\");\n    }\n\n    updateThemeButtonText(themeToggleButton);\n}\n\nfunction setupSlider(sliderId: string, valueSpanId: string): void {\n    const slider = document.getElementById(sliderId) as HTMLInputElement | null;\n    const valueSpan = document.getElementById(valueSpanId) as HTMLElement | null;\n\n    if (slider && valueSpan) {\n        valueSpan.textContent = slider.value;\n        slider.addEventListener('input', (event: Event) => {\n            const target = event.target as HTMLInputElement;\n            valueSpan.textContent = target.value;\n        });\n        console.log(`[SettingsController] Setup slider ${sliderId} with value display ${valueSpanId}`);\n    } else {\n        if (!slider) console.warn(`[SettingsController] Slider element not found: #${sliderId}`);\n        if (!valueSpan) console.warn(`[SettingsController] Value span element not found: #${valueSpanId}`);\n    }\n}\n\nexport function initializeSettingsController(): any {\n    if (isInitialized) {\n        console.log(\"[SettingsController] Already initialized.\");\n        return;\n    }\n    console.log(\"[SettingsController] Initializing...\");\n\n    setupThemeToggle();\n    \n    setupSlider('setting-temperature', 'setting-temperature-value');\n    setupSlider('setting-repeat-penalty', 'setting-repeat-penalty-value');\n    setupSlider('setting-top-p', 'setting-top-p-value');\n    setupSlider('setting-min-p', 'setting-min-p-value');\n\n    const viewLogsButton = document.getElementById('viewLogsButton');\n    if (viewLogsButton) {\n        viewLogsButton.addEventListener('click', () => {\n            console.log('[SettingsController] View Logs button clicked. Opening log viewer popup...');\n            try {\n                const viewerUrl = 'sidepanel.html?view=logs'; \n                \n                browser.windows.create({\n                     url: viewerUrl,\n                     type: 'popup',\n                     width: 800,\n                     height: 600\n                 });\n            } catch (error) {\n                console.error('[SettingsController] Error opening log viewer popup:', error);\n\n            }\n        });\n        console.log('[SettingsController] Added listener to View Logs button.');\n\n        const resetDbButton = document.getElementById('resetDbButton');\n        if (resetDbButton) {\n            resetDbButton.addEventListener('click', async () => {\n                console.log('[SettingsController] Reset DB button clicked.');\n                try {\n                    const request = new DbResetDatabaseRequest();\n                    const result = await sendDbRequestSmart(request);\n                    if (result && result.success) {\n                        alert('Database reset successfully!');\n                    } else {\n                        alert('Database reset failed.');\n                    }\n                    console.log('[SettingsController] Reset DB result:', result);\n                } catch (e: any) {\n                    alert('Failed to reset database: ' + (e.message || e));\n                    console.error('[SettingsController] Reset DB error:', e);\n                }\n            });\n        }\n        console.log('[SettingsController] Added Reset DB button next to View Logs button.');\n    } else {\n        console.warn('[SettingsController] View Logs button (viewLogsButton) not found.');\n    }\n\n\n    isInitialized = true;\n    console.log(\"[SettingsController] Initialized successfully.\");\n\n    return {}; \n} ","// src/Controllers/SpacesController.js\r\n\r\n\r\n\r\nlet isInitialized = false;\r\n\r\n\r\nexport function initializeSpacesController(/* Pass necessary elements or functions if needed */): any {\r\n    if (isInitialized) {\r\n        console.log(\"[SpacesController] Already initialized.\");\r\n        return;\r\n    }\r\n    console.log(\"[SpacesController] Initializing...\");\r\n    \r\n\r\n\r\n    isInitialized = true;\r\n    console.log(\"[SpacesController] Initialized successfully.\");\r\n\r\n\r\n    return {}; \r\n} ","// db.js\nimport browser from 'webextension-polyfill';\nimport {\n  DBEventNames,\n  DbCreateSessionRequest, DbCreateSessionResponse,\n  DbGetSessionRequest, DbGetSessionResponse,\n  DbAddMessageRequest, DbAddMessageResponse,\n  DbUpdateMessageRequest, DbUpdateMessageResponse,\n  DbDeleteMessageRequest, DbDeleteMessageResponse,\n  DbUpdateStatusRequest, DbUpdateStatusResponse,\n  DbToggleStarRequest, DbToggleStarResponse,\n  DbGetAllSessionsRequest, DbGetAllSessionsResponse,\n  DbMessagesUpdatedNotification, DbStatusUpdatedNotification, DbSessionUpdatedNotification,\n  DbInitializeRequest, DbInitializationCompleteNotification,\n  DbDeleteSessionRequest, DbDeleteSessionResponse,\n  DbRenameSessionRequest, DbRenameSessionResponse,\n  DbGetStarredSessionsRequest, DbGetStarredSessionsResponse,\n  DbGetReadyStateRequest, DbGetReadyStateResponse,\n  DbResetDatabaseRequest, DbResetDatabaseResponse,\n  DbAddModelAssetRequest, DbAddModelAssetResponse,\n  DbAddManifestRequest, DbAddManifestResponse,\n  DbGetManifestRequest, DbGetManifestResponse,\n  DbCountModelAssetChunksRequest, DbCountModelAssetChunksResponse,\n  DbLogAllChunkGroupIdsForModelRequest, DbLogAllChunkGroupIdsForModelResponse,\n  DbListModelFilesRequest, DbListModelFilesResponse,\n  DbGetModelAssetChunksRequest, DbGetModelAssetChunksResponse,\n  DbGetModelAssetChunkRequest, DbGetModelAssetChunkResponse,\n  DbEnsureInitializedRequest, DbEnsureInitializedResponse,\n  DbAddLogRequest, DbAddLogResponse,\n  DbGetLogsRequest, DbGetLogsResponse,\n  DbGetUniqueLogValuesRequest, DbGetUniqueLogValuesResponse,\n  DbClearLogsRequest, DbClearLogsResponse,\n  DbGetCurrentAndLastLogSessionIdsRequest, DbGetCurrentAndLastLogSessionIdsResponse,\n  // New ModelAsset CRUD/static events\n  DbCreateAllFileManifestsForRepoRequest, DbCreateAllFileManifestsForRepoResponse,\n  DbUpdateAllFileManifestsForRepoRequest, DbUpdateAllFileManifestsForRepoResponse,\n  DbDeleteAllFileManifestsForRepoRequest, DbDeleteAllFileManifestsForRepoResponse,\n  DbCreateManifestByChunkGroupIdRequest, DbCreateManifestByChunkGroupIdResponse,\n  DbUpdateManifestByChunkGroupIdRequest, DbUpdateManifestByChunkGroupIdResponse,\n  DbDeleteManifestByChunkGroupIdRequest, DbDeleteManifestByChunkGroupIdResponse,\n  DbReadManifestRequest, DbReadManifestResponse,\n  DbUpdateManifestRequest, DbUpdateManifestResponse,\n  DbDeleteManifestRequest, DbDeleteManifestResponse,\n  DbUpdateChunkRequest, DbUpdateChunkResponse,\n  DbDeleteChunkRequest, DbDeleteChunkResponse,\n  DbGetAllModelFileManifestsRequest,\n  DbGetAllModelFileManifestsResponse,\n  DbManifestUpdatedNotification\n} from './dbEvents';\nimport { schema, dbChannel } from './idbSchema';\nimport { MODEL_ASSET_TYPE_MANIFEST, CHUNK_SIZE as CONFIG_CHUNK_SIZE_FROM_HELPER, ModelAsset, ModelAssetManifest } from './idbModelAsset'; \nimport { DBActions, DbInitOptions } from './dbActions'; \nimport { Chat } from './idbChat';\nimport { LogEntry } from './idbLog';\n\n\nconst DB_INIT_TIMEOUT = 15000;\nconst APP_CHUNK_SIZE_CONFIG = CONFIG_CHUNK_SIZE_FROM_HELPER || (10 * 1024 * 1024); // Use helper's or default\n\nlet isDbReadyFlag = false;\nlet currentExtensionSessionId: string | null = null;\nlet previousExtensionSessionId: string | null = null;\nlet dbInitPromise: Promise<any> | null = null;\nlet isDbInitInProgress: boolean = false;\nlet dbWorker: Worker | null = null;\nlet dbWorkerReady: boolean = false;\nlet dbWorkerRequestId: number = 0;\nconst dbWorkerCallbacks: Record<string, { resolve: Function; reject: Function }> = {};\n\nlet lastDbInitStatus: any = null;\nlet currentChat: any = null;\n\nlet dbReadyResolve: ((value: boolean) => void) | null = null;\n\n// Logging flags for manifest batch fetch and general DB operations\nconst LOG_GENERAL = true;\nconst LOG_DEBUG = false;\nconst LOG_ERROR = true;\nconst LOG_WARN = true;\n\nfunction resetDbReadyPromise() {\n  dbReadyResolve = () => {};\n}\n\nclass AppError extends Error {\n  code: string;\n  details: any;\n  constructor(code: string, message: string, details: any = {}) {\n    super(message);\n    this.code = code;\n    this.details = details;\n    this.name = 'AppError';\n  }\n}\n\nasync function withTimeout<T>(promise: Promise<T>, ms: number, errorMessage = `Operation timed out after ${ms}ms`): Promise<T> {\n  let timeoutId: ReturnType<typeof setTimeout> | undefined = undefined;\n  const timeout = new Promise<never>((_, reject) => {\n    timeoutId = setTimeout(() => reject(new AppError('TIMEOUT', errorMessage)), ms);\n  });\n  try {\n    return await Promise.race([promise, timeout]);\n  } finally {\n    if (timeoutId !== undefined) clearTimeout(timeoutId);\n  }\n}\n\nfunction createDbWorker() {\n  if (!dbWorker) {\n    const workerUrl = browser.runtime.getURL('DB/indexedDBBackendWorker.js');\n    console.log('[DB] Creating new DB Worker with URL:', workerUrl);\n    let workerCreated = false;\n    try {\n      dbWorker = new Worker(workerUrl, { type: 'module' });\n      workerCreated = true;\n    } catch (workerErr) {\n      console.error('[DB] Failed to create DB Worker:', workerErr);\n      dbWorker = null;\n      dbWorkerReady = false;\n      // Optionally, you could throw or handle this error further here\n      return null;\n    }\n    if (workerCreated) {\n      dbWorker.onmessage = (event) => {\n        const { requestId, type, result, error, stack } = event.data;\n        const { type: evtType, requestId: evtReqId, error: evtError } = event.data || {};\n        console.log('[DB] Worker onmessage:', { type: evtType, requestId: evtReqId, error: evtError });\n        if (requestId && dbWorkerCallbacks[requestId]) {\n          const callback = dbWorkerCallbacks[requestId];\n          delete dbWorkerCallbacks[requestId];\n\n          if (error) {\n            let errObj = error;\n            if (typeof error === 'string') {\n              errObj = new Error(error);\n              if (stack) errObj.stack = stack;\n            } else if (error instanceof Object && !(error instanceof Error)) {\n              errObj = new Error(error.message || 'Worker error object');\n              Object.assign(errObj, error);\n              if (stack) errObj.stack = stack;\n            }\n            console.error('[DB] Worker callback.reject:', errObj, 'for requestId:', requestId);\n            callback.reject(errObj);\n          } else {\n            console.log('[DB] Worker callback.resolve:', result, 'for requestId:', requestId);\n            callback.resolve(result);\n          }\n        } else if (type === 'debug') {\n          console.log(`[DB Worker Debug] ${event.data.message}`);\n        } else if (type === 'fatal') {\n          console.error(`[DB Worker Fatal] ${event.data.error}`, event.data.stack);\n          Object.values(dbWorkerCallbacks).forEach((cb: any) =>\n            cb.reject(new Error('DB Worker encountered a fatal error'))\n          );\n          Object.keys(dbWorkerCallbacks).forEach(key => delete dbWorkerCallbacks[key]);\n        } else if (type === DBActions.WORKER_READY) {\n          dbWorkerReady = true;\n          console.log('[DB] DB Worker signaled script ready.');\n        } else if (requestId) {\n          // This is a normal response to a request, no warning needed.\n        } else {\n          // Instead of logging the full event.data object, log only key fields for clarity and memory safety\n          const { type: unknownType, requestId: unknownReqId, error: unknownError } = event.data || {};\n          console.warn('[DB] Worker received unknown message type:', unknownType, { requestId: unknownReqId, error: unknownError });\n        }\n      };\n      dbWorker.onerror = (errEvent) => {\n        console.error('[DB] Uncaught error in DB Worker:', errEvent.message, errEvent);\n        Object.values(dbWorkerCallbacks).forEach((cb: any) =>\n          cb.reject(new Error(`DB Worker crashed: ${errEvent.message || 'Unknown worker error'}`))\n        );\n        Object.keys(dbWorkerCallbacks).forEach(key => delete dbWorkerCallbacks[key]);\n        dbWorker = null;\n        dbWorkerReady = false;\n      };\n      console.log('[DB] DB Worker created and event handlers attached.');\n    }\n  } else {\n    console.log('[DB] Returning existing DB Worker instance.');\n  }\n  return dbWorker;\n}\n\n// Helper to ensure dbWorker is not null\nfunction getDbWorker(): Worker {\n  if (!dbWorker) throw new AppError('WORKER_NOT_INITIALIZED', 'DB Worker is not initialized');\n  return dbWorker;\n}\n\nfunction checkDbAndStoreReadiness(result: any) {\n  if (!result || typeof result !== 'object') {\n    console.warn('[DB] checkDbAndStoreReadiness received invalid result:', result);\n    return { allSuccess: false, failures: ['Invalid result object'] };\n  }\n  let allSuccess = true;\n  const failures: string[] = [];\n  for (const [dbName, dbStatus] of Object.entries(result)) {\n    if (!dbStatus || typeof dbStatus !== 'object' || !('success' in dbStatus) || !(dbStatus as any).success) {\n      allSuccess = false;\n      failures.push(`${dbName} (DB init: ${(dbStatus as any)?.error?.message || 'failed'})`);\n    }\n    if (dbStatus && typeof dbStatus === 'object' && 'stores' in dbStatus && (dbStatus as any).stores) {\n      for (const [storeName, storeStatus] of Object.entries((dbStatus as any).stores)) {\n        if (!storeStatus || typeof storeStatus !== 'object' || !('success' in storeStatus) || !(storeStatus as any).success) {\n          allSuccess = false;\n          failures.push(`${dbName}.${storeName} (Store init: ${(storeStatus as any)?.error?.message || 'failed'})`);\n        }\n      }\n    }\n  }\n  return { allSuccess, failures };\n}\n\nasync function autoEnsureDbInitialized() {\n  resetDbReadyPromise(); // Ensure _dbReadyResolve is always a function\n  if (isDbReadyFlag && (lastDbInitStatus as any)?.success) {\n    const result = { success: true, dbStatus: lastDbInitStatus, sessionIds: { currentExtensionSessionId, previousExtensionSessionId } };\n    smartNotify(new DbInitializationCompleteNotification(result));\n    return result;\n  }\n  if (isDbInitInProgress) {\n    return dbInitPromise; // Return the existing promise\n  }\n  isDbInitInProgress = true;\n  dbInitPromise = (async () => {\n    try {\n      console.log('[DB] autoEnsureDbInitialized: Initializing databases and backend.');\n      let ids = await browser.storage.local.get(['currentLogSessionId', 'previousLogSessionId']);\n      if (!ids.currentLogSessionId) {\n        ids.currentLogSessionId = crypto.randomUUID();\n        await browser.storage.local.set({ currentLogSessionId: ids.currentLogSessionId });\n      }\n      currentExtensionSessionId = ids.currentLogSessionId;\n      previousExtensionSessionId = ids.previousLogSessionId || null;\n\n      const worker = createDbWorker();\n      if (!worker) {\n        const errorMsg = '[DB] Failed to initialize DB Worker. Aborting DB initialization.';\n        console.error(errorMsg);\n        isDbReadyFlag = false;\n        if (typeof dbReadyResolve === 'function') dbReadyResolve(false);\n        lastDbInitStatus = { error: errorMsg, success: false };\n        const errorResponse = { success: false, error: errorMsg, dbStatus: lastDbInitStatus, sessionIds: { currentExtensionSessionId, previousExtensionSessionId } };\n        smartNotify(new DbInitializationCompleteNotification(errorResponse));\n        throw new AppError('WORKER_NOT_INITIALIZED', errorMsg);\n      }\n\n      if (!dbWorkerReady) {\n        console.log('[DB] Waiting for DB worker to become ready...');\n        await new Promise<void>((resolveWorkerReady, rejectWorkerReady) => {\n          const timeout = setTimeout(() => rejectWorkerReady(new Error(`Worker '${DBActions.WORKER_READY}' signal timeout after 10s`)), 10000);\n          const checkWorker = () => {\n            if (dbWorkerReady) { clearTimeout(timeout); resolveWorkerReady(); }\n            else { setTimeout(checkWorker, 50); }\n          };\n          checkWorker();\n        });\n        console.log('[DB] DB Worker is ready.');\n      }\n\n      const payloadForWorker = { schemaConfig: schema }; // Make sure 'schema' is defined and imported\n      const requestId = (++dbWorkerRequestId).toString();\n      \n      console.log('[DB] Sending INIT_CUSTOM_IDBS to worker:', { requestId, type: DBActions.INIT_CUSTOM_IDBS, payload: payloadForWorker });\n      const initOpPromise = new Promise((resolve, reject) => {\n        dbWorkerCallbacks[requestId] = { resolve, reject };\n      });\n      if (!dbWorker) throw new AppError('WORKER_NOT_INITIALIZED', 'DB Worker is not initialized');\n      dbWorker.postMessage({ requestId, action: DBActions.INIT_CUSTOM_IDBS, payload: payloadForWorker });\n      \n      const resultFromWorker = await withTimeout(initOpPromise, DB_INIT_TIMEOUT, 'DB Init operation with worker timed out');\n      lastDbInitStatus = resultFromWorker;\n\n      const { allSuccess, failures } = checkDbAndStoreReadiness(resultFromWorker as any);\n      isDbReadyFlag = allSuccess;\n      if (typeof dbReadyResolve === 'function') dbReadyResolve(allSuccess);\n\n      const responsePayload = { success: allSuccess, dbStatus: resultFromWorker, sessionIds: { currentExtensionSessionId, previousExtensionSessionId } };\n      if (!allSuccess) {\n        const errorMsg = `One or more databases/stores failed to initialize: ${failures.join(', ')}.`;\n        console.error('[DB]', errorMsg, 'Details:', resultFromWorker);\n        (responsePayload as any).error = new AppError('DB_INIT_FAILED', errorMsg, { failures, dbStatus: resultFromWorker });\n      }\n\n      smartNotify(new DbInitializationCompleteNotification(responsePayload));\n      if (!allSuccess) throw (responsePayload as any).error; // Throw if not successful\n      return responsePayload;\n\n    } catch (err) {\n      console.error('[DB] autoEnsureDbInitialized -> CRITICAL Initialization failed:', (err as Error).message);\n      isDbReadyFlag = false;\n      if (typeof dbReadyResolve === 'function') dbReadyResolve(false);\n      lastDbInitStatus = (lastDbInitStatus as any) || { error: (err as Error).message, success: false };\n      const errorResponse = { success: false, error: err as Error, dbStatus: lastDbInitStatus, sessionIds: { currentExtensionSessionId, previousExtensionSessionId } };\n      smartNotify(new DbInitializationCompleteNotification(errorResponse));\n      throw err; // Re-throw the error to be caught by the caller of autoEnsureDbInitialized\n    } finally {\n      isDbInitInProgress = false;\n    }\n  })();\n  return dbInitPromise;\n}\n\n\n// Unified handler for both DbInitializeRequest and DbEnsureInitializedRequest\nasync function handleDbEnsureInitialized(event: any) {\n  try {\n    const result = await autoEnsureDbInitialized();\n    return new DbEnsureInitializedResponse(event?.requestId || crypto.randomUUID(), result.success, result, result.success ? null : result.error);\n  } catch (e) {\n    return new DbEnsureInitializedResponse(event?.requestId || crypto.randomUUID(), false, null, e);\n  }\n}\n\nasync function handleRequest(\n  event: any,\n  internalHandler: Function,\n  ResponseClass: any,\n  timeout = 10000,\n  successDataExtractor = (result: any) => result.data,\n  errorDetailsExtractor = (errorResult: any) => ({ errorDetails: errorResult?.error })\n) {\n  const requestId = event?.requestId || crypto.randomUUID();\n  try {\n\n    if (!isDbReadyFlag) { // Secondary check\n        throw new AppError('DB_NOT_READY', 'Database is not ready after initialization attempt.');\n    }\n\n    const result = await withTimeout(internalHandler(event.payload), timeout);\n\n    if (result && (result as any).success === false) {\n      throw new AppError('INTERNAL_OPERATION_FAILED', (result as any).error || 'Unknown internal error from handler', errorDetailsExtractor(result));\n    }\n    const responseData = successDataExtractor(result);\n    return new ResponseClass(requestId, true, responseData);\n\n  } catch (error) {\n    const errObj = error as Error;\n    console.error(`[DB] Error in handleRequest for ${event?.type} (reqId: ${requestId}):`, errObj.message, (errObj as any).details || errObj);\n    const appError = (error instanceof AppError) ? error : new AppError('UNKNOWN_HANDLER_ERROR', errObj.message || 'Failed in request handler', { originalErrorName: errObj.name, originalErrorStack: errObj.stack, details: (errObj as any).details });\n    return new ResponseClass(requestId, false, null, appError);\n  }\n}\n\n// --- Handler Functions ---\n\nasync function handleDbGetReadyStateRequest(event: any) {\n  return new DbGetReadyStateResponse(event.requestId, true, { ready: isDbReadyFlag });\n}\n\nasync function handleDbCreateSessionRequest(event: any) {\n  return handleRequest(event, async (payload: any) => {\n    if (!payload?.initialMessage?.text) throw new AppError('INVALID_INPUT', 'Missing initialMessage or message text');\n    // Create new chat regardless of currentChat state for this specific request\n    const newChat = await Chat.createChat(payload.initialMessage.text, getDbWorker(), {\n      initialMessageSender: payload.initialMessage.sender || 'user',\n    });\n    if (!newChat) throw new AppError('DB_OPERATION_FAILED', 'Failed to create chat session (Chat.createChat returned null)');\n    \n    currentChat = newChat;\n    await publishSessionUpdate(currentChat.id, 'create', currentChat);\n    const messages = await currentChat.getMessages(); // Assumes createChat adds the initial message\n    await publishMessagesUpdate(currentChat.id, messages);\n    await publishStatusUpdate(currentChat.id, currentChat.status);\n    return { success: true, data: newChat };\n  }, DbCreateSessionResponse, 5000, (res: any) => res.data.id);\n}\n\nasync function handleDbGetSessionRequest(event: any) {\n  return handleRequest(event, async (payload: any) => {\n    if (!payload?.sessionId) throw new AppError('INVALID_INPUT', 'Session ID is required');\n    if (currentChat && currentChat.id === payload.sessionId) return { success: true, data: currentChat };\n    const worker = getDbWorker();\n    const chat = await Chat.read(payload.sessionId, worker);\n    if (!chat) return { success: false, error: `Session ${payload.sessionId} not found` };\n\n    // Load all messages for this chat\n    const messages = [];\n    for (const msgId of chat.message_ids) {\n      const msg = await chat.getMessage(msgId);\n      if (msg) {\n        // Load all attachments for this message, if any\n        if (msg.attachment_ids && msg.attachment_ids.length > 0 && typeof msg.getAttachments === 'function') {\n          (msg as any).attachments = await msg.getAttachments();\n        }\n        messages.push(msg);\n      }\n    }\n    // Attach messages to chat object for return\n    (chat as any).messages = messages;\n\n    return { success: true, data: chat };\n  }, DbGetSessionResponse);\n}\n\nasync function handleDbAddMessageRequest(event: any) {\n  return handleRequest(event, async (payload: any) => {\n    console.log('[DB][TRACE] handleDbAddMessageRequest: sessionId:', payload?.sessionId, 'messageObject:', payload?.messageObject);\n    if (!payload?.sessionId || !payload.messageObject?.text) throw new AppError('INVALID_INPUT', 'Session ID and message text are required');\n    const worker = getDbWorker();\n    let chat = (currentChat && currentChat.id === payload.sessionId) ? currentChat : await Chat.read(payload.sessionId, worker);\n    if (!chat) throw new AppError('NOT_FOUND', `Chat session ${payload.sessionId} not found.`);\n    const messageId = await chat.addMessage(payload.messageObject); // Pass full messageObject\n    if (currentChat && currentChat.id === payload.sessionId) currentChat = chat; \n    await publishSessionUpdate(chat.id, 'update', chat);\n    const messages = await chat.getMessages();\n    await publishMessagesUpdate(chat.id, messages);\n    return { success: true, data: { newMessageId: messageId }};\n  }, DbAddMessageResponse);\n}\n\nasync function handleDbUpdateMessageRequest(event: any) {\n  return handleRequest(event, async (payload: any) => {\n    console.log('[DB][TRACE] handleDbUpdateMessageRequest: sessionId:', payload?.sessionId, 'messageId:', payload?.messageId, 'updates:', payload?.updates);\n    if (!payload?.sessionId || !payload.messageId || !payload.updates || (payload.updates.text === undefined && payload.updates.isLoading === undefined && payload.updates.content === undefined /* Added content */)) {\n      throw new AppError('INVALID_INPUT', 'Session ID, message ID, and updates (text, content or isLoading) are required');\n    }\n    if (typeof payload.messageId !== 'string') {\n      console.error('[DB] handleDbUpdateMessageRequest: messageId is not a string:', payload.messageId);\n      throw new AppError('INVALID_INPUT', 'messageId must be a string');\n    }\n    const worker = getDbWorker();\n    let chat = (currentChat && currentChat.id === payload.sessionId) ? currentChat : await Chat.read(payload.sessionId, worker);\n    if (!chat) throw new AppError('NOT_FOUND', `Chat session ${payload.sessionId} not found.`);\n    const message = await chat.getMessage(payload.messageId);\n    if (!message) throw new AppError('NOT_FOUND', `Message ${payload.messageId} not found.`);\n    await message.update(payload.updates);\n    if (currentChat && currentChat.id === payload.sessionId) currentChat = chat;\n    await publishSessionUpdate(chat.id, 'update', chat);\n    const messages = await chat.getMessages();\n    await publishMessagesUpdate(chat.id, messages);\n    return { success: true, data: true };\n  }, DbUpdateMessageResponse);\n}\n\nasync function handleDbDeleteMessageRequest(event: any) {\n   return handleRequest(event, async (payload: any) => {\n    if (!payload?.sessionId || !payload.messageId) throw new AppError('INVALID_INPUT', 'Session ID and message ID are required');\n    const worker = getDbWorker();\n    let chat = (currentChat && currentChat.id === payload.sessionId) ? currentChat : await Chat.read(payload.sessionId, worker);\n    if (!chat) throw new AppError('NOT_FOUND', `Chat session ${payload.sessionId} not found.`);\n    const deleted = await chat.deleteMessage(payload.messageId, { deleteAttachments: true, deleteKGNRels: true, deleteOrphanedEmbedding: true }); // Options from Chat class\n    if (!deleted) throw new AppError('DB_OPERATION_FAILED', `Failed to delete message ${payload.messageId}.`);\n    if (currentChat && currentChat.id === payload.sessionId) currentChat = chat; // Chat object state might change (message_ids)\n    await publishSessionUpdate(chat.id, 'update', chat);\n    const messages = await chat.getMessages();\n    await publishMessagesUpdate(chat.id, messages);\n    return { success: true, data: true };\n  }, DbDeleteMessageResponse);\n}\n\nasync function handleDbUpdateStatusRequest(event: any) {\n  return handleRequest(event, async (payload: any) => {\n    if (!payload?.sessionId || !payload.status) throw new AppError('INVALID_INPUT', 'Session ID and status are required');\n    const validStatuses = ['idle', 'processing', 'complete', 'error'];\n    if (!validStatuses.includes(payload.status)) throw new AppError('INVALID_INPUT', `Invalid status: ${payload.status}`);\n    const worker = getDbWorker();\n    let chat = (currentChat && currentChat.id === payload.sessionId) ? currentChat : await Chat.read(payload.sessionId, worker);\n    if (!chat) throw new AppError('NOT_FOUND', `Chat session ${payload.sessionId} not found.`);\n    await chat.update({ status: payload.status });\n    if (currentChat && currentChat.id === payload.sessionId) currentChat = chat;\n    await publishSessionUpdate(chat.id, 'update', chat);\n    await publishStatusUpdate(chat.id, payload.status);\n    return { success: true, data: chat };\n  }, DbUpdateStatusResponse);\n}\n\nasync function handleDbToggleStarRequest(event: any) {\n  return handleRequest(event, async (payload: any) => {\n    if (!payload?.sessionId) throw new AppError('INVALID_INPUT', 'Session ID is required');\n    const worker = getDbWorker();\n    let chat = (currentChat && currentChat.id === payload.sessionId) ? currentChat : await Chat.read(payload.sessionId, worker);\n    if (!chat) throw new AppError('NOT_FOUND', `Chat session ${payload.sessionId} not found.`);\n    await chat.update({ isStarred: !chat.isStarred });\n    if (currentChat && currentChat.id === payload.sessionId) currentChat = chat;\n    await publishSessionUpdate(chat.id, 'update', chat);\n    return { success: true, data: chat };\n  }, DbToggleStarResponse);\n}\n\nasync function handleDbGetAllSessionsRequest(event: any) {\n  return handleRequest(event, async () => {\n    const worker = getDbWorker();\n    const chats = await (Chat as any).getAllChats(worker);\n    return { success: true, data: chats };\n  }, DbGetAllSessionsResponse, 5000, \n    (res: any) => (res.data || []).sort((a: any, b: any) => (b.chat_timestamp || 0) - (a.chat_timestamp || 0))\n  );\n}\n\nasync function handleDbGetStarredSessionsRequest(event: any) {\n  return handleRequest(event, async () => {\n    const worker = getDbWorker();\n    const chats = await (Chat as any).getAllChats(worker);\n    const starred = chats.filter((c: any) => c.isStarred);\n    return { success: true, data: starred };\n  }, DbGetStarredSessionsResponse, 5000,\n    (res: any) => (res.data || []).map((s: any) => ({ sessionId: s.id, name: s.title, lastUpdated: (s.chat_timestamp || 0), isStarred: s.isStarred }))\n                               .sort((a: any, b: any) => b.lastUpdated - a.lastUpdated)\n  );\n}\n\nasync function handleDbDeleteSessionRequest(event: any) {\n  return handleRequest(event, async (payload: any) => {\n    if (!payload?.sessionId) throw new AppError('INVALID_INPUT', 'Session ID is required');\n    const worker = getDbWorker();\n    const deleteResult = await Chat.deleteChat(payload.sessionId, worker, undefined, { deleteMessages: true, deleteSummaries: true, deleteKGNRels: true, deleteOrphanedEmbedding: true });\n    if (!deleteResult.success) throw new AppError('DB_OPERATION_FAILED', deleteResult.error || `Failed to delete session ${payload.sessionId}`);\n    if (currentChat && currentChat.id === payload.sessionId) currentChat = null;\n    await publishSessionUpdate(payload.sessionId, 'delete', { id: payload.sessionId });\n    return { success: true, data: true };\n  }, DbDeleteSessionResponse);\n}\n\nasync function handleDbRenameSessionRequest(event: any) {\n  return handleRequest(event, async (payload: any) => {\n    if (!payload?.sessionId || !payload.newName) throw new AppError('INVALID_INPUT', 'Session ID and new name are required');\n    const worker = getDbWorker();\n    let chat = (currentChat && currentChat.id === payload.sessionId) ? currentChat : await Chat.read(payload.sessionId, worker);\n    if (!chat) throw new AppError('NOT_FOUND', `Chat session ${payload.sessionId} not found.`);\n    await chat.update({ title: payload.newName });\n    if (currentChat && currentChat.id === payload.sessionId) currentChat = chat;\n    await publishSessionUpdate(chat.id, 'rename', chat);\n    return { success: true, data: chat };\n  }, DbRenameSessionResponse);\n}\n\nasync function handleDbAddLogRequest(event: any) {\n  return handleRequest(event, async (payload: any) => {\n    if (!payload?.logEntryData) throw new AppError('INVALID_INPUT', 'Missing logEntryData');\n    const worker = getDbWorker();\n    const logId = await LogEntry.create(payload.logEntryData, worker);\n    return { success: true, data: { logId } };\n  }, DbAddLogResponse);\n}\n\nasync function handleDbGetLogsRequest(event: any) {\n  return handleRequest(event, async (payload: any) => {\n    if (!payload?.filters) throw new AppError('INVALID_INPUT', 'Missing filters');\n    const worker = getDbWorker();\n    const logs = await LogEntry.getAll(worker, payload.filters);\n    return {success: true, data: logs};\n  }, DbGetLogsResponse);\n}\n\nasync function handleDbGetUniqueLogValuesRequest(event: any) {\n  return handleRequest(event, async (payload: any) => {\n    if (!payload?.fieldName) throw new AppError('INVALID_INPUT', 'Missing fieldName');\n    const worker = getDbWorker();\n    const logs = await LogEntry.getAll(worker);\n    const uniqueValues = Array.from(new Set(logs.map((l: any) => l[payload.fieldName]).filter(Boolean)));\n    return { success: true, data: uniqueValues };\n  }, DbGetUniqueLogValuesResponse);\n}\n\nasync function handleDbClearLogsRequest(event: any) {\n  return handleRequest(event, async () => {\n    const worker = getDbWorker();\n    const logs = await LogEntry.getAll(worker);\n    const sessionsToKeep = new Set([currentExtensionSessionId, previousExtensionSessionId].filter(Boolean));\n    let deletedCount = 0;\n    const deletePromises = logs\n        .filter(log => !sessionsToKeep.has(log.extensionSessionId))\n        .map(log => log.delete().then(() => deletedCount++).catch(e => console.warn(`Failed to delete log ${log.id}`, e)));\n    await Promise.all(deletePromises);\n    return { success: true, data: { deletedCount } };\n  }, DbClearLogsResponse);\n}\n\nasync function handleDbGetCurrentAndLastLogSessionIdsRequest(event: any) {\n  return new DbGetCurrentAndLastLogSessionIdsResponse(event.requestId, true, {\n    currentLogSessionId: currentExtensionSessionId,\n    previousLogSessionId: previousExtensionSessionId\n  });\n}\n\nasync function handleDbResetDatabaseRequest(event: any) {\n  return handleRequest(event, async () => {\n    console.log(\"[DB] Attempting database reset via DBActions.RESET worker command.\");\n    const worker = getDbWorker(); // Get the current worker (throws if not available)\n    await new Promise((resolve, reject) => {\n      const reqId = crypto.randomUUID();\n      dbWorkerCallbacks[reqId] = { resolve, reject };\n      worker.postMessage({ action: DBActions.RESET, payload: null, requestId: reqId });\n    });\n    currentChat = null;\n    console.log(\"[DB] Database reset complete. Re-initializing DB state.\");\n    isDbReadyFlag = false; \n    lastDbInitStatus = null; \n    dbInitPromise = null; // Clear any pending init\n    await autoEnsureDbInitialized(); // This will use the existing worker or create a new one if needed\n    return { success: true, data: true };\n  }, DbResetDatabaseResponse, 15000); \n}\n\n// --- Model Asset and Manifest Handlers ---\nasync function handleDbCreateChunkRequest(event: any) {\n  console.log('[DB] handleDbCreateChunkRequest', { fileName: event?.payload?.fileName, chunkIndex: event?.payload?.chunkIndex, totalChunks: event?.payload?.totalChunks });\n  return handleRequest(event, async (payload: any) => {\n    const worker = getDbWorker();\n    if (payload.type === 'manifest') {\n      // Only log summary for manifest record\n      console.log('[DB][DEBUG] Storing manifest record:', {\n        fileName: payload.fileName,\n        folder: payload.folder,\n        chunkGroupId: payload.chunkGroupId,\n        size: payload.size,\n        totalChunks: payload.totalChunks,\n        status: payload.status\n      });\n      return await ModelAsset.createManifest(payload, worker);\n    }\n    if (!payload.folder || !payload.fileName || !payload.data || typeof payload.chunkIndex !== 'number') {\n        throw new AppError('INVALID_INPUT', 'Missing required fields for model asset chunk (folder, fileName, data, chunkIndex).');\n    }\n    // Only log for first and last chunk\n    if (payload.chunkIndex === 0 || (typeof payload.totalChunks === 'number' && payload.chunkIndex === payload.totalChunks - 1)) {\n      console.log('[DB] Storing model asset chunk:', {\n        fileName: payload.fileName,\n        chunkIndex: payload.chunkIndex,\n        totalChunks: payload.totalChunks\n      });\n    }\n    const chunkId = await ModelAsset.createChunk(payload, worker);\n    // DEBUG: Log after storing chunk (summary only)\n    console.log('[DEBUG][DB] Stored chunk with id:', chunkId, {\n      fileName: payload.fileName,\n      chunkIndex: payload.chunkIndex,\n      totalChunks: payload.totalChunks\n    });\n    return { success: true, data: { chunkId } };\n  }, DbAddModelAssetResponse);\n}\n\nasync function handleDbCreateManifestRequest(event: any) {\n  console.log('[DB] handleDbCreateManifestRequest', { fileName: event?.payload?.fileName, folder: event?.payload?.folder });\n  return handleRequest(event, async (payload: any) => {\n    if (!payload.chunkGroupId || !payload.folder || !payload.fileName || !payload.size || typeof payload.totalChunks !== 'number') {\n        throw new AppError('INVALID_INPUT', 'Missing required fields for model asset manifest.');\n    }\n    const worker = getDbWorker();\n    const manifestId = await ModelAsset.createManifest(payload, worker);\n    return { success: true, data: { manifestId } };\n  }, DbAddManifestResponse);\n}\n\nasync function handleDbReadManifestByChunkGroupIdRequest(event: any) {\n  console.log('[DB] handleDbReadManifestByChunkGroupIdRequest', { fileName: event?.payload?.fileName, folder: event?.payload?.folder });\n  return handleRequest(event, async (payload: any) => {\n    if (!payload.folder || !payload.fileName) {\n        throw new AppError('INVALID_INPUT', 'Folder and fileName are required to get a manifest.');\n    }\n    const chunkGroupId = `${payload.folder}/${payload.fileName}`;\n    const manifest = await ModelAsset.readManifestByChunkGroupId(chunkGroupId, getDbWorker());\n    return { success: true, data: manifest }; // manifest can be null\n  }, DbGetManifestResponse, 5000, (res: any) => res.data);\n}\n\nasync function handleDbCountStoredChunksRequest(event: any) {\n  console.log('[DB] handleDbCountStoredChunksRequest', { fileName: event?.payload?.fileName, folder: event?.payload?.folder, expectedChunks: event?.payload?.expectedChunks });\n  return handleRequest(event, async (payload: any) => {\n    if (!payload.folder || !payload.fileName) {\n      throw new AppError('INVALID_INPUT', 'Folder and fileName are required for counting chunks.');\n    }\n    const chunkGroupId = `${payload.folder}/${payload.fileName}`;\n    let count = 0;\n    let verified = false;\n    let errorMsg;\n    try {\n      const manifest = await ModelAsset.readManifestByChunkGroupId(chunkGroupId, getDbWorker());\n      if (manifest && manifest.status === 'complete') {\n        count = manifest.totalChunks;\n        verified = (payload.expectedChunks ? count === payload.expectedChunks : true) &&\n                   (payload.expectedSize ? manifest.size === payload.expectedSize : true) &&\n                   (manifest.chunkSizeUsed ? manifest.chunkSizeUsed === APP_CHUNK_SIZE_CONFIG : true);\n        // DEBUG: Log manifest\n        console.log('[DEBUG][DB] Found manifest for chunkGroupId:', chunkGroupId, manifest);\n        return { success: true, data: { count, verified } };\n      }\n      // Fallback: If no complete manifest, count actual stored chunks.\n      console.log(`[DB] No complete manifest for ${chunkGroupId}, counting actual chunks.`);\n      const actualStoredCount = await ModelAsset.countStoredChunks(chunkGroupId, getDbWorker());\n      count = actualStoredCount;\n      verified = payload.expectedChunks ? count === payload.expectedChunks : false; \n      if (payload.expectedChunks && count !== payload.expectedChunks) {\n          console.warn(`[DB] Chunk count mismatch for ${chunkGroupId}: Expected ${payload.expectedChunks}, Found ${count} actual chunks.`);\n      }\n      // DEBUG: Log chunk count result\n      console.log('[DEBUG][DB] Chunk count for', chunkGroupId, ':', count);\n    } catch (e: unknown) {\n      const errObj = e as Error;\n      console.error(`[DB] Error counting/verifying chunks for ${chunkGroupId}:`, errObj);\n      errorMsg = errObj.message;\n    }\n    return { success: true, data: { count, verified, error: errorMsg } };\n  }, DbCountModelAssetChunksResponse);\n}\n\nasync function handleDbReadAllFileManifestsForRepoRequest(event: any) {\n  console.log('[DB] handleDbReadAllFileManifestsForRepoRequest', { modelId: event?.payload?.modelId, folder: event?.payload?.folder, returnObjects: event?.payload?.returnObjects });\n  return handleRequest(event, async (payload: any) => {\n    const folderToList = payload.modelId || payload.folder;\n    if (!folderToList) throw new AppError('INVALID_INPUT', 'modelId (or folder) is required.');\n    const manifests = await ModelAsset.readAllFileManifestsForRepo(folderToList, getDbWorker());\n    if (payload.returnObjects) {\n      return { success: true, data: manifests };\n    } else {\n      const fileNames = manifests.map((m: ModelAssetManifest) => m.fileName);\n      return { success: true, data: fileNames };\n    }\n  }, DbListModelFilesResponse);\n}\n\nasync function handleDbReadChunksByGroupIdRequest(event: any) {\n  console.log('[DB] handleDbReadChunksByGroupIdRequest', { chunkGroupId: event?.payload?.chunkGroupId, metadataOnly: event?.payload?.metadataOnly });\n  return handleRequest( event, async (payload: any) => {\n      if (!payload.chunkGroupId) throw new AppError('INVALID_INPUT', 'chunkGroupId is required.');\n      const metadataOnly = payload.metadataOnly === true;\n      const chunks = await ModelAsset.readChunksByGroupId(payload.chunkGroupId, metadataOnly, getDbWorker());\n      return { success: true, data: chunks };\n    }, DbGetModelAssetChunksResponse\n  );\n}\n\nasync function handleDbReadChunkRequest(event: any) {\n  console.log('[DB] handleDbReadChunkRequest', { fileName: event?.payload?.fileName, folder: event?.payload?.folder, chunkIndex: event?.payload?.chunkIndex });\n  return handleRequest(event, async (payload: any) => {\n    let chunkId;\n    if (payload.chunkId) {\n        chunkId = payload.chunkId;\n    } else if (payload.folder && payload.fileName && typeof payload.chunkIndex === 'number') {\n        chunkId = `${payload.folder}/${payload.fileName}:${payload.chunkIndex}`;\n    } else {\n        throw new AppError('INVALID_INPUT', 'Requires chunkId or (folder, fileName, chunkIndex).');\n    }\n    const chunk = await ModelAsset.readChunk(chunkId, getDbWorker());\n    if (!chunk) return { success: false, error: `Chunk ${chunkId} not found` }; \n    return { success: true, data: chunk };\n  }, DbGetModelAssetChunkResponse, 5000, (res: any) => res.data);\n}\n\nasync function handleDbReadUniqueChunkGroupIdsRequest(event: any) {\n  console.log('[DB] handleDbReadUniqueChunkGroupIdsRequest', { folder: event?.payload?.folder });\n  return handleRequest( event, async (payload: any) => {\n      if (!payload.folder) throw new AppError('INVALID_INPUT', 'Folder is required.');\n      const groupIds = await ModelAsset.readUniqueChunkGroupIds(payload.folder, getDbWorker());\n      return { success: true, data: groupIds };\n    }, DbLogAllChunkGroupIdsForModelResponse\n  );\n}\n\n// --- Model Asset and Manifest Handlers  ---\n\n// Repo-level\nasync function handleDbCreateAllFileManifestsForRepoRequest(event: any) {\n  console.log('[DB] handleDbCreateAllFileManifestsForRepoRequest', event?.payload);\n  return handleRequest(event, async (payload: any) => {\n    const ids = await ModelAsset.createAllFileManifestsForRepo(payload.manifests, getDbWorker());\n    return { success: true, data: ids };\n  }, DbCreateAllFileManifestsForRepoResponse);\n}\nasync function handleDbUpdateAllFileManifestsForRepoRequest(event: any) {\n  console.log('[DB] handleDbUpdateAllFileManifestsForRepoRequest', event?.payload);\n  return handleRequest(event, async (payload: any) => {\n    await ModelAsset.updateAllFileManifestsForRepo(payload.manifests, getDbWorker());\n    return { success: true };\n  }, DbUpdateAllFileManifestsForRepoResponse);\n}\nasync function handleDbDeleteAllFileManifestsForRepoRequest(event: any) {\n  console.log('[DB] handleDbDeleteAllFileManifestsForRepoRequest', event?.payload);\n  return handleRequest(event, async (payload: any) => {\n    await ModelAsset.deleteAllFileManifestsForRepo(payload.folder, getDbWorker());\n    return { success: true };\n  }, DbDeleteAllFileManifestsForRepoResponse);\n}\n\n// File-level (by chunkGroupId)\nasync function handleDbCreateManifestByChunkGroupIdRequest(event: any) {\n  console.log('[DB] handleDbCreateManifestByChunkGroupIdRequest', event?.payload);\n  return handleRequest(event, async (payload: any) => {\n    const id = await ModelAsset.createManifestByChunkGroupId(payload.manifest, getDbWorker());\n    return { success: true, data: id };\n  }, DbCreateManifestByChunkGroupIdResponse);\n}\nasync function handleDbUpdateManifestByChunkGroupIdRequest(event: any) {\n  console.log('[DB] handleDbUpdateManifestByChunkGroupIdRequest', event?.payload);\n  return handleRequest(event, async (payload: any) => {\n    await ModelAsset.updateManifestByChunkGroupId(payload.chunkGroupId, payload.updates, getDbWorker());\n    return { success: true };\n  }, DbUpdateManifestByChunkGroupIdResponse);\n}\nasync function handleDbDeleteManifestByChunkGroupIdRequest(event: any) {\n  console.log('[DB] handleDbDeleteManifestByChunkGroupIdRequest', event?.payload);\n  return handleRequest(event, async (payload: any) => {\n    await ModelAsset.deleteManifestByChunkGroupId(payload.chunkGroupId, getDbWorker());\n    return { success: true };\n  }, DbDeleteManifestByChunkGroupIdResponse);\n}\n\n// Record-level (by id)\nasync function handleDbReadManifestRequest(event: any) {\n  console.log('[DB] handleDbReadManifestRequest', event?.payload);\n  return handleRequest(event, async (payload: any) => {\n    const manifest = await ModelAsset.readManifest(payload.manifestId, getDbWorker());\n    return { success: true, data: manifest };\n  }, DbReadManifestResponse);\n}\nasync function handleDbUpdateManifestRequest(event: any) {\n  console.log('[DB] handleDbUpdateManifestRequest', event?.payload);\n  return handleRequest(event, async (payload: any) => {\n    await ModelAsset.updateManifest(payload.manifestId, payload.updates, getDbWorker());\n    // Fetch the updated manifest\n    const updatedManifest = await ModelAsset.readManifest(payload.manifestId, getDbWorker());\n    // Send notification to UI if manifest exists\n    if (updatedManifest) {\n      smartNotify(new DbManifestUpdatedNotification(updatedManifest));\n    }\n    return { success: true };\n  }, DbUpdateManifestResponse);\n}\nasync function handleDbDeleteManifestRequest(event: any) {\n  console.log('[DB] handleDbDeleteManifestRequest', event?.payload);\n  return handleRequest(event, async (payload: any) => {\n    await ModelAsset.deleteManifest(payload.manifestId, getDbWorker());\n    return { success: true };\n  }, DbDeleteManifestResponse);\n}\n\n// Chunk-level\nasync function handleDbUpdateChunkRequest(event: any) {\n  console.log('[DB] handleDbUpdateChunkRequest', event?.payload);\n  return handleRequest(event, async (payload: any) => {\n    await ModelAsset.updateChunk(payload.chunkId, payload.updates, getDbWorker());\n    return { success: true };\n  }, DbUpdateChunkResponse);\n}\nasync function handleDbDeleteChunkRequest(event: any) {\n  console.log('[DB] handleDbDeleteChunkRequest', event?.payload);\n  return handleRequest(event, async (payload: any) => {\n    await ModelAsset.deleteChunk(payload.chunkId, getDbWorker());\n    return { success: true };\n  }, DbDeleteChunkResponse);\n}\n\nasync function handleDbGetAllModelFileManifestsRequest(event: any) {\n  console.log('[DB] handleDbGetAllModelFileManifestsRequest');\n  return handleRequest(event, async () => {\n    const manifests = await ModelAsset.readAllFileManifestsForAllRepos(getDbWorker());\n    return { success: true, data: manifests };\n  }, DbGetAllModelFileManifestsResponse);\n}\n\n// --- DB Handler Map ---\nconst dbHandlerMap = {\n  [DbGetReadyStateRequest.type]: handleDbGetReadyStateRequest,\n  [DbCreateSessionRequest.type]: handleDbCreateSessionRequest,\n  [DbGetSessionRequest.type]: handleDbGetSessionRequest,\n  [DbAddMessageRequest.type]: handleDbAddMessageRequest,\n  [DbUpdateMessageRequest.type]: handleDbUpdateMessageRequest,\n  [DbDeleteMessageRequest.type]: handleDbDeleteMessageRequest,\n  [DbUpdateStatusRequest.type]: handleDbUpdateStatusRequest,\n  [DbToggleStarRequest.type]: handleDbToggleStarRequest,\n  [DbGetAllSessionsRequest.type]: handleDbGetAllSessionsRequest,\n  [DbGetStarredSessionsRequest.type]: handleDbGetStarredSessionsRequest,\n  [DbDeleteSessionRequest.type]: handleDbDeleteSessionRequest,\n  [DbRenameSessionRequest.type]: handleDbRenameSessionRequest,\n  [DbAddLogRequest.type]: handleDbAddLogRequest,\n  [DbGetLogsRequest.type]: handleDbGetLogsRequest,\n  [DbGetUniqueLogValuesRequest.type]: handleDbGetUniqueLogValuesRequest,\n  [DbClearLogsRequest.type]: handleDbClearLogsRequest,\n  [DbGetCurrentAndLastLogSessionIdsRequest.type]: handleDbGetCurrentAndLastLogSessionIdsRequest,\n  [DbResetDatabaseRequest.type]: handleDbResetDatabaseRequest,\n  \n  [DbAddModelAssetRequest.type]: handleDbCreateChunkRequest,\n  [DbAddManifestRequest.type]: handleDbCreateManifestRequest,\n  [DbGetManifestRequest.type]: handleDbReadManifestByChunkGroupIdRequest,\n  [DbCountModelAssetChunksRequest.type]: handleDbCountStoredChunksRequest,\n  [DbLogAllChunkGroupIdsForModelRequest.type]: handleDbReadUniqueChunkGroupIdsRequest,\n  [DbListModelFilesRequest.type]: handleDbReadAllFileManifestsForRepoRequest,\n  [DbGetModelAssetChunksRequest.type]: handleDbReadChunksByGroupIdRequest,\n  [DbGetModelAssetChunkRequest.type]: handleDbReadChunkRequest,\n  \n  [DbInitializeRequest.type]: handleDbEnsureInitialized,\n  [DbEnsureInitializedRequest.type]: handleDbEnsureInitialized,\n  [DbCreateAllFileManifestsForRepoRequest.type]: handleDbCreateAllFileManifestsForRepoRequest,\n  [DbUpdateAllFileManifestsForRepoRequest.type]: handleDbUpdateAllFileManifestsForRepoRequest,\n  [DbDeleteAllFileManifestsForRepoRequest.type]: handleDbDeleteAllFileManifestsForRepoRequest,\n  [DbCreateManifestByChunkGroupIdRequest.type]: handleDbCreateManifestByChunkGroupIdRequest,\n  [DbUpdateManifestByChunkGroupIdRequest.type]: handleDbUpdateManifestByChunkGroupIdRequest,\n  [DbDeleteManifestByChunkGroupIdRequest.type]: handleDbDeleteManifestByChunkGroupIdRequest,\n  [DbReadManifestRequest.type]: handleDbReadManifestRequest,\n  [DbUpdateManifestRequest.type]: handleDbUpdateManifestRequest,\n  [DbDeleteManifestRequest.type]: handleDbDeleteManifestRequest,\n  [DbUpdateChunkRequest.type]: handleDbUpdateChunkRequest,\n  [DbDeleteChunkRequest.type]: handleDbDeleteChunkRequest,\n  [DbGetAllModelFileManifestsRequest.type]: handleDbGetAllModelFileManifestsRequest\n};\n\n// --- Notification Publishing ---\nfunction smartNotify(notification: any) {\n \n  if (typeof window === 'undefined' || !window.document) {\n    try {\n        browser.runtime.sendMessage(notification).catch((e: any) => console.warn(`[DB] Error sending notification to runtime: ${e.message}`, notification.type));\n    } catch (e: unknown) {\n        const errObj = e as Error;\n        console.warn(`[DB] Failed to call browser.runtime.sendMessage (maybe not in extension context): ${errObj.message}`);\n    }\n  } else {\n    document.dispatchEvent(new CustomEvent(notification.type, { detail: notification }));\n    if (dbChannel) dbChannel.postMessage(notification); else console.warn(\"[DB] dbChannel not initialized for smartNotify.\");\n  }\n}\n\nasync function publishSessionUpdate(sessionId: string, updateType = 'update', sessionDataOverride: any = null) {\n  try {\n    let sessionData = sessionDataOverride;\n    if (!sessionData) {\n      if (!sessionId) {\n        if (updateType === 'delete') sessionData = { id: null }; else return;\n      } else {\n        const worker = getDbWorker();\n        const chat = await Chat.read(sessionId, worker);\n        if (chat) sessionData = chat;\n        else if (updateType === 'delete') sessionData = { id: sessionId };\n        else { console.warn(`[DB] publishSessionUpdate: Session ${sessionId} not found for ${updateType}.`); return; }\n      }\n    }\n    // Load all messages and their attachments for the session\n    if (sessionData && sessionData.message_ids && typeof sessionData.getMessage === 'function') {\n      const messages = [];\n      for (const msgId of sessionData.message_ids) {\n        const msg = await sessionData.getMessage(msgId);\n        if (msg) {\n          if (msg.attachment_ids && msg.attachment_ids.length > 0 && typeof msg.getAttachments === 'function') {\n            (msg as any).attachments = await msg.getAttachments();\n          }\n          messages.push(msg);\n        }\n      }\n      (sessionData as any).messages = messages;\n    }\n    const plainSession = (sessionData && typeof sessionData.toJSON === 'function') ? sessionData.toJSON() : JSON.parse(JSON.stringify(sessionData || {}));\n    smartNotify(new DbSessionUpdatedNotification(sessionId, plainSession, updateType));\n  } catch (e) { console.error('[DB] Failed to publish session update:', e, { sessionId, updateType }); }\n}\n\nasync function publishMessagesUpdate(sessionId: string, messages: any) {\n  try {\n    if (!Array.isArray(messages)) { console.error('[DB] publishMessagesUpdate: messages not an array:', messages); return; }\n    // Use toJSON and filter out any unserializable fields as a safety net\n    const plainMessages = messages.map(m => {\n      let json = (typeof m.toJSON === 'function' ? m.toJSON() : { ...m });\n      // Remove any unserializable fields just in case\n      delete json.dbWorker;\n      delete json.modelWorker;\n      return json;\n    });\n    smartNotify(new DbMessagesUpdatedNotification(sessionId, plainMessages));\n  } catch (e) { console.error('[DB] Failed to publish messages update:', e, { sessionId });}\n}\n\nasync function publishStatusUpdate(sessionId: string, status: string) {\n  try {\n    smartNotify(new DbStatusUpdatedNotification(sessionId, status));\n  } catch (e) { console.error('[DB] Failed to publish status update:', e, { sessionId });}\n}\n\n// --- Message Listener for External Requests ---\nbrowser.runtime.onMessage.addListener((message: any, sender: any, sendResponse: any) => {\n  if (!message || !message.type || !(dbHandlerMap as any)[message.type]) {\n    if (Object.values(DBEventNames).includes(message?.type)) {\n        // console.warn(`[DB] No handler mapped for DBEvent type: ${message.type}`);\n    }\n    return false;\n  }\n\n  console.log(`[DB] Received message for DB: ${message.type}, ReqID: ${message.requestId}`);\n  forwardDbRequest(message)\n    .then(responseObject => {\n        // console.log(`[DB] Sending response for ${message.type} (ReqID: ${message.requestId}):`, responseObject);\n        sendResponse(responseObject);\n    })\n    .catch(err => {\n      console.error(`[DB] Error processing request ${message.type} (ReqID: ${message.requestId}):`, err);\n      // Construct a generic error response if one isn't already formed by forwardDbRequest\n      const errorResponse: any = { \n          success: false, \n          error: err.message || 'Unknown error in DB request processing chain', \n          requestId: message.requestId,\n          type: `${message.type}_RESPONSE` // Attempt to form a conventional response type\n      };\n      if (err instanceof AppError) {\n          errorResponse.code = err.code;\n          errorResponse.details = err.details;\n      }\n      sendResponse(errorResponse);\n    });\n  return true;\n});\n\nexport async function forwardDbRequest(request: any) {\n  const handler = (dbHandlerMap as any)[request?.type];\n  if (!handler) { // Should have been caught by listener, but defensive check\n      console.error(`[DB] CRITICAL: No handler found in forwardDbRequest for type: ${request?.type}`);\n      const NoHandlerErrorResponse = (globalThis as any)[request.type.replace(\"Request\", \"Response\")];\n      if (NoHandlerErrorResponse && typeof NoHandlerErrorResponse === 'function') {\n          return new NoHandlerErrorResponse(request.requestId, false, null, new AppError('NO_HANDLER', `No handler for ${request.type}`));\n      }\n      return { success: false, error: `No handler for ${request.type}`, requestId: request.requestId, type: `${request.type}_ERROR_RESPONSE` };\n  }\n  \n  try {\n    return await handler(request);\n  } catch (err: any) {\n\n    console.error(`[DB] Synchronous or unhandled promise error in handler for ${request.type}:`, err);\n    const appError = (err instanceof AppError) ? err : new AppError('HANDLER_EXECUTION_ERROR', err.message || `Error executing handler for ${request.type}`, { originalError: err });\n    const ResponseClass = (globalThis as any)[request.type.replace(\"Request\", \"Response\")];\n    if (ResponseClass && typeof ResponseClass === 'function') {\n        return new ResponseClass(request.requestId, false, null, appError);\n    }\n    return { success: false, error: appError.message, details: appError.details, requestId: request.requestId, type: `${request.type}_ERROR_RESPONSE` };\n  }\n}\n\nexport { autoEnsureDbInitialized, lastDbInitStatus };\n\n\n\n\n\n\n\n\n\n","// Action constants for IndexedDB backend worker and related classes\r\n\r\nexport const DBActions = Object.freeze({\r\n    PUT: 'put',\r\n    GET: 'get',\r\n    GET_ALL: 'getAll',\r\n    QUERY: 'query',\r\n    DELETE: 'delete',\r\n    CLEAR: 'clear',\r\n    ADD_FILE_CHUNK: 'addFileChunk',\r\n    GET_FILE_CHUNK: 'getFileChunk',\r\n    ASSEMBLE_FILE: 'assembleFile',\r\n    INIT_CUSTOM_IDBS: 'initCustomIDBs',\r\n    RESET: 'reset',\r\n    EXPORT_DATABASE: 'exportDatabase',\r\n    IMPORT_DATABASE: 'importDatabase',\r\n    CLEANUP_OLD_DATA: 'cleanupOldData',\r\n    GET_CHANGES_SINCE: 'getChangesSince',\r\n    MARK_AS_DELETED: 'markAsDeleted',\r\n    APPLY_SYNCED_RECORD: 'applySyncedRecord',\r\n    SEARCH: 'search',\r\n    WORKER_READY: 'ready',\r\n    QUERY_MANIFESTS: 'queryManifests',\r\n    // Add more actions as needed\r\n} as const);\r\nexport interface DbInitOptions {\r\n    preFetchedRepoMetadata?: Array<{ repo: string, metadata: any }>;\r\n  }\r\nexport type DBActionsType = typeof DBActions; ","// dbEvents.js\n\nimport { ModelAssetManifest } from './idbModelAsset';\n\nexport const DBEventNames = Object.freeze({\n  DB_GET_SESSION_REQUEST: 'DbGetSessionRequest',\n  DB_GET_SESSION_RESPONSE: 'DbGetSessionResponse',\n  DB_ADD_MESSAGE_REQUEST: 'DbAddMessageRequest',\n  DB_ADD_MESSAGE_RESPONSE: 'DbAddMessageResponse',\n  DB_UPDATE_MESSAGE_REQUEST: 'DbUpdateMessageRequest',\n  DB_UPDATE_MESSAGE_RESPONSE: 'DbUpdateMessageResponse',\n  DB_UPDATE_STATUS_REQUEST: 'DbUpdateStatusRequest',\n  DB_UPDATE_STATUS_RESPONSE: 'DbUpdateStatusResponse',\n  DB_DELETE_MESSAGE_REQUEST: 'DbDeleteMessageRequest',\n  DB_DELETE_MESSAGE_RESPONSE: 'DbDeleteMessageResponse',\n  DB_TOGGLE_STAR_REQUEST: 'DbToggleStarRequest',\n  DB_TOGGLE_STAR_RESPONSE: 'DbToggleStarResponse',\n  DB_CREATE_SESSION_REQUEST: 'DbCreateSessionRequest',\n  DB_CREATE_SESSION_RESPONSE: 'DbCreateSessionResponse',\n  DB_DELETE_SESSION_REQUEST: 'DbDeleteSessionRequest',\n  DB_DELETE_SESSION_RESPONSE: 'DbDeleteSessionResponse',\n  DB_RENAME_SESSION_REQUEST: 'DbRenameSessionRequest',\n  DB_RENAME_SESSION_RESPONSE: 'DbRenameSessionResponse',\n  DB_GET_ALL_SESSIONS_REQUEST: 'DbGetAllSessionsRequest',\n  DB_GET_ALL_SESSIONS_RESPONSE: 'DbGetAllSessionsResponse',\n  DB_GET_STARRED_SESSIONS_REQUEST: 'DbGetStarredSessionsRequest',\n  DB_GET_STARRED_SESSIONS_RESPONSE: 'DbGetStarredSessionsResponse',\n  DB_MESSAGES_UPDATED_NOTIFICATION: 'DbMessagesUpdatedNotification',\n  DB_STATUS_UPDATED_NOTIFICATION: 'DbStatusUpdatedNotification',\n  DB_SESSION_UPDATED_NOTIFICATION: 'DbSessionUpdatedNotification',\n  DB_INITIALIZE_REQUEST: 'DbInitializeRequest',\n  DB_INITIALIZATION_COMPLETE_NOTIFICATION: 'DbInitializationCompleteNotification',\n  DB_GET_LOGS_REQUEST: 'DbGetLogsRequest',\n  DB_GET_LOGS_RESPONSE: 'DbGetLogsResponse',\n  DB_GET_UNIQUE_LOG_VALUES_REQUEST: 'DbGetUniqueLogValuesRequest',\n  DB_GET_UNIQUE_LOG_VALUES_RESPONSE: 'DbGetUniqueLogValuesResponse',\n  DB_CLEAR_LOGS_REQUEST: 'DbClearLogsRequest',\n  DB_CLEAR_LOGS_RESPONSE: 'DbClearLogsResponse',\n  DB_GET_CURRENT_AND_LAST_LOG_SESSION_IDS_REQUEST: 'DbGetCurrentAndLastLogSessionIdsRequest',\n  DB_GET_CURRENT_AND_LAST_LOG_SESSION_IDS_RESPONSE: 'DbGetCurrentAndLastLogSessionIdsResponse',\n  DB_ADD_LOG_REQUEST: 'DbAddLogRequest',\n  DB_ADD_LOG_RESPONSE: 'DbAddLogResponse', // Response for add log, if ever needed (currently fire-and-forget)\n  DB_GET_READY_STATE_REQUEST: 'DbGetReadyStateRequest',\n  DB_GET_READY_STATE_RESPONSE: 'DbGetReadyStateResponse',\n  DB_RESET_DATABASE_REQUEST: 'DbResetDatabaseRequest',\n  DB_RESET_DATABASE_RESPONSE: 'DbResetDatabaseResponse',\n\n  // Model Asset DB Operations\n  DB_ADD_MODEL_ASSET_REQUEST: 'DbAddModelAssetRequest',       // For adding chunks\n  DB_ADD_MODEL_ASSET_RESPONSE: 'DbAddModelAssetResponse',\n  DB_COUNT_MODEL_ASSET_CHUNKS_REQUEST: 'DbCountModelAssetChunksRequest',\n  DB_COUNT_MODEL_ASSET_CHUNKS_RESPONSE: 'DbCountModelAssetChunksResponse',\n  DB_LOG_ALL_CHUNK_GROUP_IDS_FOR_MODEL_REQUEST: 'DbLogAllChunkGroupIdsForModelRequest',\n  DB_LOG_ALL_CHUNK_GROUP_IDS_FOR_MODEL_RESPONSE: 'DbLogAllChunkGroupIdsForModelResponse',\n  DB_LIST_MODEL_FILES_REQUEST: 'DbListModelFilesRequest',     // Should ideally list manifests\n  DB_LIST_MODEL_FILES_RESPONSE: 'DbListModelFilesResponse',\n  DB_GET_MODEL_ASSET_CHUNKS_REQUEST: 'DbGetModelAssetChunksRequest', // Gets multiple chunk records (metadata or full)\n  DB_GET_MODEL_ASSET_CHUNKS_RESPONSE: 'DbGetModelAssetChunksResponse',\n  DB_GET_MODEL_ASSET_CHUNK_REQUEST: 'DbGetModelAssetChunkRequest', // Gets a single chunk record (with data)\n  DB_GET_MODEL_ASSET_CHUNK_RESPONSE: 'DbGetModelAssetChunkResponse',\n\n  // Model Asset Manifest Operations (NEW)\n  DB_ADD_MANIFEST_REQUEST: 'DbAddManifestRequest',\n  DB_ADD_MANIFEST_RESPONSE: 'DbAddManifestResponse',\n  DB_GET_MANIFEST_REQUEST: 'DbGetManifestRequest',\n  DB_GET_MANIFEST_RESPONSE: 'DbGetManifestResponse',\n\n  // General DB Worker and Initialization\n  DB_ENSURE_INITIALIZED_REQUEST: 'DbEnsureInitializedRequest',\n  DB_ENSURE_INITIALIZED_RESPONSE: 'DbEnsureInitializedResponse',\n  DB_INIT_WORKER_REQUEST: 'DbInitWorkerRequest', // This was unused in db.js handler map\n  DB_INIT_WORKER_RESPONSE: 'DbInitWorkerResponse',\n  DB_WORKER_ERROR: 'DbWorkerError', // Notification from worker for unhandled errors\n  DB_WORKER_RESET: 'DbWorkerReset', // Potential command or notification for worker reset\n\n  // New events\n  DB_CREATE_ALL_FILE_MANIFESTS_FOR_REPO_REQUEST: 'DbCreateAllFileManifestsForRepoRequest',\n  DB_CREATE_ALL_FILE_MANIFESTS_FOR_REPO_RESPONSE: 'DbCreateAllFileManifestsForRepoResponse',\n  DB_UPDATE_ALL_FILE_MANIFESTS_FOR_REPO_REQUEST: 'DbUpdateAllFileManifestsForRepoRequest',\n  DB_UPDATE_ALL_FILE_MANIFESTS_FOR_REPO_RESPONSE: 'DbUpdateAllFileManifestsForRepoResponse',\n  DB_DELETE_ALL_FILE_MANIFESTS_FOR_REPO_REQUEST: 'DbDeleteAllFileManifestsForRepoRequest',\n  DB_DELETE_ALL_FILE_MANIFESTS_FOR_REPO_RESPONSE: 'DbDeleteAllFileManifestsForRepoResponse',\n  DB_CREATE_MANIFEST_BY_CHUNK_GROUP_ID_REQUEST: 'DbCreateManifestByChunkGroupIdRequest',\n  DB_CREATE_MANIFEST_BY_CHUNK_GROUP_ID_RESPONSE: 'DbCreateManifestByChunkGroupIdResponse',\n  DB_UPDATE_MANIFEST_BY_CHUNK_GROUP_ID_REQUEST: 'DbUpdateManifestByChunkGroupIdRequest',\n  DB_UPDATE_MANIFEST_BY_CHUNK_GROUP_ID_RESPONSE: 'DbUpdateManifestByChunkGroupIdResponse',\n  DB_DELETE_MANIFEST_BY_CHUNK_GROUP_ID_REQUEST: 'DbDeleteManifestByChunkGroupIdRequest',\n  DB_DELETE_MANIFEST_BY_CHUNK_GROUP_ID_RESPONSE: 'DbDeleteManifestByChunkGroupIdResponse',\n  DB_READ_MANIFEST_REQUEST: 'DbReadManifestRequest',\n  DB_READ_MANIFEST_RESPONSE: 'DbReadManifestResponse',\n  DB_UPDATE_MANIFEST_REQUEST: 'DbUpdateManifestRequest',\n  DB_UPDATE_MANIFEST_RESPONSE: 'DbUpdateManifestResponse',\n  DB_DELETE_MANIFEST_REQUEST: 'DbDeleteManifestRequest',\n  DB_DELETE_MANIFEST_RESPONSE: 'DbDeleteManifestResponse',\n  DB_UPDATE_CHUNK_REQUEST: 'DbUpdateChunkRequest',\n  DB_UPDATE_CHUNK_RESPONSE: 'DbUpdateChunkResponse',\n  DB_DELETE_CHUNK_REQUEST: 'DbDeleteChunkRequest',\n  DB_DELETE_CHUNK_RESPONSE: 'DbDeleteChunkResponse',\n  DB_GET_ALL_MODEL_FILE_MANIFESTS_REQUEST: 'DbGetAllModelFileManifestsRequest',\n  DB_GET_ALL_MODEL_FILE_MANIFESTS_RESPONSE: 'DbGetAllModelFileManifestsResponse',\n  DB_MANIFEST_UPDATED_NOTIFICATION: 'DbManifestUpdatedNotification',\n});\n\nfunction generateUUID() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n}\n\nexport class DbEventBase {\n  requestId: string;\n  timestamp: number;\n  type?: string;\n  payload?: any;\n  constructor(requestId: string | null = null) {\n    this.requestId = requestId || generateUUID();\n    this.timestamp = Date.now();\n  }\n}\n\nexport class DbResponseBase extends DbEventBase {\n  success: boolean;\n  data: any;\n  error: string | null;\n  type?: string;\n  constructor(originalRequestId: string, success: boolean, data: any = null, error: any = null) {\n    super(originalRequestId);\n    this.success = success;\n    this.data = data;\n    this.error = error ? (typeof error === 'string' ? error : (error.message || String(error))) : null;\n  }\n}\n\nclass DbNotificationBase {\n  sessionId: string;\n  timestamp: number;\n  type?: string;\n  payload?: any;\n  constructor(sessionId: string) {\n    this.sessionId = sessionId;\n    this.timestamp = Date.now();\n  }\n}\n\n// --- Standard Session/Message/Log Events (Existing - no changes needed below unless specified) ---\n\nexport class DbGetSessionResponse extends DbResponseBase {\n  static type = DBEventNames.DB_GET_SESSION_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, sessionData: any, error: any = null) {\n    super(originalRequestId, success, sessionData, error);\n    this.type = DbGetSessionResponse.type;\n  }\n}\n\nexport class DbAddMessageResponse extends DbResponseBase {\n  static type = DBEventNames.DB_ADD_MESSAGE_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, newMessageId: any, error: any = null) {\n    super(originalRequestId, success, { newMessageId }, error);\n    this.type = DbAddMessageResponse.type;\n  }\n}\n\nexport class DbUpdateMessageResponse extends DbResponseBase {\n    static type = DBEventNames.DB_UPDATE_MESSAGE_RESPONSE;\n    constructor(originalRequestId: string, success: boolean, data: any = true, error: any = null) { // data defaults to true for simple success\n        super(originalRequestId, success, data, error);\n        this.type = DbUpdateMessageResponse.type;\n    }\n}\n\nexport class DbUpdateStatusResponse extends DbResponseBase {\n  static type = DBEventNames.DB_UPDATE_STATUS_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, data: any = true, error: any = null) {\n    super(originalRequestId, success, data, error);\n    this.type = DbUpdateStatusResponse.type;\n  }\n}\n\nexport class DbDeleteMessageResponse extends DbResponseBase {\n    static type = DBEventNames.DB_DELETE_MESSAGE_RESPONSE;\n    constructor(originalRequestId: string, success: boolean, data: any = true, error: any = null) {\n        super(originalRequestId, success, data, error);\n        this.type = DbDeleteMessageResponse.type;\n    }\n}\n\nexport class DbToggleStarResponse extends DbResponseBase {\n    static type = DBEventNames.DB_TOGGLE_STAR_RESPONSE;\n    constructor(originalRequestId: string, success: boolean, updatedSessionData: any, error: any = null) {\n        super(originalRequestId, success, updatedSessionData, error);\n        this.type = DbToggleStarResponse.type;\n    }\n}\n\nexport class DbCreateSessionResponse extends DbResponseBase {\n    static type = DBEventNames.DB_CREATE_SESSION_RESPONSE;\n    constructor(originalRequestId: string, success: boolean, newSessionId: any, error: any = null) {\n        super(originalRequestId, success, { newSessionId }, error);\n        this.type = DbCreateSessionResponse.type;\n    }\n    get newSessionId() { return this.data?.newSessionId; }\n}\n\nexport class DbDeleteSessionResponse extends DbResponseBase {\n    static type = DBEventNames.DB_DELETE_SESSION_RESPONSE;\n    constructor(originalRequestId: string, success: boolean, data: any = true, error: any = null) {\n        super(originalRequestId, success, data, error);\n        this.type = DbDeleteSessionResponse.type;\n    }\n}\n\nexport class DbRenameSessionResponse extends DbResponseBase {\n    static type = DBEventNames.DB_RENAME_SESSION_RESPONSE;\n    constructor(originalRequestId: string, success: boolean, updatedSessionData: any, error: any = null) {\n        super(originalRequestId, success, updatedSessionData, error);\n        this.type = DbRenameSessionResponse.type;\n    }\n}\n\nexport class DbGetAllSessionsResponse extends DbResponseBase {\n    static type = DBEventNames.DB_GET_ALL_SESSIONS_RESPONSE;\n    constructor(requestId: string, success: boolean, sessions: any = null, error: any = null) {\n        super(requestId, success, sessions, error); // sessions are directly in 'data'\n        this.type = DbGetAllSessionsResponse.type;\n    }\n}\n\nexport class DbGetStarredSessionsResponse extends DbResponseBase {\n    static type = DBEventNames.DB_GET_STARRED_SESSIONS_RESPONSE;\n    constructor(requestId: string, success: boolean, starredSessions: any = null, error: any = null) {\n        super(requestId, success, starredSessions, error); // starredSessions are directly in 'data'\n        this.type = DbGetStarredSessionsResponse.type;\n    }\n}\n\nexport class DbGetReadyStateResponse extends DbResponseBase {\n    static type = DBEventNames.DB_GET_READY_STATE_RESPONSE;\n    constructor(originalRequestId: string, success: boolean, readyState: any, error: any = null) { // readyState = { ready: boolean }\n        super(originalRequestId, success, readyState, error);\n        this.type = DbGetReadyStateResponse.type;\n    }\n}\n\nexport class DbGetSessionRequest extends DbEventBase {\n  static type = DBEventNames.DB_GET_SESSION_REQUEST;\n  constructor(sessionId: string) {\n    super();\n    this.type = DbGetSessionRequest.type;\n    this.payload = { sessionId };\n  }\n}\n\nexport class DbAddMessageRequest extends DbEventBase {\n  static type = DBEventNames.DB_ADD_MESSAGE_REQUEST;\n  constructor(sessionId: string, messageObject: any) {\n    super();\n    this.type = DbAddMessageRequest.type;\n    this.payload = { sessionId, messageObject };\n  }\n}\n\nexport class DbUpdateMessageRequest extends DbEventBase {\n    static type = DBEventNames.DB_UPDATE_MESSAGE_REQUEST;\n    constructor(sessionId: string, messageId: string, updates: any) {\n        super();\n        this.type = DbUpdateMessageRequest.type;\n        this.payload = { sessionId, messageId, updates };\n    }\n}\n\nexport class DbUpdateStatusRequest extends DbEventBase {\n  static type = DBEventNames.DB_UPDATE_STATUS_REQUEST;\n  constructor(sessionId: string, status: any) {\n    super();\n    this.type = DbUpdateStatusRequest.type;\n    this.payload = { sessionId, status };\n  }\n}\n\nexport class DbDeleteMessageRequest extends DbEventBase {\n    static type = DBEventNames.DB_DELETE_MESSAGE_REQUEST;\n    constructor(sessionId: string, messageId: string) {\n        super();\n        this.type = DbDeleteMessageRequest.type;\n        this.payload = { sessionId, messageId };\n    }\n}\n\nexport class DbToggleStarRequest extends DbEventBase {\n    static type = DBEventNames.DB_TOGGLE_STAR_REQUEST;\n    constructor(sessionId: string) {\n        super();\n        this.type = DbToggleStarRequest.type;\n        this.payload = { sessionId };\n    }\n}\n\nexport class DbCreateSessionRequest extends DbEventBase {\n    static type = DBEventNames.DB_CREATE_SESSION_REQUEST;\n    constructor(initialMessage: any) {\n        super();\n        this.type = DbCreateSessionRequest.type;\n        this.payload = { initialMessage };\n    }\n}\n\nexport class DbInitializeRequest extends DbEventBase {\n    static type = DBEventNames.DB_INITIALIZE_REQUEST;\n    constructor() {\n        super();\n        this.type = DbInitializeRequest.type;\n        this.payload = {};\n    }\n}\n\nexport class DbDeleteSessionRequest extends DbEventBase {\n    static type = DBEventNames.DB_DELETE_SESSION_REQUEST;\n    constructor(sessionId: string) {\n        super();\n        this.type = DbDeleteSessionRequest.type;\n        this.payload = { sessionId };\n    }\n}\n\nexport class DbRenameSessionRequest extends DbEventBase {\n    static type = DBEventNames.DB_RENAME_SESSION_REQUEST;\n    constructor(sessionId: string, newName: string) {\n        super();\n        this.type = DbRenameSessionRequest.type;\n        this.payload = { sessionId, newName };\n    }\n}\n\nexport class DbGetAllSessionsRequest extends DbEventBase {\n    static type = DBEventNames.DB_GET_ALL_SESSIONS_REQUEST;\n    constructor() {\n        super();\n        this.type = DbGetAllSessionsRequest.type;\n    }\n}\n\nexport class DbGetStarredSessionsRequest extends DbEventBase {\n    static type = DBEventNames.DB_GET_STARRED_SESSIONS_REQUEST;\n    constructor() {\n        super();\n        this.type = DbGetStarredSessionsRequest.type;\n    }\n}\n\nexport class DbGetReadyStateRequest extends DbEventBase {\n    static type = DBEventNames.DB_GET_READY_STATE_REQUEST;\n    constructor() {\n        super();\n        this.type = DbGetReadyStateRequest.type;\n    }\n}\n\nexport class DbMessagesUpdatedNotification extends DbNotificationBase {\n    static type = DBEventNames.DB_MESSAGES_UPDATED_NOTIFICATION;\n    constructor(sessionId: string, messages: any) {\n        super(sessionId);\n        this.type = DbMessagesUpdatedNotification.type;\n        this.payload = { messages };\n    }\n}\n\nexport class DbStatusUpdatedNotification extends DbNotificationBase {\n    static type = DBEventNames.DB_STATUS_UPDATED_NOTIFICATION;\n    constructor(sessionId: string, status: any) {\n        super(sessionId);\n        this.type = DbStatusUpdatedNotification.type;\n        this.payload = { status };\n    }\n}\n\nexport class DbSessionUpdatedNotification extends DbNotificationBase {\n    static type = DBEventNames.DB_SESSION_UPDATED_NOTIFICATION;\n    constructor(sessionId: string, updatedSessionData: any, updateType: string = 'update') { // Added updateType\n        super(sessionId);\n        this.type = DbSessionUpdatedNotification.type;\n        this.payload = { session: updatedSessionData, updateType };\n    }\n}\n\nexport class DbInitializationCompleteNotification {\n    static type = DBEventNames.DB_INITIALIZATION_COMPLETE_NOTIFICATION;\n    type: string;\n    timestamp: number;\n    payload: any;\n    constructor({ success, error = null, dbStatus = null, sessionIds = null }: { success: boolean, error?: any, dbStatus?: any, sessionIds?: any }) { // Added dbStatus and sessionIds\n        this.type = DbInitializationCompleteNotification.type;\n        this.timestamp = Date.now();\n        this.payload = { success, error: error ? (typeof error === 'string' ? error : (error.message || String(error))) : null, dbStatus, sessionIds };\n    }\n}\n\nexport class DbGetLogsResponse extends DbResponseBase {\n  static type = DBEventNames.DB_GET_LOGS_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, logs: any, error: any = null) {\n    super(originalRequestId, success, logs, error);\n    this.type = DbGetLogsResponse.type;\n  }\n}\n\nexport class DbGetUniqueLogValuesResponse extends DbResponseBase {\n  static type = DBEventNames.DB_GET_UNIQUE_LOG_VALUES_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, values: any, error: any = null) {\n    super(originalRequestId, success, values, error);\n    this.type = DbGetUniqueLogValuesResponse.type;\n  }\n}\n\nexport class DbClearLogsResponse extends DbResponseBase {\n  static type = DBEventNames.DB_CLEAR_LOGS_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, data: any = { deletedCount: 0 }, error: any = null) { // Added deletedCount\n    super(originalRequestId, success, data, error);\n    this.type = DbClearLogsResponse.type;\n  }\n}\n\nexport class DbGetCurrentAndLastLogSessionIdsResponse extends DbResponseBase {\n    static type = DBEventNames.DB_GET_CURRENT_AND_LAST_LOG_SESSION_IDS_RESPONSE;\n    constructor(originalRequestId: string, success: boolean, ids: any, error: any = null) {\n      super(originalRequestId, success, ids, error);\n      this.type = DbGetCurrentAndLastLogSessionIdsResponse.type;\n    }\n  }\n\nexport class DbAddLogRequest extends DbEventBase {\n  static type = DBEventNames.DB_ADD_LOG_REQUEST;\n  constructor(logEntryData: any) {\n    super();\n    this.type = DbAddLogRequest.type;\n    this.payload = { logEntryData };\n  }\n}\n// DbAddLogResponse is not strictly necessary if it's fire and forget,\n// but can be added for consistency if db.js handler for it sends one.\nexport class DbAddLogResponse extends DbResponseBase {\n  static type = DBEventNames.DB_ADD_LOG_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, data: any = true, error: any = null) {\n    super(originalRequestId, success, data, error);\n    this.type = DbAddLogResponse.type;\n  }\n}\n\n\nexport class DbGetLogsRequest extends DbEventBase {\n  static type = DBEventNames.DB_GET_LOGS_REQUEST;\n  constructor(filters: any) {\n    super();\n    this.type = DbGetLogsRequest.type;\n    this.payload = { filters };\n  }\n}\n\nexport class DbGetUniqueLogValuesRequest extends DbEventBase {\n  static type = DBEventNames.DB_GET_UNIQUE_LOG_VALUES_REQUEST;\n  constructor(fieldName: string) {\n    super();\n    this.type = DbGetUniqueLogValuesRequest.type;\n    this.payload = { fieldName };\n  }\n}\n\nexport class DbClearLogsRequest extends DbEventBase {\n    static type = DBEventNames.DB_CLEAR_LOGS_REQUEST;\n    constructor(filter: string = 'all') {\n        super();\n        this.type = DbClearLogsRequest.type;\n        this.payload = { filter };\n    }\n}\n\nexport class DbGetCurrentAndLastLogSessionIdsRequest extends DbEventBase {\n    static type = DBEventNames.DB_GET_CURRENT_AND_LAST_LOG_SESSION_IDS_REQUEST;\n    constructor() {\n        super();\n        this.type = DbGetCurrentAndLastLogSessionIdsRequest.type;\n    }\n}\n\nexport class DbResetDatabaseRequest extends DbEventBase {\n  static type = DBEventNames.DB_RESET_DATABASE_REQUEST;\n  constructor() {\n    super();\n    this.type = DbResetDatabaseRequest.type;\n  }\n}\n\nexport class DbResetDatabaseResponse extends DbResponseBase {\n  static type = DBEventNames.DB_RESET_DATABASE_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, data: any = true, error: any = null) {\n    super(originalRequestId, success, data, error);\n    this.type = DbResetDatabaseResponse.type;\n  }\n}\n\n// --- Model Asset DB Operations ---\n\n/**\n * @typedef {Object} ModelAssetChunkPayloadForRequest\n * @property {string} folder - The modelId or folder name.\n * @property {string} fileName - The name of the asset file.\n * @property {string} fileType - The type/extension of the file.\n * @property {ArrayBuffer} data - The binary data of the chunk.\n * @property {number} chunkIndex - The 0-based index of this chunk.\n * @property {number} totalChunks - The total number of chunks for this file.\n * @property {string} chunkGroupId - Identifier for the group of chunks (e.g., modelId/fileName).\n * // @property {number} [totalFileSize] - Optional: Total size of the parent file (contextual).\n */\nexport class DbAddModelAssetRequest extends DbEventBase {\n  static type = DBEventNames.DB_ADD_MODEL_ASSET_REQUEST;\n  /**\n   * @param {ModelAssetChunkPayloadForRequest} payload\n   */\n  constructor(payload: any) {\n    super();\n    this.type = DbAddModelAssetRequest.type;\n    this.payload = payload;\n  }\n}\n\nexport class DbAddModelAssetResponse extends DbResponseBase {\n  static type = DBEventNames.DB_ADD_MODEL_ASSET_RESPONSE;\n  /**\n   * @param {string} originalRequestId\n   * @param {boolean} success\n   * @param {{ chunkId: string } | null} data - On success, object containing the ID of the stored chunk.\n   * @param {string | null} error\n   */\n  constructor(originalRequestId: string, success: boolean, data: any, error: any = null) { // data = { chunkId: '...' }\n    super(originalRequestId, success, data, error);\n    this.type = DbAddModelAssetResponse.type;\n  }\n}\n\nexport class DbCountModelAssetChunksRequest extends DbEventBase {\n  static type = DBEventNames.DB_COUNT_MODEL_ASSET_CHUNKS_REQUEST;\n  /**\n   * @param {{folder: string, fileName: string, expectedSize?: number, expectedChunks?: number}} payload\n   */\n  constructor(payload: any) {\n    super();\n    this.type = DbCountModelAssetChunksRequest.type;\n    this.payload = payload;\n  }\n}\n\nexport class DbCountModelAssetChunksResponse extends DbResponseBase {\n  static type = DBEventNames.DB_COUNT_MODEL_ASSET_CHUNKS_RESPONSE;\n  /**\n   * @param {string} originalRequestId\n   * @param {boolean} success\n   * @param {{ count: number, verified: boolean, error?: string } | null} data - Result of count/verification.\n   * @param {string | null} error - Top-level error for the request.\n   */\n  constructor(originalRequestId: string, success: boolean, data: any, error: any = null) {\n    super(originalRequestId, success, data, error); // data = { count, verified, (optional error for count op itself) }\n    this.type = DbCountModelAssetChunksResponse.type;\n  }\n  get count() { return this.data?.count; }\n  get verified() { return this.data?.verified; }\n}\n\nexport class DbLogAllChunkGroupIdsForModelRequest extends DbEventBase {\n  static type = DBEventNames.DB_LOG_ALL_CHUNK_GROUP_IDS_FOR_MODEL_REQUEST;\n  constructor(payload: any) { // payload: { folder: string }\n    super();\n    this.type = DbLogAllChunkGroupIdsForModelRequest.type;\n    this.payload = payload;\n  }\n}\nexport class DbLogAllChunkGroupIdsForModelResponse extends DbResponseBase {\n  static type = DBEventNames.DB_LOG_ALL_CHUNK_GROUP_IDS_FOR_MODEL_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, groupIdsArray: string[], error: any = null) { // groupIdsArray is string[]\n    super(originalRequestId, success, groupIdsArray, error);\n    this.type = DbLogAllChunkGroupIdsForModelResponse.type;\n  }\n}\n\nexport class DbListModelFilesRequest extends DbEventBase {\n  static type = DBEventNames.DB_LIST_MODEL_FILES_REQUEST;\n  constructor(payload: any) { // payload: { modelId: string } or { folder: string }\n    super();\n    this.type = DbListModelFilesRequest.type;\n    this.payload = payload;\n  }\n}\nexport class DbListModelFilesResponse extends DbResponseBase {\n  static type = DBEventNames.DB_LIST_MODEL_FILES_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, fileNamesArray: string[], error: any = null) { // fileNamesArray is string[]\n    super(originalRequestId, success, fileNamesArray, error);\n    this.type = DbListModelFilesResponse.type;\n  }\n}\n\nexport class DbGetModelAssetChunksRequest extends DbEventBase {\n  static type = DBEventNames.DB_GET_MODEL_ASSET_CHUNKS_REQUEST;\n  constructor(payload: any) { // payload: { chunkGroupId: string, metadataOnly?: boolean }\n    super();\n    this.type = DbGetModelAssetChunksRequest.type;\n    this.payload = payload;\n  }\n}\nexport class DbGetModelAssetChunksResponse extends DbResponseBase {\n  static type = DBEventNames.DB_GET_MODEL_ASSET_CHUNKS_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, chunksArray: any, error: any = null) { // chunksArray is ModelAssetChunk[]\n    super(originalRequestId, success, chunksArray, error);\n    this.type = DbGetModelAssetChunksResponse.type;\n  }\n}\n\nexport class DbGetModelAssetChunkRequest extends DbEventBase {\n  static type = DBEventNames.DB_GET_MODEL_ASSET_CHUNK_REQUEST;\n  constructor(payload: any) { // payload: { folder: string, fileName: string, chunkIndex: number } or { chunkId: string }\n    super();\n    this.type = DbGetModelAssetChunkRequest.type;\n    this.payload = payload;\n  }\n}\nexport class DbGetModelAssetChunkResponse extends DbResponseBase {\n  static type = DBEventNames.DB_GET_MODEL_ASSET_CHUNK_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, chunkData: any, error: any = null) { // chunkData is ModelAssetChunk\n    super(originalRequestId, success, chunkData, error);\n    this.type = DbGetModelAssetChunkResponse.type;\n  }\n  get chunk() { return this.data; }\n}\n\n\n// --- Model Asset Manifest Operations (NEW - Definitions) ---\n\n/**\n * @typedef {import('./idbModelAsset').ModelAssetManifest} ModelAssetManifest\n */\n\n/**\n * @typedef {Object} ModelAssetManifestPayloadForRequest\n * @property {string} chunkGroupId - Identifier for the group of chunks (e.g., modelId/fileName).\n * @property {string} fileName - The original name of the model asset file.\n * @property {string} folder - The \"folder\" or modelId this asset belongs to.\n * @property {string} fileType - The type/extension of the file (e.g., 'onnx', 'json').\n * @property {number} totalFileSize - The total size of the complete file in bytes.\n * @property {number} totalChunks - The total number of chunks the file was split into.\n * @property {number} chunkSizeUsed - The CHUNK_SIZE (in bytes) that was used.\n * @property {'complete' | 'incomplete' | string} status - The status of this asset.\n * @property {number} downloadTimestamp - Timestamp of when the download/processing was completed.\n * @property {string} [id] - Optional: if pre-defining the manifest ID.\n * @property {string} [checksum] - Optional: checksum of the full file.\n * @property {string | number} [version] - Optional: version of the file.\n */\nexport class DbAddManifestRequest extends DbEventBase {\n  static type = DBEventNames.DB_ADD_MANIFEST_REQUEST;\n  payload: ModelAssetManifest;\n  /**\n   * @param {ModelAssetManifest} payload\n   */\n  constructor(payload: ModelAssetManifest) {\n    super();\n    this.type = DbAddManifestRequest.type;\n    this.payload = payload;\n  }\n}\n\nexport class DbAddManifestResponse extends DbResponseBase {\n  static type = DBEventNames.DB_ADD_MANIFEST_RESPONSE;\n  data: { manifestId: string } | null;\n  /**\n   * @param {string} originalRequestId\n   * @param {boolean} success\n   * @param {{ manifestId: string } | null} data - On success, object containing the ID of the stored/updated manifest.\n   * @param {string | null} error\n   */\n  constructor(originalRequestId: string, success: boolean, data: { manifestId: string } | null, error: any = null) {\n    super(originalRequestId, success, data, error);\n    this.type = DbAddManifestResponse.type;\n    this.data = data;\n  }\n  get manifestId() { return this.data?.manifestId; }\n}\n\n/**\n * @typedef {Object} GetManifestPayload\n * @property {string} folder - The folder (modelId) of the asset.\n * @property {string} fileName - The fileName of the asset.\n */\nexport class DbGetManifestRequest extends DbEventBase {\n  static type = DBEventNames.DB_GET_MANIFEST_REQUEST;\n  payload: { folder: string; fileName: string };\n  /**\n   * @param {{ folder: string, fileName: string }} payload\n   */\n  constructor(payload: { folder: string; fileName: string }) {\n    super();\n    this.type = DbGetManifestRequest.type;\n    this.payload = payload;\n  }\n}\n\nexport class DbGetManifestResponse extends DbResponseBase {\n  static type = DBEventNames.DB_GET_MANIFEST_RESPONSE;\n  data: ModelAssetManifest | null;\n  /**\n   * The manifest object (from idbModelAsset.ts ModelAssetManifest interface) is expected\n   * to be the direct value of the `data` property in this response.\n   * @param {string} originalRequestId\n   * @param {boolean} success\n   * @param {ModelAssetManifest | null} data - The manifest object or null.\n   * @param {string | null} error\n   */\n  constructor(originalRequestId: string, success: boolean, data: ModelAssetManifest | null, error: any = null) {\n    super(originalRequestId, success, data, error);\n    this.type = DbGetManifestResponse.type;\n    this.data = data;\n  }\n  /** @returns {ModelAssetManifest | null} */\n  get manifest() { return this.data; }\n}\n\n\n// --- General DB Worker and Initialization ---\nexport class DbEnsureInitializedRequest extends DbEventBase {\n  static type = DBEventNames.DB_ENSURE_INITIALIZED_REQUEST;\n  constructor() {\n    super();\n    this.type = DbEnsureInitializedRequest.type;\n  }\n}\n\nexport class DbEnsureInitializedResponse extends DbResponseBase {\n  static type = DBEventNames.DB_ENSURE_INITIALIZED_RESPONSE;\n  // data can be { success: boolean, dbStatus: object, sessionIds: object } or null on error\n  constructor(originalRequestId: string, success: boolean, data: any = null, error: any = null) {\n    super(originalRequestId, success, data, error);\n    this.type = DbEnsureInitializedResponse.type;\n  }\n}\n\n// DbInitWorkerRequest was previously noted as unused in db.js handler map.\n// If it becomes used, define its payload and response. For now, just the request.\nexport class DbInitWorkerRequest extends DbEventBase {\n  static type = DBEventNames.DB_INIT_WORKER_REQUEST;\n  constructor(payload: any = {}) { // e.g., payload could contain schema if needed by worker directly\n      super();\n      this.type = DbInitWorkerRequest.type;\n      this.payload = payload;\n  }\n}\n// DbInitWorkerResponse already exists in your DBEventNames, assuming a simple success/error response.\nexport class DbInitWorkerResponse extends DbResponseBase {\n    static type = DBEventNames.DB_INIT_WORKER_RESPONSE;\n    constructor(originalRequestId: string, success: boolean, data: any = null, error: any = null) {\n        super(originalRequestId, success, data, error);\n        this.type = DbInitWorkerResponse.type;\n    }\n}\n\n// --- Notification Publishing ---\n\nexport class DbWorkerCreatedNotification {\n  static type = 'DbWorkerCreatedNotification';\n  type: string;\n  timestamp: number;\n  payload: any;\n  constructor(payload: any) {\n    this.type = DbWorkerCreatedNotification.type;\n    this.timestamp = Date.now();\n    this.payload = payload;\n  }\n}\n\n// Add new event classes for ModelAsset CRUD/static symmetry\nexport class DbCreateAllFileManifestsForRepoRequest extends DbEventBase {\n  static type = DBEventNames.DB_CREATE_ALL_FILE_MANIFESTS_FOR_REPO_REQUEST;\n  payload: { manifests: ModelAssetManifest[] };\n  constructor(manifests: ModelAssetManifest[]) {\n    super();\n    this.type = DbCreateAllFileManifestsForRepoRequest.type;\n    this.payload = { manifests };\n  }\n}\nexport class DbCreateAllFileManifestsForRepoResponse extends DbResponseBase {\n  static type = DBEventNames.DB_CREATE_ALL_FILE_MANIFESTS_FOR_REPO_RESPONSE;\n  data: string[];\n  constructor(requestId: string, success: boolean, ids: string[], error: any = null) {\n    super(requestId, success, ids, error);\n    this.type = DbCreateAllFileManifestsForRepoResponse.type;\n    this.data = ids;\n  }\n}\nexport class DbUpdateAllFileManifestsForRepoRequest extends DbEventBase {\n  static type = DBEventNames.DB_UPDATE_ALL_FILE_MANIFESTS_FOR_REPO_REQUEST;\n  payload: { manifests: ModelAssetManifest[] };\n  constructor(manifests: ModelAssetManifest[]) {\n    super();\n    this.type = DbUpdateAllFileManifestsForRepoRequest.type;\n    this.payload = { manifests };\n  }\n}\nexport class DbUpdateAllFileManifestsForRepoResponse extends DbResponseBase {\n  static type = DBEventNames.DB_UPDATE_ALL_FILE_MANIFESTS_FOR_REPO_RESPONSE;\n  data: boolean;\n  constructor(requestId: string, success: boolean, data: boolean = true, error: any = null) {\n    super(requestId, success, data, error);\n    this.type = DbUpdateAllFileManifestsForRepoResponse.type;\n    this.data = data;\n  }\n}\nexport class DbDeleteAllFileManifestsForRepoRequest extends DbEventBase {\n  static type = DBEventNames.DB_DELETE_ALL_FILE_MANIFESTS_FOR_REPO_REQUEST;\n  constructor(folder: string) {\n    super();\n    this.type = DbDeleteAllFileManifestsForRepoRequest.type;\n    this.payload = { folder };\n  }\n}\nexport class DbDeleteAllFileManifestsForRepoResponse extends DbResponseBase {\n  static type = DBEventNames.DB_DELETE_ALL_FILE_MANIFESTS_FOR_REPO_RESPONSE;\n  constructor(requestId: string, success: boolean, data: any = true, error: any = null) {\n    super(requestId, success, data, error);\n    this.type = DbDeleteAllFileManifestsForRepoResponse.type;\n  }\n}\nexport class DbCreateManifestByChunkGroupIdRequest extends DbEventBase {\n  static type = DBEventNames.DB_CREATE_MANIFEST_BY_CHUNK_GROUP_ID_REQUEST;\n  payload: { manifest: ModelAssetManifest };\n  constructor(manifest: ModelAssetManifest) {\n    super();\n    this.type = DbCreateManifestByChunkGroupIdRequest.type;\n    this.payload = { manifest };\n  }\n}\nexport class DbCreateManifestByChunkGroupIdResponse extends DbResponseBase {\n  static type = DBEventNames.DB_CREATE_MANIFEST_BY_CHUNK_GROUP_ID_RESPONSE;\n  constructor(requestId: string, success: boolean, id: string, error: any = null) {\n    super(requestId, success, { id }, error);\n    this.type = DbCreateManifestByChunkGroupIdResponse.type;\n  }\n}\nexport class DbUpdateManifestByChunkGroupIdRequest extends DbEventBase {\n  static type = DBEventNames.DB_UPDATE_MANIFEST_BY_CHUNK_GROUP_ID_REQUEST;\n  constructor(chunkGroupId: string, updates: any) {\n    super();\n    this.type = DbUpdateManifestByChunkGroupIdRequest.type;\n    this.payload = { chunkGroupId, updates };\n  }\n}\nexport class DbUpdateManifestByChunkGroupIdResponse extends DbResponseBase {\n  static type = DBEventNames.DB_UPDATE_MANIFEST_BY_CHUNK_GROUP_ID_RESPONSE;\n  constructor(requestId: string, success: boolean, data: any = true, error: any = null) {\n    super(requestId, success, data, error);\n    this.type = DbUpdateManifestByChunkGroupIdResponse.type;\n  }\n}\nexport class DbDeleteManifestByChunkGroupIdRequest extends DbEventBase {\n  static type = DBEventNames.DB_DELETE_MANIFEST_BY_CHUNK_GROUP_ID_REQUEST;\n  constructor(chunkGroupId: string) {\n    super();\n    this.type = DbDeleteManifestByChunkGroupIdRequest.type;\n    this.payload = { chunkGroupId };\n  }\n}\nexport class DbDeleteManifestByChunkGroupIdResponse extends DbResponseBase {\n  static type = DBEventNames.DB_DELETE_MANIFEST_BY_CHUNK_GROUP_ID_RESPONSE;\n  constructor(requestId: string, success: boolean, data: any = true, error: any = null) {\n    super(requestId, success, data, error);\n    this.type = DbDeleteManifestByChunkGroupIdResponse.type;\n  }\n}\nexport class DbReadManifestRequest extends DbEventBase {\n  static type = DBEventNames.DB_READ_MANIFEST_REQUEST;\n  constructor(manifestId: string) {\n    super();\n    this.type = DbReadManifestRequest.type;\n    this.payload = { manifestId };\n  }\n}\nexport class DbReadManifestResponse extends DbResponseBase {\n  static type = DBEventNames.DB_READ_MANIFEST_RESPONSE;\n  data: ModelAssetManifest | null;\n  constructor(requestId: string, success: boolean, manifest: ModelAssetManifest | null, error: any = null) {\n    super(requestId, success, manifest, error);\n    this.type = DbReadManifestResponse.type;\n    this.data = manifest;\n  }\n}\nexport class DbUpdateManifestRequest extends DbEventBase {\n  static type = DBEventNames.DB_UPDATE_MANIFEST_REQUEST;\n  constructor(manifestId: string, updates: any) {\n    super();\n    this.type = DbUpdateManifestRequest.type;\n    this.payload = { manifestId, updates };\n  }\n}\nexport class DbUpdateManifestResponse extends DbResponseBase {\n  static type = DBEventNames.DB_UPDATE_MANIFEST_RESPONSE;\n  constructor(requestId: string, success: boolean, data: any = true, error: any = null) {\n    super(requestId, success, data, error);\n    this.type = DbUpdateManifestResponse.type;\n  }\n}\nexport class DbDeleteManifestRequest extends DbEventBase {\n  static type = DBEventNames.DB_DELETE_MANIFEST_REQUEST;\n  constructor(manifestId: string) {\n    super();\n    this.type = DbDeleteManifestRequest.type;\n    this.payload = { manifestId };\n  }\n}\nexport class DbDeleteManifestResponse extends DbResponseBase {\n  static type = DBEventNames.DB_DELETE_MANIFEST_RESPONSE;\n  constructor(requestId: string, success: boolean, data: any = true, error: any = null) {\n    super(requestId, success, data, error);\n    this.type = DbDeleteManifestResponse.type;\n  }\n}\nexport class DbUpdateChunkRequest extends DbEventBase {\n  static type = DBEventNames.DB_UPDATE_CHUNK_REQUEST;\n  constructor(chunkId: string, updates: any) {\n    super();\n    this.type = DbUpdateChunkRequest.type;\n    this.payload = { chunkId, updates };\n  }\n}\nexport class DbUpdateChunkResponse extends DbResponseBase {\n  static type = DBEventNames.DB_UPDATE_CHUNK_RESPONSE;\n  constructor(requestId: string, success: boolean, data: any = true, error: any = null) {\n    super(requestId, success, data, error);\n    this.type = DbUpdateChunkResponse.type;\n  }\n}\nexport class DbDeleteChunkRequest extends DbEventBase {\n  static type = DBEventNames.DB_DELETE_CHUNK_REQUEST;\n  constructor(chunkId: string) {\n    super();\n    this.type = DbDeleteChunkRequest.type;\n    this.payload = { chunkId };\n  }\n}\nexport class DbDeleteChunkResponse extends DbResponseBase {\n  static type = DBEventNames.DB_DELETE_CHUNK_RESPONSE;\n  constructor(requestId: string, success: boolean, data: any = true, error: any = null) {\n    super(requestId, success, data, error);\n    this.type = DbDeleteChunkResponse.type;\n  }\n}\n\nexport class DbGetAllModelFileManifestsRequest extends DbEventBase {\n  static type = DBEventNames.DB_GET_ALL_MODEL_FILE_MANIFESTS_REQUEST;\n  constructor() {\n    super();\n    this.type = DbGetAllModelFileManifestsRequest.type;\n  }\n}\n\nexport class DbGetAllModelFileManifestsResponse extends DbResponseBase {\n  static type = DBEventNames.DB_GET_ALL_MODEL_FILE_MANIFESTS_RESPONSE;\n  constructor(originalRequestId: string, success: boolean, manifests: any[], error: any = null) {\n    super(originalRequestId, success, manifests, error);\n    this.type = DbGetAllModelFileManifestsResponse.type;\n  }\n}\n\nexport class DbManifestUpdatedNotification extends DbNotificationBase {\n    static type = DBEventNames.DB_MANIFEST_UPDATED_NOTIFICATION;\n    constructor(manifest: ModelAssetManifest) {\n        super(manifest.folder);\n        this.type = DbManifestUpdatedNotification.type;\n        this.payload = { manifest };\n    }\n}","// idbAttachment.ts\n\nimport { BaseCRUD } from \"./idbBase\";\nimport { DBNames } from \"./idbSchema\";\nimport { DBActions } from \"./dbActions\";\n\nexport class Attachment extends BaseCRUD<Attachment> {\n  public message_id: string;\n  public file_name: string;\n  public mime_type: string;\n  public data: Blob;\n  public created_at: number;\n  public updated_at: number;\n\n  constructor(\n    message_id: string,\n    file_name: string,\n    mime_type: string,\n    data: Blob,\n    dbWorker: Worker,\n    options: { id?: string; created_at?: number; updated_at?: number; } = {}\n  ) {\n    super(options.id || crypto.randomUUID(), file_name, dbWorker);\n    this.message_id = message_id;\n    this.file_name = file_name;\n    this.mime_type = mime_type;\n    this.data = data;\n    const now = Date.now();\n    this.created_at = options.created_at || now;\n    this.updated_at = options.updated_at || now;\n  }\n\n  static async create(message_id: string, file_name: string, mime_type: string, data: Blob, dbWorker: Worker, options: { id?: string } = {}): Promise<string> {\n    const tempAtt = new Attachment(message_id, file_name, mime_type, data, dbWorker, options);\n    return tempAtt.saveToDB();\n  }\n\n  static async read(id: string, dbWorker: Worker): Promise<Attachment | undefined> {\n    const requestId = crypto.randomUUID();\n    return new Promise<Attachment | undefined>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && event.data.result) {\n            const attData = event.data.result;\n            resolve(new Attachment(attData.message_id, attData.file_name, attData.mime_type, attData.data as Blob, dbWorker, { id: attData.id, created_at: attData.created_at, updated_at: attData.updated_at }));\n          } else if (event.data.success && !event.data.result) {\n            resolve(undefined);\n          } else {\n            reject(new Error(event.data.error || `Failed to get attachment (id: ${id})`));\n          }\n        }\n      };\n      dbWorker.addEventListener('message', handleMessage);\n      dbWorker.postMessage({ action: DBActions.GET, payload: [DBNames.DB_USER_DATA, DBNames.DB_ATTACHMENTS, id], requestId });\n      setTimeout(() => {\n        dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for get attachment (id: ${id}) confirmation`));\n      }, 5000);\n    });\n  }\n\n  async update(updates: Partial<Omit<Attachment, 'dbWorker' | 'id' | 'created_at' | 'message_id'>>): Promise<void> {\n    const { id, dbWorker, created_at, message_id, ...allowedUpdates } = updates as any;\n    Object.assign(this, allowedUpdates);\n    await this.saveToDB();\n  }\n\n  async delete(): Promise<void> {\n    const requestId = crypto.randomUUID();\n    return new Promise<void>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success) {\n            resolve();\n          } else {\n            reject(new Error(event.data.error || `Failed to delete attachment (id: ${this.id})`));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({ action: DBActions.DELETE, payload: [DBNames.DB_USER_DATA, DBNames.DB_ATTACHMENTS, this.id], requestId });\n      setTimeout(() => {\n        this.dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for delete attachment (id: ${this.id}) confirmation`));\n      }, 5000);\n    });\n  }\n\n  async saveToDB(): Promise<string> {\n    const requestId = crypto.randomUUID();\n    const now = Date.now();\n    this.updated_at = now;\n    if (!this.created_at) {\n        this.created_at = now;\n    }\n    const { dbWorker, ...attachmentData } = this;\n    return new Promise((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && typeof event.data.result === 'string') {\n            resolve(event.data.result);\n          } else if (event.data.success) {\n            reject(new Error('Attachment saved, but worker did not return a valid ID.'));\n          } else {\n            reject(new Error(event.data.error || 'Failed to save attachment'));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({\n        action: DBActions.PUT,\n        payload: [DBNames.DB_USER_DATA, DBNames.DB_ATTACHMENTS, attachmentData],\n        requestId\n      });\n      setTimeout(() => {\n        this.dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for attachment (id: ${this.id}) save confirmation`));\n      }, 5000);\n    });\n  }\n\n  static async getAllByMessageId(message_id: string, dbWorker: Worker): Promise<Attachment[]> {\n    const requestId = crypto.randomUUID();\n    return new Promise<Attachment[]>((resolve, reject) => {\n        const handleMessage = (event: MessageEvent) => {\n            if (event.data && event.data.requestId === requestId) {\n                dbWorker.removeEventListener('message', handleMessage);\n                if (event.data.success && Array.isArray(event.data.result)) {\n                    const attachments = event.data.result.map((attData: any) => new Attachment(attData.message_id, attData.file_name, attData.mime_type, attData.data as Blob, dbWorker, {id: attData.id, created_at: attData.created_at, updated_at: attData.updated_at }));\n                    resolve(attachments);\n                } else if (event.data.success && !event.data.result) {\n                     resolve([]);\n                } else {\n                    reject(new Error(event.data.error || `Failed to get attachments for message_id: ${message_id}`));\n                }\n            }\n        };\n        dbWorker.addEventListener('message', handleMessage);\n        const queryObj = { from: DBNames.DB_ATTACHMENTS, where: { message_id: message_id }, orderBy: [{ field: 'message_id', direction: 'asc' }] };\n        dbWorker.postMessage({ action: DBActions.QUERY, payload: [DBNames.DB_USER_DATA, queryObj], requestId });\n        setTimeout(() => {\n            dbWorker.removeEventListener('message', handleMessage);\n            reject(new Error(`Timeout waiting for getAllByMessageId (message_id: ${message_id}) confirmation`));\n        }, 5000);\n    });\n  }\n}","// idbBase.ts\n\n// NOTE: All DB worker messages should use { action: ... } not { type: ... } for action property.\n\nexport abstract class BaseCRUD<T> {\n  public id: string;\n  public label: string;\n  protected dbWorker: Worker;\n\n  constructor(id: string, label: string, dbWorker: Worker) {\n    this.id = id;\n    this.label = label;\n    this.dbWorker = dbWorker;\n  }\n\n  static async create(..._args: any[]): Promise<string> {\n    throw new Error('Static create() not implemented');\n  }\n\n  static async read(_id: string, ..._args: any[]): Promise<any> {\n    throw new Error('Static read() not implemented');\n  }\n\n  // UPDATE (static, optional)\n  static async update(_id: string, _updates: Partial<any>, ..._args: any[]): Promise<void> {\n    throw new Error('Static update() not implemented');\n  }\n\n  // DELETE (static, optional)\n  static async delete(_id: string, ..._args: any[]): Promise<void> {\n    throw new Error('Static delete() not implemented');\n  }\n\n  // --- Instance CRUD ---\n\n  abstract update(updates: Partial<T>): Promise<void>;\n  abstract delete(): Promise<void>;\n  abstract saveToDB(): Promise<string>;\n}\n\n// Generic Manifest interface for any asset type\nexport interface Manifest {\n  id: string;\n  fileName: string;\n  fileType: string;\n  status: string;\n  addedAt?: number;\n}","// idbChat.ts\n\n// NOTE: All DB worker messages should use { action: ... } not { type: ... } for action property.\n\nimport { KnowledgeGraphNode } from \"./idbKnowledgeGraph\";\nimport { Message } from \"./idbMessage\";\nimport { Summary } from \"./idbSummary\";\nimport { DBNames, NodeType } from \"./idbSchema\";\nimport { DBActions } from \"./dbActions\";\nimport { Embedding } from \"./idbEmbedding\";\n\nexport class Chat extends KnowledgeGraphNode {\n  public user_id: string;\n  public tabId?: number;\n  public chat_timestamp: number;\n  public title: string;\n  public isStarred: boolean = false;\n  public status: string = 'idle';\n  public message_ids: string[] = [];\n  public summary_ids: string[] = [];\n  public chat_metadata_json?: string;\n  public topic?: string;\n  public domain?: string;\n\n  constructor(\n    id: string,\n    title: string,\n    dbWorker: Worker,\n    kgn_created_at: number,\n    kgn_updated_at: number,\n    options: {\n        user_id?: string;\n        tabId?: number;\n        chat_timestamp?: number;\n        isStarred?: boolean;\n        status?: string;\n        message_ids?: string[];\n        summary_ids?: string[];\n        chat_metadata?: Record<string, any>;\n        topic?: string;\n        domain?: string;\n        kgn_properties?: Record<string, any>;\n        kgn_embedding_id?: string;\n        modelWorker?: Worker;\n    } = {}\n  ) {\n    super(\n        id, NodeType.Chat, title, dbWorker, kgn_created_at, kgn_updated_at,\n        options.kgn_properties ? JSON.stringify(options.kgn_properties) : undefined,\n        options.kgn_embedding_id, options.modelWorker\n    );\n    this.title = title;\n    this.user_id = options.user_id || '';\n    this.tabId = options.tabId;\n    this.chat_timestamp = options.chat_timestamp || kgn_created_at;\n    this.isStarred = options.isStarred || false;\n    this.status = options.status || 'idle';\n    this.message_ids = options.message_ids || [];\n    this.summary_ids = options.summary_ids || [];\n    this.chat_metadata_json = options.chat_metadata ? JSON.stringify(options.chat_metadata) : undefined;\n    this.topic = options.topic;\n    this.domain = options.domain;\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      user_id: this.user_id,\n      tabId: this.tabId,\n      chat_timestamp: this.chat_timestamp,\n      title: this.title,\n      isStarred: this.isStarred,\n      status: this.status,\n      message_ids: this.message_ids,\n      summary_ids: this.summary_ids,\n      chat_metadata_json: this.chat_metadata_json,\n      topic: this.topic,\n      domain: this.domain,\n      kgn_type: this.type,\n      kgn_label: this.label,\n      kgn_properties_json: this.properties_json,\n      kgn_embedding_id: this.embedding_id,\n      kgn_created_at: this.created_at,\n      kgn_updated_at: this.updated_at\n      // dbWorker and modelWorker are intentionally omitted\n    };\n  }\n\n  get chat_metadata(): Record<string, any> | undefined {\n    try {\n        return this.chat_metadata_json ? JSON.parse(this.chat_metadata_json) : undefined;\n    } catch (e) {\n        console.error(`Failed to parse chat_metadata_json for chat ${this.id}:`, e);\n        return undefined;\n    }\n  }\n\n  set chat_metadata(data: Record<string, any> | undefined) {\n    this.chat_metadata_json = data ? JSON.stringify(data) : undefined;\n  }\n\n  static async createChat(\n    initialTitleOrPrompt: string,\n    dbWorker: Worker,\n    options: {\n        id?: string;\n        user_id?: string;\n        tabId?: number;\n        isStarred?: boolean;\n        status?: string;\n        topic?: string;\n        domain?: string;\n        kgn_properties?: Record<string, any>;\n        kgn_embeddingInput?: string;\n        kgn_embeddingModel?: string;\n        kgn_embeddingVector?: number[] | Float32Array | ArrayBuffer;\n        modelWorker?: Worker;\n        initialMessageSender?: string;\n    } = {}\n  ): Promise<Chat> {\n    const chatId = options.id || crypto.randomUUID();\n    const now = Date.now();\n    const title = initialTitleOrPrompt.length > 50 ? initialTitleOrPrompt.split(' ').slice(0, 7).join(' ') + '...' : initialTitleOrPrompt;\n    let kgn_embedding_id_to_set: string | undefined;\n\n    if (options.kgn_embeddingInput && options.kgn_embeddingModel) {\n        const existingEmbedding = await Embedding.getByInputAndModel(options.kgn_embeddingInput, options.kgn_embeddingModel, dbWorker);\n        if (existingEmbedding) {\n            kgn_embedding_id_to_set = existingEmbedding.id;\n             if (options.kgn_embeddingVector !== undefined) {\n                const vectorBuffer = Embedding.toArrayBuffer(options.kgn_embeddingVector);\n                if (!KnowledgeGraphNode.areArrayBuffersEqual(vectorBuffer, existingEmbedding.vector)) {\n                     await existingEmbedding.update({ vector: vectorBuffer });\n                }\n            }\n        } else {\n            let vectorToSave: ArrayBuffer;\n            if (options.kgn_embeddingVector !== undefined) {\n                vectorToSave = Embedding.toArrayBuffer(options.kgn_embeddingVector);\n            } else if (options.modelWorker) {\n                vectorToSave = await Embedding.generateVectorWithModelWorker(options.kgn_embeddingInput, options.kgn_embeddingModel, options.modelWorker);\n            } else {\n                throw new Error(\"Chat.createChat: Cannot create embedding - kgn_embeddingVector not provided and modelWorker is missing.\");\n            }\n            kgn_embedding_id_to_set = await Embedding.create(options.kgn_embeddingInput, vectorToSave, options.kgn_embeddingModel, dbWorker);\n        }\n    }\n\n    const chat = new Chat(\n      chatId, title, dbWorker, now, now,\n      {\n        user_id: options.user_id, tabId: options.tabId, chat_timestamp: now,\n        isStarred: options.isStarred, status: options.status, topic: options.topic, domain: options.domain,\n        kgn_properties: options.kgn_properties, kgn_embedding_id: kgn_embedding_id_to_set, modelWorker: options.modelWorker\n      }\n    );\n    await chat.saveToDB();\n    if (initialTitleOrPrompt.length > title.length || (initialTitleOrPrompt && options.initialMessageSender)) {\n        await chat.addMessage({\n            text: initialTitleOrPrompt,\n            sender: options.initialMessageSender || 'user'\n        });\n    }\n    const dbChat = await Chat.read(chatId, dbWorker, options.modelWorker);\n    if (!dbChat) throw new Error('Failed to retrieve chat from DB after creation');\n    return dbChat;\n  }\n\n  async saveToDB(): Promise<string> {\n    const now = Date.now();\n    this.updated_at = now;\n    if (!this.created_at) { this.created_at = this.chat_timestamp; }\n    this.label = this.title;\n    await super.saveToDB();\n\n    const requestId = crypto.randomUUID();\n    \n    const chatDataForStore = {\n        id: this.id, // Ensure id is part of the object\n        user_id: this.user_id,\n        tabId: this.tabId,\n        chat_timestamp: this.chat_timestamp,\n        title: this.title,\n        isStarred: this.isStarred,\n        status: this.status,\n        message_ids: this.message_ids,\n        summary_ids: this.summary_ids,\n        chat_metadata_json: this.chat_metadata_json,\n        topic: this.topic,\n        domain: this.domain,\n        kgn_type: this.type, kgn_label: this.label, kgn_properties_json: this.properties_json,\n        kgn_embedding_id: this.embedding_id, kgn_created_at: this.created_at, kgn_updated_at: this.updated_at,\n    };\n\n    return new Promise((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && typeof event.data.result === 'string') {\n            resolve(event.data.result);\n          } else if (event.data.success) {\n            reject(new Error('Chat saved, but DB_CHATS worker did not return a valid ID.'));\n          } else {\n            reject(new Error(event.data.error || 'Failed to save chat to DB_CHATS'));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({ action: DBActions.PUT, payload: [DBNames.DB_USER_DATA, DBNames.DB_CHATS, chatDataForStore], requestId });\n      setTimeout(() => { this.dbWorker.removeEventListener('message', handleMessage); reject(new Error(`Timeout for DB_CHATS save (id: ${this.id})`)); }, 5000);\n    });\n  }\n\n  static async read(id: string, dbWorker: Worker, modelWorker?: Worker): Promise<Chat | undefined> {\n    const requestId = crypto.randomUUID();\n    const chatData = await new Promise<any | undefined>((resolve, reject) => {\n        const handleMessage = (event: MessageEvent) => {\n            if (event.data && event.data.requestId === requestId) {\n                dbWorker.removeEventListener('message', handleMessage);\n                if (event.data.success) { resolve(event.data.result); }\n                else { reject(new Error(event.data.error || `Failed to get chat (id: ${id}) from DB_CHATS`)); }\n            }\n        };\n        dbWorker.addEventListener('message', handleMessage);\n        dbWorker.postMessage({ action: DBActions.GET, payload: [DBNames.DB_USER_DATA, DBNames.DB_CHATS, id], requestId });\n        setTimeout(() => { dbWorker.removeEventListener('message', handleMessage); reject(new Error(`Timeout getting chat ${id}`)); }, 5000);\n    });\n\n    if (chatData) {\n        return new Chat(\n            chatData.id, chatData.title, dbWorker, chatData.kgn_created_at, chatData.kgn_updated_at,\n            {\n                user_id: chatData.user_id, tabId: chatData.tabId, chat_timestamp: chatData.chat_timestamp,\n                isStarred: chatData.isStarred, status: chatData.status, message_ids: chatData.message_ids || [],\n                summary_ids: chatData.summary_ids || [],\n                chat_metadata: chatData.chat_metadata_json ? JSON.parse(chatData.chat_metadata_json) : undefined,\n                topic: chatData.topic, domain: chatData.domain,\n                kgn_properties: chatData.kgn_properties_json ? JSON.parse(chatData.kgn_properties_json) : undefined,\n                kgn_embedding_id: chatData.kgn_embedding_id, modelWorker: modelWorker\n            }\n        );\n    }\n    return undefined;\n  }\n\n  async update(updates: Partial<Omit<Chat, 'dbWorker' | 'modelWorker' | 'id' | 'created_at' | 'type' | 'label' | 'edgesOut' | 'edgesIn' | '_embedding' >>): Promise<void> {\n    const { ...allowedUpdates } = updates as any;\n    if (allowedUpdates.title !== undefined) { this.title = allowedUpdates.title; this.label = allowedUpdates.title; }\n    if (allowedUpdates.chat_metadata && typeof allowedUpdates.chat_metadata === 'object') {\n        this.chat_metadata = allowedUpdates.chat_metadata; delete allowedUpdates.chat_metadata;\n    } else if (allowedUpdates.chat_metadata_json !== undefined) { this.chat_metadata_json = allowedUpdates.chat_metadata_json; }\n     if (allowedUpdates.properties && typeof allowedUpdates.properties === 'object') {\n        this.properties = allowedUpdates.properties; delete allowedUpdates.properties;\n    } else if (allowedUpdates.properties_json !== undefined) { this.properties_json = allowedUpdates.properties_json; }\n\n    Object.assign(this, allowedUpdates);\n    await this.saveToDB();\n  }\n\n  async delete(options: { deleteMessages?: boolean, deleteSummaries?: boolean, deleteKGNRels?: boolean, deleteOrphanedEmbedding?: boolean } = {}): Promise<void> {\n    const { deleteMessages = true, deleteSummaries = true, deleteKGNRels = true, deleteOrphanedEmbedding = false } = options;\n    if (deleteMessages) {\n        for (const msgId of this.message_ids) {\n            const message = await Message.read(msgId, this.dbWorker, this.modelWorker);\n            if (message) {\n                await message.delete({ deleteAttachments: true, deleteKGNRels: true, deleteOrphanedEmbedding: true })\n                    .catch(e => console.warn(`Failed to delete message ${msgId} for chat ${this.id}: ${e.message}`));\n            }\n        }\n        this.message_ids = [];\n    }\n    if (deleteSummaries) {\n        for (const summaryId of this.summary_ids) {\n            const summary = await Summary.read(summaryId, this.dbWorker);\n            if (summary) {\n                await summary.delete().catch(e => console.warn(`Failed to delete summary ${summaryId} for chat ${this.id}: ${e.message}`));\n            }\n        }\n        this.summary_ids = [];\n    }\n\n    const requestId = crypto.randomUUID();\n    await new Promise<void>((resolve, reject) => {\n        const handleMessage = (event: MessageEvent) => {\n            if (event.data && event.data.requestId === requestId) {\n                this.dbWorker.removeEventListener('message', handleMessage);\n                if (event.data.success) { resolve(); }\n                else { reject(new Error(event.data.error || `Failed to delete chat (id: ${this.id}) from DB_CHATS`)); }\n            }\n        };\n        this.dbWorker.addEventListener('message', handleMessage);\n        this.dbWorker.postMessage({ action: DBActions.DELETE, payload: [DBNames.DB_USER_DATA, DBNames.DB_CHATS, this.id], requestId });\n        setTimeout(() => { this.dbWorker.removeEventListener('message', handleMessage); reject(new Error(`Timeout deleting chat ${this.id} from DB_CHATS`)); }, 5000);\n    });\n    await super.delete({ deleteOrphanedEmbedding, deleteEdges: deleteKGNRels });\n  }\n\n  async addMessage(\n    data: {\n        text?: string;\n        attachment?: { file_name: string; mime_type: string; data: Blob; }; // Single convenience attachment\n        sender: string;\n        message_type?: string;\n        metadata?: Record<string, any>;\n        attachmentsData?: { file_name: string; mime_type: string; data: Blob; }[]; // For multiple attachments\n        kgn_properties?: Record<string, any>;\n        kgn_embeddingInput?: string;\n        kgn_embeddingModel?: string;\n        kgn_embeddingVector?: number[] | Float32Array | ArrayBuffer;\n    }\n  ): Promise<string> {\n    const content = data.text || (data.attachment ? data.attachment.file_name : (data.attachmentsData && data.attachmentsData.length > 0 ? data.attachmentsData[0].file_name : 'Message with attachments'));\n    if (!data.text && !data.attachment && (!data.attachmentsData || data.attachmentsData.length === 0)) {\n        throw new Error(\"Cannot add an empty message without text or attachments.\");\n    }\n\n    const messageId = await Message.createMessage(\n      this.id, data.sender, content, this.dbWorker,\n      {\n        message_type: data.message_type, metadata: data.metadata,\n        kgn_properties: data.kgn_properties, kgn_embeddingInput: data.kgn_embeddingInput,\n        kgn_embeddingModel: data.kgn_embeddingModel, kgn_embeddingVector: data.kgn_embeddingVector,\n        modelWorker: this.modelWorker\n      }\n    );\n    if (!this.message_ids.includes(messageId)) {\n        this.message_ids.push(messageId);\n    }\n\n    const messageInstance = await Message.read(messageId, this.dbWorker, this.modelWorker);\n    if (!messageInstance) throw new Error(\"Failed to retrieve newly created message for attachment processing.\");\n\n    if (data.attachment) {\n        await messageInstance.addAttachment(data.attachment);\n    }\n    if (data.attachmentsData) {\n        for (const attData of data.attachmentsData) {\n            await messageInstance.addAttachment(attData);\n        }\n    }\n    await this.saveToDB(); // Save chat after message_ids and potential attachments are processed\n    return messageId;\n  }\n\n  async getMessage(messageId: string): Promise<Message | undefined> {\n    return Message.read(messageId, this.dbWorker, this.modelWorker);\n  }\n\n  async getMessages(): Promise<Message[]> {\n    const messages: Message[] = [];\n    for (const msgId of this.message_ids) {\n        const msg = await Message.read(msgId, this.dbWorker, this.modelWorker);\n        if (msg) messages.push(msg);\n    }\n    return messages;\n  }\n\n  async deleteMessage(messageId: string, deleteOptions: { deleteAttachments?: boolean, deleteKGNRels?: boolean, deleteOrphanedEmbedding?: boolean } = {}): Promise<boolean> {\n    const msg = await Message.read(messageId, this.dbWorker, this.modelWorker);\n    if (msg && msg.chat_id === this.id) {\n      await msg.delete(deleteOptions);\n      const initialLength = this.message_ids.length;\n      this.message_ids = this.message_ids.filter(id => id !== messageId);\n      if (this.message_ids.length < initialLength) {\n          await this.saveToDB();\n          return true;\n      }\n    }\n    return false;\n  }\n\n  async addSummary(\n    message_ids_for_summary: string[],\n    summary_text: string,\n    options?: {\n      id?: string;\n      parent_summary_id?: string | null;\n      metadata?: Record<string, any>;\n      start_message_id?: string | null;\n      end_message_id?: string | null;\n      start_timestamp?: number;\n      end_timestamp?: number;\n      token_count?: number;\n      embedding_id?: string;\n    }\n  ): Promise<string> {\n    const summaryId = await Summary.create(\n      this.id, // chat_id\n      summary_text,\n      this.dbWorker,\n      {\n        ...options,\n        message_ids: message_ids_for_summary,\n        start_message_id: options?.start_message_id || (message_ids_for_summary.length > 0 ? message_ids_for_summary[0] : null),\n        end_message_id: options?.end_message_id || (message_ids_for_summary.length > 0 ? message_ids_for_summary[message_ids_for_summary.length - 1] : null),\n      }\n    );\n    if (!this.summary_ids.includes(summaryId)) {\n      this.summary_ids.push(summaryId);\n      await this.saveToDB();\n    }\n    return summaryId;\n  }\n\n  async getSummary(summaryId: string): Promise<Summary | undefined> {\n    return Summary.read(summaryId, this.dbWorker);\n  }\n\n  async getSummaries(): Promise<Summary[]> {\n    const summaries: Summary[] = [];\n    for (const summaryId of this.summary_ids) {\n        const summary = await Summary.read(summaryId, this.dbWorker);\n        if (summary) summaries.push(summary);\n    }\n    return summaries;\n  }\n\n  async deleteSummary(summaryId: string): Promise<boolean> {\n    const summary = await Summary.read(summaryId, this.dbWorker);\n    if (summary && summary.chat_id === this.id) {\n        await summary.delete();\n        const initialLength = this.summary_ids.length;\n        this.summary_ids = this.summary_ids.filter(id => id !== summaryId);\n        if (this.summary_ids.length < initialLength) {\n            await this.saveToDB();\n            return true;\n        }\n    }\n    return false;\n  }\n\n  static async updateChat(\n    chatId: string,\n    updates: Partial<Omit<Chat, 'dbWorker' | 'modelWorker' | 'id' | 'created_at' | 'type' | 'label' | 'edgesOut' | 'edgesIn' | '_embedding' >>,\n    dbWorker: Worker,\n    modelWorker?: Worker\n  ): Promise<{ success: boolean; chat?: Chat; error?: string }> {\n    const chat = await Chat.read(chatId, dbWorker, modelWorker);\n    if (!chat) return { success: false, error: 'Chat not found' };\n    try {\n      await chat.update(updates);\n      const updatedChat = await Chat.read(chatId, dbWorker, modelWorker);\n      return { success: true, chat: updatedChat };\n    } catch (e: any) {\n      return { success: false, error: e.message || 'Update failed' };\n    }\n  }\n\n  static async deleteChat(\n    chatId: string,\n    dbWorker: Worker,\n    modelWorker?: Worker,\n    options: { deleteMessages?: boolean, deleteSummaries?: boolean, deleteKGNRels?: boolean, deleteOrphanedEmbedding?: boolean } = {}\n  ): Promise<{ success: boolean; error?: string }> {\n    const chat = await Chat.read(chatId, dbWorker, modelWorker);\n    if (!chat) return { success: false, error: 'Chat not found' };\n    try {\n      await chat.delete(options);\n      return { success: true };\n    } catch (e: any) {\n      return { success: false, error: e.message || 'Delete failed' };\n    }\n  }\n\n  static async addMessageToChat(\n    chatId: string,\n    data: {\n      text?: string;\n      attachment?: { file_name: string; mime_type: string; data: Blob; };\n      sender: string;\n      message_type?: string;\n      metadata?: Record<string, any>;\n      attachmentsData?: { file_name: string; mime_type: string; data: Blob; }[];\n      kgn_properties?: Record<string, any>;\n      kgn_embeddingInput?: string;\n      kgn_embeddingModel?: string;\n      kgn_embeddingVector?: number[] | Float32Array | ArrayBuffer;\n    },\n    dbWorker: Worker,\n    modelWorker?: Worker\n  ): Promise<{ success: boolean; messageId?: string; error?: string }> {\n    const chat = await Chat.read(chatId, dbWorker, modelWorker);\n    if (!chat) return { success: false, error: 'Chat not found' };\n    try {\n      const messageId = await chat.addMessage(data);\n      return { success: true, messageId };\n    } catch (e: any) {\n      return { success: false, error: e.message || 'Add message failed' };\n    }\n  }\n\n  static async getAllChats(dbWorker: Worker): Promise<Chat[]> {\n    const requestId = crypto.randomUUID();\n    const chatDatas = await new Promise<any[]>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success) { resolve(event.data.result); }\n          else { reject(new Error(event.data.error || 'Failed to get all chats from DB_CHATS')) }\n        }\n      };\n      dbWorker.addEventListener('message', handleMessage);\n      dbWorker.postMessage({ action: DBActions.GET_ALL, payload: [DBNames.DB_USER_DATA, DBNames.DB_CHATS], requestId });\n      setTimeout(() => { dbWorker.removeEventListener('message', handleMessage); reject(new Error('Timeout getting all chats')); }, 5000);\n    });\n    return (chatDatas || []).map(chatData => new Chat(\n      chatData.id, chatData.title, dbWorker, chatData.kgn_created_at, chatData.kgn_updated_at,\n      {\n        user_id: chatData.user_id, tabId: chatData.tabId, chat_timestamp: chatData.chat_timestamp,\n        isStarred: chatData.isStarred, status: chatData.status, message_ids: chatData.message_ids || [],\n        summary_ids: chatData.summary_ids || [],\n        chat_metadata: chatData.chat_metadata_json ? JSON.parse(chatData.chat_metadata_json) : undefined,\n        topic: chatData.topic, domain: chatData.domain,\n        kgn_properties: chatData.kgn_properties_json ? JSON.parse(chatData.kgn_properties_json) : undefined,\n        kgn_embedding_id: chatData.kgn_embedding_id\n      }\n    ));\n  }\n}","// idbEmbedding.ts\n\n// NOTE: All DB worker messages should use { action: ... } not { type: ... } for action property.\n\nimport { BaseCRUD } from \"./idbBase\";\nimport { DBNames } from \"./idbSchema\";\nimport { DBActions } from \"./dbActions\";\n\nexport class Embedding extends BaseCRUD<Embedding> {\n  public input: string;\n  public vector: ArrayBuffer;\n  public model: string;\n  public created_at: number;\n  public updated_at: number;\n\n  constructor(\n    id: string,\n    input: string,\n    vector: ArrayBuffer,\n    model: string,\n    created_at: number,\n    updated_at: number,\n    dbWorker: Worker,\n    label?: string // optional, defaults to input\n  ) {\n    super(id, label ?? input, dbWorker);\n    this.input = input;\n    this.vector = vector;\n    this.model = model;\n    this.created_at = created_at;\n    this.updated_at = updated_at;\n  }\n\n  static toArrayBuffer(arr: number[] | Float32Array | ArrayBuffer): ArrayBuffer {\n    if (arr instanceof ArrayBuffer) return arr;\n    if (arr instanceof Float32Array) return ArrayBuffer.prototype.slice.call(arr.buffer, arr.byteOffset, arr.byteOffset + arr.byteLength) as ArrayBuffer;\n    return new Float32Array(arr).buffer;\n  }\n\n  static fromArrayBuffer(buf: ArrayBuffer): Float32Array {\n    return new Float32Array(buf);\n  }\n\n  static async create(\n    input: string,\n    vectorData: number[] | Float32Array | ArrayBuffer,\n    model: string,\n    dbWorker: Worker,\n    options: { id?: string; label?: string } = {}\n  ): Promise<string> {\n    const id = options.id || crypto.randomUUID();\n    const now = Date.now();\n    const vector = Embedding.toArrayBuffer(vectorData);\n    const embeddingInstance = new Embedding(id, input, vector, model, now, now, dbWorker, options.label);\n    return embeddingInstance.saveToDB();\n  }\n\n  async saveToDB(): Promise<string> {\n    const requestId = crypto.randomUUID();\n    const now = Date.now();\n    this.updated_at = now;\n    if (!this.created_at) {\n      this.created_at = now;\n    }\n    const embeddingData: any = { ...this };\n    if ('dbWorker' in embeddingData) delete embeddingData.dbWorker;\n    return new Promise((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && typeof event.data.result === 'string') {\n            resolve(event.data.result);\n          } else if (event.data.success) {\n            reject(new Error('Embedding saved, but worker did not return a valid ID.'));\n          } else {\n            reject(new Error(event.data.error || 'Failed to save embedding'));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({ action: DBActions.PUT, payload: [DBNames.DB_USER_DATA, DBNames.DB_EMBEDDINGS, embeddingData], requestId });\n      setTimeout(() => {\n        this.dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for embedding (id: ${this.id}) save confirmation`));\n      }, 5000);\n    });\n  }\n\n  static async get(id: string, dbWorker: Worker): Promise<Embedding | undefined> {\n    const requestId = crypto.randomUUID();\n    return new Promise<Embedding | undefined>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && event.data.result) {\n            const embData = event.data.result;\n            resolve(new Embedding(embData.id, embData.input, embData.vector as ArrayBuffer, embData.model, embData.created_at, embData.updated_at, dbWorker, embData.label));\n          } else if (event.data.success && !event.data.result) {\n            resolve(undefined);\n          } else {\n            reject(new Error(event.data.error || `Failed to get embedding (id: ${id})`));\n          }\n        }\n      };\n      dbWorker.addEventListener('message', handleMessage);\n      dbWorker.postMessage({ action: DBActions.GET, payload: [DBNames.DB_USER_DATA, DBNames.DB_EMBEDDINGS, id], requestId });\n      setTimeout(() => {\n        dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for get embedding (id: ${id}) confirmation`));\n      }, 5000);\n    });\n  }\n\n  static async getByInputAndModel(input: string, model: string, dbWorker: Worker): Promise<Embedding | undefined> {\n    const requestId = crypto.randomUUID();\n    return new Promise<Embedding | undefined>((resolve, reject) => {\n        const handleMessage = (event: MessageEvent) => {\n            if (event.data && event.data.requestId === requestId) {\n                dbWorker.removeEventListener('message', handleMessage);\n                if (event.data.success && Array.isArray(event.data.result)) {\n                    const results = event.data.result;\n                    if (results.length > 0) {\n                        const embData = results[0];\n                        resolve(new Embedding(embData.id, embData.input, embData.vector as ArrayBuffer, embData.model, embData.created_at, embData.updated_at, dbWorker, embData.label));\n                    } else {\n                        resolve(undefined);\n                    }\n                } else if (event.data.success && !event.data.result) {\n                     resolve(undefined);\n                } else {\n                    reject(new Error(event.data.error || `Failed to get embedding by input/model`));\n                }\n            }\n        };\n        dbWorker.addEventListener('message', handleMessage);\n        const queryObj = { from: DBNames.DB_EMBEDDINGS, where: { input: input, model: model }, limit: 1, orderBy: [{field: 'input', direction: 'asc'}]};\n        dbWorker.postMessage({ action: DBActions.QUERY, payload: [DBNames.DB_USER_DATA, queryObj], requestId });\n        setTimeout(() => {\n            dbWorker.removeEventListener('message', handleMessage);\n            reject(new Error(`Timeout waiting for getByInputAndModel confirmation for input: \"${input.substring(0,30)}...\"`));\n        }, 5000);\n    });\n  }\n\n  async update(updates: Partial<Omit<Embedding, 'dbWorker' | 'id' | 'created_at' | 'input'>>): Promise<void> {\n    const { ...allowedUpdates } = updates as any;\n    if (allowedUpdates.vector && !(allowedUpdates.vector instanceof ArrayBuffer)) {\n        allowedUpdates.vector = Embedding.toArrayBuffer(allowedUpdates.vector);\n    }\n    Object.assign(this, allowedUpdates);\n    await this.saveToDB();\n  }\n\n  async delete(): Promise<void> {\n    const requestId = crypto.randomUUID();\n    return new Promise<void>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success) {\n            resolve();\n          } else {\n            reject(new Error(event.data.error || `Failed to delete embedding (id: ${this.id})`));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({ action: DBActions.DELETE, payload: [DBNames.DB_USER_DATA, DBNames.DB_EMBEDDINGS, this.id], requestId });\n      setTimeout(() => {\n        this.dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for delete embedding (id: ${this.id}) confirmation`));\n      }, 5000);\n    });\n  }\n\n  static async generateVectorWithModelWorker(input: string, model: string, modelWorker: Worker): Promise<ArrayBuffer> {\n    const requestId = crypto.randomUUID();\n    return new Promise<ArrayBuffer>((resolve, reject) => {\n      const handleModelResponse = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          modelWorker.removeEventListener('message', handleModelResponse);\n          if (event.data.success && event.data.vector instanceof ArrayBuffer) {\n            resolve(event.data.vector);\n          } else if (event.data.success) {\n            reject(new Error('Model worker returned success but no valid vector.'));\n          } else {\n            reject(new Error(event.data.error || 'Model worker failed to generate embedding vector.'));\n          }\n        }\n      };\n      modelWorker.addEventListener('message', handleModelResponse);\n      modelWorker.postMessage({ action: 'generateEmbeddingVector', input, model, requestId });\n      setTimeout(() => {\n        modelWorker.removeEventListener('message', handleModelResponse);\n        reject(new Error(`Timeout waiting for model worker to generate vector for input: \"${input.substring(0,30)}...\"`));\n      }, 15000);\n    });\n  }\n}","// idbKnowledgeGraph.ts\n\n// NOTE: All DB worker messages should use { action: ... } not { type: ... } for action property.\n\nimport { BaseCRUD } from \"./idbBase\";\nimport { Embedding } from \"./idbEmbedding\";\nimport { DBNames } from \"./idbSchema\";\nimport { DBActions } from \"./dbActions\";\n\nexport class KnowledgeGraphNode extends BaseCRUD<KnowledgeGraphNode> {\n  public type: string;\n  public properties_json?: string;\n  public embedding_id?: string;\n  public created_at: number;\n  public updated_at: number;\n  protected modelWorker?: Worker;\n\n  public edgesOut: KnowledgeGraphEdge[] = [];\n  public edgesIn: KnowledgeGraphEdge[] = [];\n  public embedding?: Embedding;\n\n  constructor(\n    id: string,\n    type: string,\n    label: string,\n    dbWorker: Worker,\n    created_at: number,\n    updated_at: number,\n    properties_json?: string,\n    embedding_id?: string,\n    modelWorker?: Worker\n  ) {\n    super(id, label, dbWorker);\n    this.type = type;\n    this.created_at = created_at;\n    this.updated_at = updated_at;\n    this.properties_json = properties_json;\n    this.embedding_id = embedding_id;\n    this.modelWorker = modelWorker;\n  }\n\n  get properties(): Record<string, any> | undefined {\n    try {\n        return this.properties_json ? JSON.parse(this.properties_json) : undefined;\n    } catch (e) {\n        console.error(`Failed to parse node properties_json for node ${this.id}:`, e);\n        return undefined;\n    }\n  }\n\n  set properties(data: Record<string, any> | undefined) {\n    this.properties_json = data ? JSON.stringify(data) : undefined;\n  }\n\n  static async create(\n    type: string,\n    label: string,\n    dbWorker: Worker,\n    options: {\n      id?: string;\n      properties?: Record<string, any>;\n      embeddingInput?: string;\n      embeddingModel?: string;\n      embeddingVector?: number[] | Float32Array | ArrayBuffer;\n      modelWorker?: Worker;\n    } = {}\n  ): Promise<string> {\n    const id = options.id || crypto.randomUUID();\n    const now = Date.now();\n    const properties_json = options.properties ? JSON.stringify(options.properties) : undefined;\n    let embedding_id_to_set: string | undefined = undefined;\n\n    if (options.embeddingInput && options.embeddingModel) {\n        const existingEmbedding = await Embedding.getByInputAndModel(options.embeddingInput, options.embeddingModel, dbWorker);\n        if (existingEmbedding) {\n            embedding_id_to_set = existingEmbedding.id;\n            if (options.embeddingVector !== undefined) {\n                const vectorBuffer = Embedding.toArrayBuffer(options.embeddingVector);\n                if (!KnowledgeGraphNode.areArrayBuffersEqual(vectorBuffer, existingEmbedding.vector)) {\n                     await existingEmbedding.update({ vector: vectorBuffer });\n                }\n            }\n        } else {\n            let vectorToSave: ArrayBuffer;\n            if (options.embeddingVector !== undefined) {\n                vectorToSave = Embedding.toArrayBuffer(options.embeddingVector);\n            } else if (options.modelWorker) {\n                vectorToSave = await Embedding.generateVectorWithModelWorker(options.embeddingInput, options.embeddingModel, options.modelWorker);\n            } else {\n                throw new Error(\"KnowledgeGraphNode.create: Cannot create embedding - embeddingVector not provided and modelWorker is missing.\");\n            }\n            embedding_id_to_set = await Embedding.create(options.embeddingInput, vectorToSave, options.embeddingModel, dbWorker);\n        }\n    }\n    const nodeInstance = new KnowledgeGraphNode(id, type, label, dbWorker, now, now, properties_json, embedding_id_to_set, options.modelWorker);\n    return nodeInstance.saveToDB();\n  }\n\n  static async read(id: string, dbWorker: Worker, modelWorker?: Worker): Promise<KnowledgeGraphNode | undefined> {\n    const nodeData = await KnowledgeGraphNode.getKGNNodeData(id, dbWorker);\n    if (nodeData) {\n        return KnowledgeGraphNode.fromKGNData(nodeData, dbWorker, modelWorker);\n    }\n    return undefined;\n  }\n\n  static fromKGNData(data: any, dbWorker: Worker, modelWorker?: Worker): KnowledgeGraphNode {\n      return new KnowledgeGraphNode(data.id, data.type, data.label, dbWorker, data.created_at, data.updated_at, data.properties_json, data.embedding_id, modelWorker);\n  }\n\n  static async getKGNNodeData(id: string, dbWorker: Worker): Promise<any | undefined> {\n    const requestId = crypto.randomUUID();\n    return new Promise<any | undefined>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success) {\n            resolve(event.data.result);\n          } else {\n            reject(new Error(event.data.error || `Failed to get KGN node data (id: ${id})`));\n          }\n        }\n      };\n      dbWorker.addEventListener('message', handleMessage);\n      dbWorker.postMessage({ action: DBActions.GET, payload: [DBNames.DB_USER_DATA, DBNames.DB_KNOWLEDGE_GRAPH_NODES, id], requestId });\n      setTimeout(() => {\n        dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for get KGN node data (id: ${id}) confirmation`));\n      }, 5000);\n    });\n  }\n\n  async update(updates: Partial<Omit<KnowledgeGraphNode, 'dbWorker' | 'modelWorker' | 'id' | 'created_at' | 'edgesOut' | 'edgesIn' | 'embedding' | 'type' >>): Promise<void> {\n    const { id, dbWorker, modelWorker, created_at, edgesOut, edgesIn, embedding, type, ...allowedUpdates } = updates as any;\n    if (allowedUpdates.properties && typeof allowedUpdates.properties === 'object') {\n        this.properties = allowedUpdates.properties;\n        delete allowedUpdates.properties;\n    }\n    Object.assign(this, allowedUpdates);\n    await this.saveToDB();\n  }\n\n  async delete(options: { deleteOrphanedEmbedding?: boolean, deleteEdges?: boolean } = {}): Promise<void> {\n    const { deleteOrphanedEmbedding = false, deleteEdges = true } = options;\n    if (deleteEdges) {\n        await this.deleteAllEdges();\n    }\n    if (deleteOrphanedEmbedding && this.embedding_id) {\n        const emb = await Embedding.get(this.embedding_id, this.dbWorker);\n        if (emb) {\n            await emb.delete().catch(e => console.warn(`Attempted to delete embedding ${this.embedding_id}, but failed: ${e.message}`));\n        }\n    }\n    const requestId = crypto.randomUUID();\n    return new Promise<void>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success) {\n            resolve();\n          } else {\n            reject(new Error(event.data.error || `Failed to delete KGN node data (id: ${this.id})`));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({ action: DBActions.DELETE, payload: [DBNames.DB_USER_DATA, DBNames.DB_KNOWLEDGE_GRAPH_NODES, this.id], requestId });\n      setTimeout(() => {\n        this.dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for delete KGN node data (id: ${this.id}) confirmation`));\n      }, 5000);\n    });\n  }\n\n  async saveToDB(): Promise<string> {\n    const requestId = crypto.randomUUID();\n    const now = Date.now();\n    this.updated_at = now;\n    if (!this.created_at) {\n      this.created_at = now;\n    }\n    const { dbWorker, modelWorker, edgesOut, edgesIn, embedding, type, label, properties_json, embedding_id, created_at, updated_at, ...nodeSpecificsForStore } = this;\n    \n    const nodeDataForStore = {\n        id: this.id, // Ensure id is part of the object if not captured by spread\n        type: this.type,\n        label: this.label,\n        properties_json: this.properties_json,\n        embedding_id: this.embedding_id,\n        created_at: this.created_at,\n        updated_at: this.updated_at,\n    };\n\n    return new Promise((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && typeof event.data.result === 'string') {\n            resolve(event.data.result);\n          } else if (event.data.success) {\n            reject(new Error('Node data saved, but worker did not return a valid ID.'));\n          } else {\n            reject(new Error(event.data.error || 'Failed to save node data'));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({\n        action: DBActions.PUT,\n        payload: [DBNames.DB_USER_DATA, DBNames.DB_KNOWLEDGE_GRAPH_NODES, nodeDataForStore],\n        requestId\n      });\n      setTimeout(() => {\n        this.dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for node data (id: ${this.id}) save confirmation`));\n      }, 5000);\n    });\n  }\n\n  async getEmbedding(): Promise<Embedding | undefined> {\n    if (this.embedding && this.embedding.id === this.embedding_id) {\n      return this.embedding;\n    }\n    if (this.embedding_id) {\n      this.embedding = await Embedding.get(this.embedding_id, this.dbWorker);\n      return this.embedding;\n    }\n    return undefined;\n  }\n\n  async addEdge(direction: 'out' | 'in', target_node_id: string, edge_type: string, metadata?: Record<string, any>): Promise<string> {\n    const from_id = direction === 'out' ? this.id : target_node_id;\n    const to_id = direction === 'out' ? target_node_id : this.id;\n    const edgeId = await KnowledgeGraphEdge.create(from_id, to_id, edge_type, this.dbWorker, { metadata });\n    return edgeId;\n  }\n\n  async fetchEdges(direction: 'out' | 'in' | 'both' = 'both'): Promise<void> {\n    const fetchedEdges = await KnowledgeGraphEdge.getEdgesByNodeId(this.id, direction, this.dbWorker);\n    if (direction === 'out') {\n        this.edgesOut = fetchedEdges;\n    } else if (direction === 'in') {\n        this.edgesIn = fetchedEdges;\n    } else {\n        this.edgesOut = [];\n        this.edgesIn = [];\n        fetchedEdges.forEach(edge => {\n            if (edge.from_node_id === this.id) this.edgesOut.push(edge);\n            if (edge.to_node_id === this.id) {\n                if (!this.edgesIn.find(e => e.id === edge.id) && !this.edgesOut.find(e => e.id === edge.id && edge.from_node_id === edge.to_node_id)) {\n                    this.edgesIn.push(edge);\n                } else if (edge.from_node_id !== this.id && !this.edgesIn.find(e => e.id === edge.id)) {\n                    this.edgesIn.push(edge);\n                }\n            }\n        });\n    }\n  }\n\n  async deleteEdge(edgeId: string): Promise<boolean> {\n    const edge = await KnowledgeGraphEdge.read(edgeId, this.dbWorker);\n    if (edge && (edge.from_node_id === this.id || edge.to_node_id === this.id)) {\n      await edge.delete();\n      this.edgesOut = this.edgesOut.filter(e => e.id !== edgeId);\n      this.edgesIn = this.edgesIn.filter(e => e.id !== edgeId);\n      return true;\n    }\n    return false;\n  }\n\n  async deleteAllEdges(): Promise<void> {\n    const allRelatedEdges = await KnowledgeGraphEdge.getEdgesByNodeId(this.id, 'both', this.dbWorker);\n    const uniqueEdgeIds = Array.from(new Set(allRelatedEdges.map(e => e.id)));\n    for (const edgeId of uniqueEdgeIds) {\n        const edgeInstance = await KnowledgeGraphEdge.read(edgeId, this.dbWorker);\n        if(edgeInstance) {\n            await edgeInstance.delete();\n        }\n    }\n    this.edgesOut = [];\n    this.edgesIn = [];\n  }\n\n  static areArrayBuffersEqual(buf1: ArrayBuffer, buf2: ArrayBuffer): boolean {\n      if (buf1.byteLength !== buf2.byteLength) return false;\n      const view1 = new Uint8Array(buf1);\n      const view2 = new Uint8Array(buf2);\n      for (let i = 0; i < view1.length; i++) {\n          if (view1[i] !== view2[i]) return false;\n      }\n      return true;\n  }\n}\n\nexport class KnowledgeGraphEdge extends BaseCRUD<KnowledgeGraphEdge> {\n  public from_node_id: string;\n  public to_node_id: string;\n  public edge_type: string;\n  public metadata_json?: string;\n  public created_at: number;\n\n  public fromNode?: KnowledgeGraphNode;\n  public toNode?: KnowledgeGraphNode;\n\n  constructor(\n    id: string,\n    from_node_id: string,\n    to_node_id: string,\n    edge_type: string,\n    created_at: number,\n    dbWorker: Worker,\n    metadata_json?: string,\n    fromNode?: KnowledgeGraphNode,\n    toNode?: KnowledgeGraphNode\n  ) {\n    super(id, edge_type, dbWorker); // use edge_type as label for now\n    this.from_node_id = from_node_id;\n    this.to_node_id = to_node_id;\n    this.edge_type = edge_type;\n    this.metadata_json = metadata_json;\n    this.created_at = created_at;\n    if (fromNode) this.fromNode = fromNode;\n    if (toNode) this.toNode = toNode;\n  }\n\n  get metadata(): Record<string, any> | undefined {\n    try {\n        return this.metadata_json ? JSON.parse(this.metadata_json) : undefined;\n    } catch (e) {\n        console.error(`Failed to parse edge metadata_json for edge ${this.id}:`, e);\n        return undefined;\n    }\n  }\n\n  set metadata(data: Record<string, any> | undefined) {\n    this.metadata_json = data ? JSON.stringify(data) : undefined;\n  }\n\n  static async create(\n    from_node_id: string,\n    to_node_id: string,\n    edge_type: string,\n    dbWorker: Worker,\n    options: { id?: string; metadata?: Record<string, any> } = {}\n  ): Promise<string> {\n    const id = options.id || crypto.randomUUID();\n    const now = Date.now();\n    const metadata_json = options.metadata ? JSON.stringify(options.metadata) : undefined;\n    const edgeInstance = new KnowledgeGraphEdge(id, from_node_id, to_node_id, edge_type, now, dbWorker, metadata_json);\n    return edgeInstance.saveToDB();\n  }\n\n  async saveToDB(): Promise<string> {\n    const requestId = crypto.randomUUID();\n    if (!this.created_at) {\n        this.created_at = Date.now();\n    }\n    const { dbWorker, fromNode, toNode, ...edgeData } = this;\n    return new Promise((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && typeof event.data.result === 'string') {\n            resolve(event.data.result);\n          } else if (event.data.success) {\n             reject(new Error('Edge saved, but worker did not return a valid ID.'));\n          } else {\n            reject(new Error(event.data.error || 'Failed to save edge'));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({\n        action: DBActions.PUT,\n        payload: [DBNames.DB_USER_DATA, DBNames.DB_KNOWLEDGE_GRAPH_EDGES, edgeData],\n        requestId\n      });\n      setTimeout(() => {\n        this.dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for edge (id: ${this.id}) save confirmation`));\n      }, 5000);\n    });\n  }\n\n  async update(updates: Partial<Omit<KnowledgeGraphEdge, 'dbWorker' | 'id' | 'created_at' | 'from_node_id' | 'to_node_id' | 'fromNode' | 'toNode'>>): Promise<void> {\n    const { id, dbWorker, created_at, from_node_id, to_node_id, fromNode, toNode, ...allowedUpdates } = updates as any;\n    if (allowedUpdates.metadata && typeof allowedUpdates.metadata === 'object') {\n        this.metadata = allowedUpdates.metadata;\n        delete allowedUpdates.metadata;\n    }\n    Object.assign(this, allowedUpdates);\n    await this.saveToDB();\n  }\n\n  async delete(): Promise<void> {\n    const requestId = crypto.randomUUID();\n    return new Promise<void>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success) {\n            resolve();\n          } else {\n            reject(new Error(event.data.error || `Failed to delete edge (id: ${this.id})`));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({ action: DBActions.DELETE, payload: [DBNames.DB_USER_DATA, DBNames.DB_KNOWLEDGE_GRAPH_EDGES, this.id], requestId });\n      setTimeout(() => {\n        this.dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for delete edge (id: ${this.id}) confirmation`));\n      }, 5000);\n    });\n  }\n\n  static async getEdgesByNodeId(nodeId: string, direction: 'out' | 'in' | 'both', dbWorker: Worker): Promise<KnowledgeGraphEdge[]> {\n    const results: KnowledgeGraphEdge[] = [];\n    const errors: Error[] = [];\n    const fetchDirection = async (dir: 'out' | 'in') => {\n        const requestId = crypto.randomUUID();\n        const indexName = dir === 'out' ? 'from_node_id' : 'to_node_id';\n        const queryObj = { from: DBNames.DB_KNOWLEDGE_GRAPH_EDGES, where: { [indexName]: nodeId }, orderBy: [{ field: indexName, direction: 'asc' }] };\n        return new Promise<void>((resolveQuery, rejectQuery) => {\n            const handleMessage = (event: MessageEvent) => {\n                if (event.data && event.data.requestId === requestId) {\n                    dbWorker.removeEventListener('message', handleMessage);\n                    if (event.data.success && Array.isArray(event.data.result)) {\n                        event.data.result.forEach((edgeData: any) => {\n                            results.push(new KnowledgeGraphEdge(edgeData.id, edgeData.from_node_id, edgeData.to_node_id, edgeData.edge_type, edgeData.created_at, dbWorker, edgeData.metadata_json));\n                        });\n                        resolveQuery();\n                    } else if (event.data.success) {\n                        resolveQuery();\n                    } else {\n                        const err = new Error(event.data.error || `Failed to get edges for node ${nodeId}, direction ${dir}`);\n                        errors.push(err);\n                        rejectQuery(err);\n                    }\n                }\n            };\n            dbWorker.addEventListener('message', handleMessage);\n            dbWorker.postMessage({ action: DBActions.QUERY, payload: [DBNames.DB_USER_DATA, queryObj], requestId });\n            setTimeout(() => {\n                dbWorker.removeEventListener('message', handleMessage);\n                const err = new Error(`Timeout for getEdgesByNodeId (node: ${nodeId}, dir: ${dir})`);\n                errors.push(err);\n                rejectQuery(err);\n            }, 5000);\n        });\n    };\n    if (direction === 'out' || direction === 'both') {\n        await fetchDirection('out').catch(e => {});\n    }\n    if (direction === 'in' || direction === 'both') {\n        await fetchDirection('in').catch(e => {});\n    }\n    if (errors.length > 0 && results.length === 0) {\n        throw new Error(`Failed to fetch edges: ${errors.map(e => e.message).join(', ')}`);\n    }\n    if (direction === 'both' && results.length > 0) {\n        return Array.from(new Map(results.map(edge => [edge.id, edge])).values());\n    }\n    return results;\n  }\n\n  /**\n   * Fetch a single log entry by its unique ID.\n   * For fetching all or filtered logs, use getAll or the filtering methods.\n   */\n  static async read(id: string, dbWorker: Worker): Promise<KnowledgeGraphEdge | undefined> {\n    const requestId = crypto.randomUUID();\n    return new Promise<KnowledgeGraphEdge | undefined>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && event.data.result) {\n            const edgeData = event.data.result;\n            resolve(new KnowledgeGraphEdge(\n              edgeData.id,\n              edgeData.from_node_id,\n              edgeData.to_node_id,\n              edgeData.edge_type,\n              edgeData.created_at,\n              dbWorker,\n              edgeData.metadata_json\n            ));\n          } else if (event.data.success && !event.data.result) {\n            resolve(undefined);\n          } else {\n            reject(new Error(event.data.error || `Failed to get edge (id: ${id})`));\n          }\n        }\n      };\n      dbWorker.addEventListener('message', handleMessage);\n      dbWorker.postMessage({ action: DBActions.GET, payload: [DBNames.DB_USER_DATA, DBNames.DB_KNOWLEDGE_GRAPH_EDGES, id], requestId });\n      setTimeout(() => {\n        dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for get edge (id: ${id}) confirmation`));\n      }, 5000);\n    });\n  }\n}\n","// idbLog.ts\n\nimport { BaseCRUD } from \"./idbBase\";\nimport { DBNames, LogLevel } from \"./idbSchema\";\nimport { DBActions } from \"./dbActions\";\n\nexport class LogEntry extends BaseCRUD<LogEntry> {\n  public timestamp: number;\n  public level: LogLevel;\n  public message: string;\n  public component: string;\n  public extensionSessionId: string;\n  public chatSessionId?: string;\n\n  constructor(\n    id: string,\n    timestamp: number,\n    level: LogLevel,\n    message: string,\n    component: string,\n    extensionSessionId: string,\n    dbWorker: Worker,\n    chatSessionId?: string\n  ) {\n    super(id, message, dbWorker); // Use message as label for consistency\n    this.timestamp = timestamp;\n    this.level = level;\n    this.message = message;\n    this.component = component;\n    this.extensionSessionId = extensionSessionId;\n    this.chatSessionId = chatSessionId;\n  }\n\n  static async create(\n    data: Omit<LogEntry, 'id' | 'dbWorker' | 'label'>,\n    dbWorker: Worker\n  ): Promise<string> {\n    const id = crypto.randomUUID();\n    const record = { id, ...data };\n    const requestId = crypto.randomUUID();\n    return new Promise<string>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && typeof event.data.result === 'string') {\n            resolve(event.data.result);\n          } else {\n            reject(new Error(event.data.error || 'Failed to create log entry'));\n          }\n        }\n      };\n      dbWorker.addEventListener('message', handleMessage);\n      dbWorker.postMessage({ action: DBActions.PUT, payload: [DBNames.DB_LOGS, DBNames.DB_LOGS, record], requestId });\n      setTimeout(() => {\n        dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error('Timeout waiting for create log entry confirmation'));\n      }, 5000);\n    });\n  }\n\n  /**\n   * Fetch a single log entry by its unique ID.\n   * For fetching all or filtered logs, use getAll or the filtering methods.\n   */\n  static async read(id: string, dbWorker: Worker): Promise<LogEntry | undefined> {\n    const requestId = crypto.randomUUID();\n    return new Promise<LogEntry | undefined>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && event.data.result) {\n            const l = event.data.result;\n            resolve(new LogEntry(l.id, l.timestamp, l.level, l.message, l.component, l.extensionSessionId, dbWorker, l.chatSessionId));\n          } else if (event.data.success && !event.data.result) {\n            resolve(undefined);\n          } else {\n            reject(new Error(event.data.error || `Failed to get log entry (id: ${id})`));\n          }\n        }\n      };\n      dbWorker.addEventListener('message', handleMessage);\n      dbWorker.postMessage({ action: DBActions.GET, payload: [DBNames.DB_LOGS, DBNames.DB_LOGS, id], requestId });\n      setTimeout(() => {\n        dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for get log entry (id: ${id}) confirmation`));\n      }, 5000);\n    });\n  }\n\n  async update(updates: Partial<Omit<LogEntry, 'id' | 'dbWorker' | 'label'>>): Promise<void> {\n    Object.assign(this, updates);\n    await this.saveToDB();\n  }\n\n  async delete(): Promise<void> {\n    const requestId = crypto.randomUUID();\n    return new Promise<void>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success) {\n            resolve();\n          } else {\n            reject(new Error(event.data.error || `Failed to delete log entry (id: ${this.id})`));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({ action: DBActions.DELETE, payload: [DBNames.DB_LOGS, DBNames.DB_LOGS, this.id], requestId });\n      setTimeout(() => {\n        this.dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for delete log entry (id: ${this.id}) confirmation`));\n      }, 5000);\n    });\n  }\n\n  async saveToDB(): Promise<string> {\n    const requestId = crypto.randomUUID();\n    const record = {\n      id: this.id,\n      timestamp: this.timestamp,\n      level: this.level,\n      message: this.message,\n      component: this.component,\n      extensionSessionId: this.extensionSessionId,\n      chatSessionId: this.chatSessionId\n    };\n    return new Promise<string>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && typeof event.data.result === 'string') {\n            resolve(event.data.result);\n          } else {\n            reject(new Error(event.data.error || 'Failed to save log entry'));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({ action: DBActions.PUT, payload: [DBNames.DB_LOGS, DBNames.DB_LOGS, record], requestId });\n      setTimeout(() => {\n        this.dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error('Timeout waiting for save log entry confirmation'));\n      }, 5000);\n    });\n  }\n\n  static async getAll(\n    dbWorker: Worker,\n    filters?: { levels?: LogLevel[]; component?: string }\n  ): Promise<LogEntry[]> {\n    const requestId = crypto.randomUUID();\n    // Build where clause for queryObj\n    let where: any = {};\n    if (filters?.levels) {\n      if (filters.levels.length === 1) {\n        where.level = filters.levels[0];\n      } else if (filters.levels.length > 1) {\n        where.level = { op: 'in', value: filters.levels };\n      }\n    }\n    if (filters?.component) {\n      where.component = filters.component;\n    }\n    // If no filters, don't include where\n    const queryObj: any = {\n      from: DBNames.DB_LOGS,\n      orderBy: [{ field: 'timestamp', direction: 'desc' }]\n    };\n    if (Object.keys(where).length > 0) {\n      queryObj.where = where;\n    }\n    return new Promise<LogEntry[]>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && Array.isArray(event.data.result)) {\n            resolve(event.data.result.map((l: any) => new LogEntry(l.id, l.timestamp, l.level, l.message, l.component, l.extensionSessionId, dbWorker, l.chatSessionId)));\n          } else if (event.data.success && !event.data.result) {\n            resolve([]);\n          } else {\n            reject(new Error(event.data.error || 'Failed to get logs'));\n          }\n        }\n      };\n      dbWorker.addEventListener('message', handleMessage);\n      dbWorker.postMessage({\n        action: DBActions.QUERY,\n        payload: [DBNames.DB_LOGS, queryObj],\n        requestId\n      });\n      setTimeout(() => {\n        dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error('Timeout waiting for log query confirmation'));\n      }, 5000);\n    });\n  }\n\n  static async getByLevel(level: LogLevel, dbWorker: Worker): Promise<LogEntry[]> {\n    return LogEntry.getAll(dbWorker, { levels: [level] });\n  }\n\n  static async getByLevels(levels: LogLevel[], dbWorker: Worker): Promise<LogEntry[]> {\n    return LogEntry.getAll(dbWorker, { levels });\n  }\n\n  static async getByComponent(component: string, dbWorker: Worker): Promise<LogEntry[]> {\n    return LogEntry.getAll(dbWorker, { component });\n  }\n\n  static async getByComponentAndLevels(component: string, levels: LogLevel[], dbWorker: Worker): Promise<LogEntry[]> {\n    return LogEntry.getAll(dbWorker, { component, levels });\n  }\n}\n","// idbMessage.ts\n\nimport { KnowledgeGraphNode } from \"./idbKnowledgeGraph\";\nimport { Attachment } from \"./idbAttachment\";\nimport { Summary } from \"./idbSummary\";\nimport { DBNames, NodeType } from \"./idbSchema\";\nimport { DBActions } from \"./dbActions\";\nimport { Embedding } from \"./idbEmbedding\";\n\nexport class Message extends KnowledgeGraphNode {\n  public chat_id: string;\n  public timestamp: number;\n  public sender: string;\n  public message_type: string;\n  public content: string;\n  public metadata_json?: string;\n  public upvotes: number = 0;\n  public downvotes: number = 0;\n  public starred: boolean = false;\n  public attachment_ids: string[] = [];\n  public summary_id?: string;\n\n  constructor(\n    id: string,\n    chat_id: string,\n    sender: string,\n    content: string,\n    dbWorker: Worker,\n    timestamp: number,\n    kgn_created_at: number,\n    kgn_updated_at: number,\n    options: {\n      message_type?: string;\n      metadata?: Record<string, any>;\n      attachment_ids?: string[];\n      upvotes?: number;\n      downvotes?: number;\n      starred?: boolean;\n      kgn_properties?: Record<string, any>;\n      kgn_embedding_id?: string;\n      modelWorker?: Worker;\n    } = {}\n  ) {\n    super(\n      id,\n      NodeType.Message,\n      content,\n              dbWorker,\n      kgn_created_at,\n      kgn_updated_at,\n      options.kgn_properties ? JSON.stringify(options.kgn_properties) : undefined,\n      options.kgn_embedding_id,\n      options.modelWorker\n    );\n    this.chat_id = chat_id;\n    this.timestamp = timestamp;\n    this.sender = sender;\n    this.message_type = options.message_type || 'text';\n    this.content = content;\n    this.metadata_json = options.metadata ? JSON.stringify(options.metadata) : undefined;\n    this.attachment_ids = options.attachment_ids || [];\n    this.upvotes = options.upvotes || 0;\n    this.downvotes = options.downvotes || 0;\n    this.starred = options.starred || false;\n  }\n\n  get metadata(): Record<string, any> | undefined {\n    try {\n        return this.metadata_json ? JSON.parse(this.metadata_json) : undefined;\n    } catch (e) {\n        console.error(`Failed to parse message metadata_json for message ${this.id}:`, e);\n        return undefined;\n    }\n  }\n\n  set metadata(data: Record<string, any> | undefined) {\n    this.metadata_json = data ? JSON.stringify(data) : undefined;\n  }\n\n  static async createMessage(\n    chat_id: string,\n    sender: string,\n    content: string,\n    dbWorker: Worker,\n    options: {\n      id?: string;\n      timestamp?: number;\n      message_type?: string;\n      metadata?: Record<string, any>;\n      attachment_ids?: string[];\n      upvotes?: number;\n      downvotes?: number;\n      starred?: boolean;\n      kgn_properties?: Record<string, any>;\n      kgn_embeddingInput?: string;\n      kgn_embeddingModel?: string;\n      kgn_embeddingVector?: number[] | Float32Array | ArrayBuffer;\n      modelWorker?: Worker;\n    } = {}\n  ): Promise<string> {\n    const messageId = options.id || crypto.randomUUID();\n    const now = Date.now();\n    const messageTimestamp = options.timestamp || now;\n    let kgn_embedding_id_to_set: string | undefined;\n\n    if (options.kgn_embeddingInput && options.kgn_embeddingModel) {\n        const existingEmbedding = await Embedding.getByInputAndModel(options.kgn_embeddingInput, options.kgn_embeddingModel, dbWorker);\n        if (existingEmbedding) {\n            kgn_embedding_id_to_set = existingEmbedding.id;\n            if (options.kgn_embeddingVector !== undefined) {\n                const vectorBuffer = Embedding.toArrayBuffer(options.kgn_embeddingVector);\n                if (!KnowledgeGraphNode.areArrayBuffersEqual(vectorBuffer, existingEmbedding.vector)) {\n                     await existingEmbedding.update({ vector: vectorBuffer });\n                }\n            }\n        } else {\n            let vectorToSave: ArrayBuffer;\n            if (options.kgn_embeddingVector !== undefined) {\n                vectorToSave = Embedding.toArrayBuffer(options.kgn_embeddingVector);\n            } else if (options.modelWorker) {\n                vectorToSave = await Embedding.generateVectorWithModelWorker(options.kgn_embeddingInput, options.kgn_embeddingModel, options.modelWorker);\n            } else {\n                throw new Error(\"Message.createMessage: Cannot create embedding - kgn_embeddingVector not provided and modelWorker is missing.\");\n            }\n            kgn_embedding_id_to_set = await Embedding.create(options.kgn_embeddingInput, vectorToSave, options.kgn_embeddingModel, dbWorker);\n        }\n    }\n\n    const msg = new Message(\n      messageId, chat_id, sender, content, dbWorker, messageTimestamp, now, now,\n      {\n        message_type: options.message_type,\n        metadata: options.metadata,\n        attachment_ids: options.attachment_ids,\n        upvotes: options.upvotes,\n        downvotes: options.downvotes,\n        starred: options.starred,\n        kgn_properties: options.kgn_properties,\n        kgn_embedding_id: kgn_embedding_id_to_set,\n        modelWorker: options.modelWorker\n      }\n    );\n    await msg.saveToDB();\n    return messageId;\n  }\n\n  async saveToDB(): Promise<string> {\n    const now = Date.now();\n    this.updated_at = now;\n    if (!this.created_at) {\n        this.created_at = this.timestamp;\n    }\n    this.label = this.content;\n    await super.saveToDB();\n\n    const requestId = crypto.randomUUID();\n    const { dbWorker, modelWorker, edgesOut, edgesIn, embedding, type, label, properties_json, embedding_id, created_at, updated_at, ...messageSpecificsForStore } = this;\n    \n    const messageDataForStore = {\n        id: this.id, // Ensure id is part of the object if not captured by spread\n        chat_id: this.chat_id,\n        timestamp: this.timestamp,\n        sender: this.sender,\n        message_type: this.message_type,\n        content: this.content,\n        metadata_json: this.metadata_json,\n        upvotes: this.upvotes,\n        downvotes: this.downvotes,\n        starred: this.starred,\n        attachment_ids: this.attachment_ids,\n        kgn_type: this.type,\n        kgn_label: this.label,\n        kgn_properties_json: this.properties_json,\n        kgn_embedding_id: this.embedding_id,\n        kgn_created_at: this.created_at,\n        kgn_updated_at: this.updated_at,\n    };\n    console.log('[DB][TRACE] Message.saveToDB: messageDataForStore:', messageDataForStore);\n\n    return new Promise((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && typeof event.data.result === 'string') {\n            resolve(event.data.result);\n          } else if (event.data.success) {\n            reject(new Error('Message saved, but DB_MESSAGES worker did not return a valid ID.'));\n          } else {\n            reject(new Error(event.data.error || 'Failed to save message to DB_MESSAGES'));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({ action: DBActions.PUT, payload: [DBNames.DB_USER_DATA, DBNames.DB_MESSAGES, messageDataForStore], requestId });\n      setTimeout(() => {\n        this.dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout waiting for DB_MESSAGES save (id: ${this.id}) confirmation`));\n      }, 5000);\n    });\n  }\n\n  static async read(id: string, dbWorker: Worker, modelWorker?: Worker): Promise<Message | undefined> {\n    const requestId = crypto.randomUUID();\n    const messageData = await new Promise<any | undefined>((resolve, reject) => {\n        const handleMessage = (event: MessageEvent) => {\n            if (event.data && event.data.requestId === requestId) {\n                dbWorker.removeEventListener('message', handleMessage);\n                if (event.data.success) {\n                    resolve(event.data.result);\n                } else {\n                    reject(new Error(event.data.error || `Failed to get message (id: ${id}) from DB_MESSAGES`));\n                }\n            }\n        };\n        dbWorker.addEventListener('message', handleMessage);\n        dbWorker.postMessage({ action: DBActions.GET, payload: [DBNames.DB_USER_DATA, DBNames.DB_MESSAGES, id], requestId });\n        setTimeout(() => { dbWorker.removeEventListener('message', handleMessage); reject(new Error(`Timeout getting message ${id}`)); }, 5000);\n    });\n\n    if (messageData) {\n        return new Message(\n            messageData.id, messageData.chat_id, messageData.sender, messageData.content, dbWorker, messageData.timestamp,\n            messageData.kgn_created_at, messageData.kgn_updated_at,\n            {\n                message_type: messageData.message_type,\n                metadata: messageData.metadata_json ? JSON.parse(messageData.metadata_json) : undefined,\n                attachment_ids: messageData.attachment_ids || [],\n                upvotes: messageData.upvotes, downvotes: messageData.downvotes, starred: messageData.starred,\n                kgn_properties: messageData.kgn_properties_json ? JSON.parse(messageData.kgn_properties_json) : undefined,\n                kgn_embedding_id: messageData.kgn_embedding_id,\n                modelWorker: modelWorker\n            }\n        );\n    }\n    return undefined;\n  }\n\n  async update(updates: Partial<Omit<Message, 'dbWorker' | 'modelWorker' | 'id' | 'chat_id' | 'timestamp' | 'created_at' | 'type' | 'label' | 'edgesOut' | 'edgesIn' | '_embedding' >>): Promise<void> {\n    const { id, chat_id, timestamp, created_at, type, label, edgesOut, edgesIn, _embedding, dbWorker, modelWorker, ...allowedUpdates } = updates as any;\n    if (allowedUpdates.content !== undefined) {\n        this.content = allowedUpdates.content;\n        this.label = allowedUpdates.content;\n    }\n    if (allowedUpdates.metadata && typeof allowedUpdates.metadata === 'object') {\n        this.metadata = allowedUpdates.metadata;\n        delete allowedUpdates.metadata;\n    } else if (allowedUpdates.metadata_json !== undefined) {\n        this.metadata_json = allowedUpdates.metadata_json;\n    }\n    if (allowedUpdates.properties && typeof allowedUpdates.properties === 'object') {\n        this.properties = allowedUpdates.properties;\n        delete allowedUpdates.properties;\n    } else if (allowedUpdates.properties_json !== undefined) {\n        this.properties_json = allowedUpdates.properties_json;\n    }\n\n    Object.assign(this, allowedUpdates);\n    await this.saveToDB();\n  }\n\n  async delete(options: { deleteAttachments?: boolean, deleteKGNRels?: boolean, deleteOrphanedEmbedding?: boolean } = {}): Promise<void> {\n    const { deleteAttachments = true, deleteKGNRels = true, deleteOrphanedEmbedding = false } = options;\n    if (deleteAttachments) {\n        for (const attId of this.attachment_ids) {\n            const attachment = await Attachment.read(attId, this.dbWorker);\n            if (attachment) {\n                await attachment.delete().catch(e => console.warn(`Failed to delete attachment ${attId} for message ${this.id}: ${e.message}`));\n            }\n        }\n        this.attachment_ids = [];\n    }\n    const requestId = crypto.randomUUID();\n    await new Promise<void>((resolve, reject) => {\n        const handleMessage = (event: MessageEvent) => {\n            if (event.data && event.data.requestId === requestId) {\n                this.dbWorker.removeEventListener('message', handleMessage);\n                if (event.data.success) {\n                    resolve();\n                } else {\n                    reject(new Error(event.data.error || `Failed to delete message (id: ${this.id}) from DB_MESSAGES`));\n                }\n            }\n        };\n        this.dbWorker.addEventListener('message', handleMessage);\n        this.dbWorker.postMessage({ action: DBActions.DELETE, payload: [DBNames.DB_USER_DATA, DBNames.DB_MESSAGES, this.id], requestId });\n        setTimeout(() => { this.dbWorker.removeEventListener('message', handleMessage); reject(new Error(`Timeout deleting message ${this.id} from DB_MESSAGES`)); }, 5000);\n    });\n    await super.delete({ deleteOrphanedEmbedding, deleteEdges: deleteKGNRels });\n  }\n\n  async addAttachment(fileData: { file_name: string; mime_type: string; data: Blob; }): Promise<string> {\n    const newAttachmentId = await Attachment.create(this.id, fileData.file_name, fileData.mime_type, fileData.data, this.dbWorker);\n    if (!this.attachment_ids.includes(newAttachmentId)) {\n        this.attachment_ids.push(newAttachmentId);\n        await this.saveToDB();\n    }\n    return newAttachmentId;\n  }\n\n  async getAttachments(): Promise<Attachment[]> {\n    if (!this.attachment_ids || this.attachment_ids.length === 0) {\n        return [];\n    }\n    return Attachment.getAllByMessageId(this.id, this.dbWorker);\n  }\n\n  async deleteAttachment(attachmentIdToDelete: string): Promise<boolean> {\n    const att = await Attachment.read(attachmentIdToDelete, this.dbWorker);\n    if (att && att.message_id === this.id) {\n      await att.delete();\n      const initialLength = this.attachment_ids.length;\n      this.attachment_ids = this.attachment_ids.filter(id => id !== attachmentIdToDelete);\n      if (this.attachment_ids.length < initialLength) {\n          await this.saveToDB();\n          return true;\n      }\n    }\n    return false;\n  }\n\n  async upvote(): Promise<void> { this.upvotes++; await this.update({ upvotes: this.upvotes }); }\n  async downvote(): Promise<void> { this.downvotes++; await this.update({ downvotes: this.downvotes }); }\n  async toggleStarred(): Promise<void> { this.starred = !this.starred; await this.update({ starred: this.starred }); }\n\n  async addSummary(\n    summary_text: string,\n    options?: {\n      id?: string;\n      parent_summary_id?: string | null;\n      metadata?: Record<string, any>;\n      start_message_id?: string | null;\n      end_message_id?: string | null;\n      start_timestamp?: number;\n      end_timestamp?: number;\n      token_count?: number;\n      embedding_id?: string;\n    }\n  ): Promise<string> {\n    const summaryId = await Summary.create(\n      this.id, // message id as chat_id/parent_id\n      summary_text,\n      this.dbWorker,\n      {\n        ...options,\n        message_ids: [this.id],\n        start_message_id: options?.start_message_id || this.id,\n        end_message_id: options?.end_message_id || this.id,\n      }\n    );\n    this.summary_id = summaryId;\n    await this.saveToDB();\n    return summaryId;\n  }\n\n  toJSON() {\n    return {\n      id: this.id,\n      chat_id: this.chat_id,\n      timestamp: this.timestamp,\n      sender: this.sender,\n      message_type: this.message_type,\n      content: this.content,\n      metadata_json: this.metadata_json,\n      upvotes: this.upvotes,\n      downvotes: this.downvotes,\n      starred: this.starred,\n      attachment_ids: this.attachment_ids,\n      summary_id: this.summary_id,\n      attachments: (this as any).attachments,\n    };\n  }\n}","// idbModelAsset.ts\n\nimport { BaseCRUD, Manifest } from \"./idbBase\";\nimport { DBNames } from \"./idbSchema\";\nimport { DBActions } from \"./dbActions\";\n// @ts-ignore: If using JS/TS without types for spark-md5\nimport SparkMD5 from 'spark-md5';\n\nexport const MODEL_ASSET_TYPE_MANIFEST = 'manifest' as const;\nexport const MODEL_ASSET_TYPE_CHUNK = 'chunk' as const;\nexport const CHUNK_SIZE = 10 * 1024 * 1024;\n\nexport interface ModelAssetManifest extends Manifest {\n  type: typeof MODEL_ASSET_TYPE_MANIFEST;\n  chunkGroupId: string;\n  folder: string;\n  size: number;\n  totalChunks: number;\n  chunkSizeUsed: number;\n  downloadTimestamp?: number;\n  lastAccessed?: number;\n  checksum?: string;\n  version?: string | number;\n}\n\nexport interface ModelAssetChunk {\n  id: string;\n  type: typeof MODEL_ASSET_TYPE_CHUNK;\n  chunkGroupId: string;\n  chunkIndex: number;\n  fileName: string;\n  folder: string;\n  fileType: string;\n  chunkSize: number;\n  data: ArrayBuffer;\n  addedAt: number;\n  lastAccessed?: number;\n  checksum?: string;\n  totalChunks?: number;\n  version?: string | number;\n}\n\nexport function isModelAssetManifest(obj: any): obj is ModelAssetManifest {\n  return obj && obj.type === MODEL_ASSET_TYPE_MANIFEST;\n}\nexport function isModelAssetChunk(obj: any): obj is ModelAssetChunk {\n  return obj && obj.type === MODEL_ASSET_TYPE_CHUNK;\n}\n\nexport class ModelAsset extends BaseCRUD<ModelAssetManifest | ModelAssetChunk> {\n  public data: ModelAssetManifest | ModelAssetChunk;\n  public dbWorker: Worker;\n\n  constructor(data: ModelAssetManifest | ModelAssetChunk, dbWorker: Worker) {\n    super(data.id, (data as any).fileName, dbWorker);\n    this.data = data;\n    this.dbWorker = dbWorker;\n  }\n\n  async saveToDB(): Promise<string> {\n    if (isModelAssetManifest(this.data)) {\n      return await ModelAsset.createManifest(this.data, this.dbWorker);\n    } else if (isModelAssetChunk(this.data)) {\n      return await ModelAsset.createChunk(this.data, this.dbWorker);\n    }\n    throw new Error(\"Unknown ModelAsset type for saveToDB\");\n  }\n\n  async update(updates: Partial<ModelAssetManifest | ModelAssetChunk>): Promise<void> {\n    if (isModelAssetManifest(this.data)) {\n      await ModelAsset.updateManifest(this.data.id, updates, this.dbWorker);\n      Object.assign(this.data, updates);\n    } else if (isModelAssetChunk(this.data)) {\n      await ModelAsset.updateChunk(this.data.id, updates, this.dbWorker);\n      Object.assign(this.data, updates);\n    } else {\n      throw new Error(\"Unknown ModelAsset type for update\");\n    }\n  }\n\n  async delete(): Promise<void> {\n    if (isModelAssetManifest(this.data)) {\n      await ModelAsset.deleteManifest(this.data.id, this.dbWorker);\n    } else if (isModelAssetChunk(this.data)) {\n      await ModelAsset.deleteChunk(this.data.id, this.dbWorker);\n    } else {\n      throw new Error(\"Unknown ModelAsset type for delete\");\n    }\n  }\n\n  /**\n   * Create this asset in the DB (preferred CRUD method; alias for saveToDB)\n   */\n  async create(): Promise<string> {\n    return this.saveToDB();\n  }\n\n  /**\n   * Read the latest data for this asset from the DB and update this.data\n   */\n  async read(): Promise<void> {\n    if (isModelAssetManifest(this.data)) {\n      const latest = await ModelAsset.readManifest(this.data.id, this.dbWorker);\n      if (!latest) throw new Error(`Manifest with id ${this.data.id} not found in DB`);\n      this.data = latest;\n    } else if (isModelAssetChunk(this.data)) {\n      const latest = await ModelAsset.readChunk(this.data.id, this.dbWorker);\n      if (!latest) throw new Error(`Chunk with id ${this.data.id} not found in DB`);\n      this.data = latest;\n    } else {\n      throw new Error(\"Unknown ModelAsset type for read\");\n    }\n  }\n\n  // =====================\n  // Repo-level (All manifests for a model/folder)\n  // =====================\n\n  static async readAllFileManifestsForRepo(folder: string, dbWorker: Worker): Promise<ModelAssetManifest[]> {\n    const results = await ModelAsset.sendWorkerRequest<any[]>(\n      dbWorker,\n      DBActions.QUERY_MANIFESTS,\n      [DBNames.DB_MODELS, DBNames.DB_MODELS, folder]\n    );\n    return results ? results.filter(isModelAssetManifest) : [];\n  }\n\n  static async createAllFileManifestsForRepo(manifests: ModelAssetManifest[], dbWorker: Worker): Promise<string[]> {\n    const ids: string[] = [];\n    for (const manifest of manifests) {\n      const id = await ModelAsset.createManifest(manifest, dbWorker);\n      ids.push(id);\n    }\n    return ids;\n  }\n\n  static async updateAllFileManifestsForRepo(manifests: ModelAssetManifest[], dbWorker: Worker): Promise<void> {\n    for (const manifest of manifests) {\n      await ModelAsset.updateManifest(manifest.id, manifest, dbWorker);\n    }\n  }\n\n  static async deleteAllFileManifestsForRepo(folder: string, dbWorker: Worker): Promise<void> {\n    const manifests = await ModelAsset.readAllFileManifestsForRepo(folder, dbWorker);\n    for (const manifest of manifests) {\n      await ModelAsset.deleteManifest(manifest.id, dbWorker);\n    }\n  }\n    // =====================\n  // All manifests for all repos\n  // =====================\n  static async readAllFileManifestsForAllRepos(dbWorker: Worker): Promise<ModelAssetManifest[]> {\n    const query = {\n      from: DBNames.DB_MODELS,\n      where: { type: MODEL_ASSET_TYPE_MANIFEST }\n    };\n    const results = await ModelAsset.sendWorkerRequest<any[]>(dbWorker, DBActions.QUERY, [DBNames.DB_MODELS, query]);\n    return results ? results.filter(isModelAssetManifest) : [];\n  }\n\n  // =====================\n  // File-level (Single manifest by chunkGroupId)\n  // =====================\n\n  static async readManifestByChunkGroupId(chunkGroupId: string, dbWorker: Worker): Promise<ModelAssetManifest | undefined> {\n    const query = {\n      from: DBNames.DB_MODELS,\n      where: { chunkGroupId: chunkGroupId, type: MODEL_ASSET_TYPE_MANIFEST },\n      limit: 1\n    };\n    const results = await ModelAsset.sendWorkerRequest<ModelAssetManifest[]>(dbWorker, DBActions.QUERY, [DBNames.DB_MODELS, query]);\n    return results && results.length > 0 && isModelAssetManifest(results[0]) ? results[0] : undefined;\n  }\n\n  static async createManifestByChunkGroupId(manifest: ModelAssetManifest, dbWorker: Worker): Promise<string> {\n    return ModelAsset.createManifest(manifest, dbWorker);\n  }\n\n  static async updateManifestByChunkGroupId(chunkGroupId: string, updates: Partial<Omit<ModelAssetManifest, 'id' | 'type' | 'addedAt'>>, dbWorker: Worker): Promise<void> {\n    const manifest = await ModelAsset.readManifestByChunkGroupId(chunkGroupId, dbWorker);\n    if (!manifest) throw new Error(`Manifest with chunkGroupId ${chunkGroupId} not found for update.`);\n    await ModelAsset.updateManifest(manifest.id, updates, dbWorker);\n  }\n\n  static async deleteManifestByChunkGroupId(chunkGroupId: string, dbWorker: Worker): Promise<void> {\n    const manifest = await ModelAsset.readManifestByChunkGroupId(chunkGroupId, dbWorker);\n    if (!manifest) throw new Error(`Manifest with chunkGroupId ${chunkGroupId} not found for delete.`);\n    await ModelAsset.deleteManifest(manifest.id, dbWorker);\n  }\n\n\n  // =====================\n  // Record-level (by id)\n  // =====================\n\n  static async readManifest(manifestId: string, dbWorker: Worker): Promise<ModelAssetManifest | undefined> {\n    const result = await ModelAsset.sendWorkerRequest<ModelAssetManifest | undefined>(dbWorker, DBActions.GET, [DBNames.DB_MODELS, DBNames.DB_MODELS, manifestId]);\n    return result && isModelAssetManifest(result) ? result : undefined;\n  }\n\n  static async createManifest(manifest: ModelAssetManifest, dbWorker: Worker): Promise<string> {\n    const record = {\n      ...manifest,\n      id: manifest.id || `${manifest.folder}/${manifest.fileName}:manifest`,\n      type: 'manifest',\n    };\n    return ModelAsset.sendWorkerRequest<string>(dbWorker, DBActions.PUT, [DBNames.DB_MODELS, DBNames.DB_MODELS, record]);\n  }\n\n  static async updateManifest(manifestId: string, updates: Partial<Omit<ModelAssetManifest, 'id' | 'type' | 'addedAt'>>, dbWorker: Worker): Promise<void> {\n    const existing = await ModelAsset.readManifest(manifestId, dbWorker);\n    if (!existing) throw new Error(`Manifest with id ${manifestId} not found for update.`);\n    const updatedRecord: ModelAssetManifest = {\n      ...existing,\n      ...updates,\n      id: existing.id,\n      type: MODEL_ASSET_TYPE_MANIFEST,\n      addedAt: existing.addedAt\n    };\n    await ModelAsset.sendWorkerRequest<void>(dbWorker, DBActions.PUT, [DBNames.DB_MODELS, DBNames.DB_MODELS, updatedRecord]);\n  }\n\n  static async deleteManifest(manifestId: string, dbWorker: Worker): Promise<void> {\n    await ModelAsset.sendWorkerRequest<void>(dbWorker, DBActions.DELETE, [DBNames.DB_MODELS, DBNames.DB_MODELS, manifestId]);\n  }\n\n\n\n  // =====================\n  // Chunk-level (file data)\n  // =====================\n\n  static async createChunk(chunk: ModelAssetChunk, dbWorker: Worker): Promise<string> {\n    const id = chunk.id || `${chunk.chunkGroupId}:${chunk.chunkIndex}`;\n    const record: ModelAssetChunk = {\n      ...chunk,\n      id,\n      type: MODEL_ASSET_TYPE_CHUNK,\n      addedAt: chunk.addedAt || Date.now(),\n    };\n    return ModelAsset.sendWorkerRequest<string>(dbWorker, DBActions.PUT, [DBNames.DB_MODELS, DBNames.DB_MODELS, record]);\n  }\n\n  static async readChunk(chunkId: string, dbWorker: Worker): Promise<ModelAssetChunk | undefined> {\n    const result = await ModelAsset.sendWorkerRequest<ModelAssetChunk | undefined>(dbWorker, DBActions.GET, [DBNames.DB_MODELS, DBNames.DB_MODELS, chunkId]);\n    return result && isModelAssetChunk(result) ? result : undefined;\n  }\n\n  static async updateChunk(chunkId: string, updates: Partial<Omit<ModelAssetChunk, 'id' | 'type' | 'addedAt' | 'data'>>, dbWorker: Worker): Promise<void> {\n    const existing = await ModelAsset.readChunk(chunkId, dbWorker);\n    if (!existing) throw new Error(`Chunk with id ${chunkId} not found for update.`);\n    const updatedRecord: ModelAssetChunk = {\n      ...existing,\n      ...updates,\n      id: existing.id,\n      type: MODEL_ASSET_TYPE_CHUNK,\n      addedAt: existing.addedAt,\n      data: existing.data\n    };\n    await ModelAsset.sendWorkerRequest<void>(dbWorker, DBActions.PUT, [DBNames.DB_MODELS, DBNames.DB_MODELS, updatedRecord]);\n  }\n\n  static async deleteChunk(chunkId: string, dbWorker: Worker): Promise<void> {\n    await ModelAsset.sendWorkerRequest<void>(dbWorker, DBActions.DELETE, [DBNames.DB_MODELS, DBNames.DB_MODELS, chunkId]);\n  }\n\n  static async readChunksByGroupId(chunkGroupId: string, metadataOnly: boolean, dbWorker: Worker): Promise<Partial<ModelAssetChunk>[]> {\n    const query: any = {\n      from: DBNames.DB_MODELS,\n      where: { chunkGroupId: chunkGroupId, type: MODEL_ASSET_TYPE_CHUNK },\n      orderBy: [{ field: 'chunkIndex', direction: 'asc' }]\n    };\n    if (metadataOnly) {\n      query.select = ['id', 'type', 'chunkGroupId', 'chunkIndex', 'fileName', 'folder', 'fileType', 'chunkSize', 'addedAt', 'lastAccessed', 'checksum', 'version', 'totalChunks'];\n    }\n    const results = await ModelAsset.sendWorkerRequest<ModelAssetChunk[]>(dbWorker, DBActions.QUERY, [DBNames.DB_MODELS, query]);\n    return results || [];\n  }\n\n  static async countStoredChunks(chunkGroupId: string, dbWorker: Worker): Promise<number> {\n    const query = {\n      from: DBNames.DB_MODELS,\n      select: ['id','fileName','fileType','chunkIndex','chunkSize','data'],\n      where: { chunkGroupId: chunkGroupId, type: MODEL_ASSET_TYPE_CHUNK }\n    };\n    const results = await ModelAsset.sendWorkerRequest<any[]>(dbWorker, DBActions.QUERY, [DBNames.DB_MODELS, query]);\n    return results ? results.length : 0;\n  }\n\n  static async readUniqueChunkGroupIds(folder: string, dbWorker: Worker): Promise<string[]> {\n    const query = {\n      from: DBNames.DB_MODELS,\n      select: ['chunkGroupId'],\n      where: { folder: folder }\n    };\n    const results = await ModelAsset.sendWorkerRequest<{chunkGroupId: string}[]>(dbWorker, DBActions.QUERY, [DBNames.DB_MODELS, query]);\n    if (!results) return [];\n    return Array.from(new Set(results.map(r => r.chunkGroupId).filter(Boolean)));\n  }\n\n  // =====================\n  // Utility\n  // =====================\n\n  static checksumChunkMD5(arrayBuffer: ArrayBuffer): string {\n    return SparkMD5.ArrayBuffer.hash(arrayBuffer);\n  }\n\n  private static sendWorkerRequest<T>(dbWorker: Worker, action: string, payloadArray: any[]): Promise<T> {\n    const requestId = crypto.randomUUID();\n    return new Promise<T>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success) {\n            resolve(event.data.result as T);\n          } else {\n            const err = event.data.error;\n            reject(new Error(err?.message || err || `Worker request failed for action ${action}`));\n          }\n        }\n      };\n      dbWorker.addEventListener('message', handleMessage);\n      dbWorker.postMessage({ action, payload: payloadArray, requestId });\n      setTimeout(() => {\n        dbWorker.removeEventListener('message', handleMessage);\n        reject(new Error(`Timeout for worker request action ${action}`));\n      }, 15000);\n    });\n  }\n\n  // =====================\n  // Static instance helpers (for symmetry with Chat)\n  // =====================\n\n  /**\n   * Create a new ModelAsset in the DB and return an instance\n   */\n  static async createAsset(data: ModelAssetManifest | ModelAssetChunk, dbWorker: Worker): Promise<ModelAsset> {\n    let id: string;\n    if (isModelAssetManifest(data)) {\n      id = await ModelAsset.createManifest(data, dbWorker);\n    } else if (isModelAssetChunk(data)) {\n      id = await ModelAsset.createChunk(data, dbWorker);\n    } else {\n      throw new Error(\"Unknown ModelAsset type for createAsset\");\n    }\n    // Fetch the latest from DB to ensure all fields are up to date\n    const asset = await ModelAsset.read(id, dbWorker);\n    if (!asset) throw new Error(`Failed to retrieve asset after creation (id: ${id})`);\n    return asset;\n  }\n\n  /**\n   * Read a ModelAsset (manifest or chunk) by id and return an instance\n   */\n  static async read(id: string, dbWorker: Worker): Promise<ModelAsset | undefined> {\n    const manifest = await ModelAsset.readManifest(id, dbWorker);\n    if (manifest) return new ModelAsset(manifest, dbWorker);\n    const chunk = await ModelAsset.readChunk(id, dbWorker);\n    if (chunk) return new ModelAsset(chunk, dbWorker);\n    return undefined;\n  }\n\n\n\n}","// idbSchema.ts\n\n// NOTE: All DB worker messages should use { action: ... } not { type: ... } for action property.\n\n/**\n * DB_MODELS store conventions:\n * - Every file in a model repo (ONNX and non-ONNX) gets a manifest record, even if not downloaded yet.\n * - On first model load, fetch the repo's file list and create a manifest record for each file with status 'missing'.\n * - When a file is downloaded, update its status to 'present'.\n * - If a file is found to be corrupt/unloadable, update its status to 'corrupt'.\n * - The 'status' field can be: 'missing' (not downloaded), 'present' (downloaded and valid), 'corrupt' (downloaded but unloadable), 'downloading', 'incomplete', 'complete', etc.\n * - The 'fileType' field distinguishes ONNX, JSON, and other file types.\n * - (Optional) The 'variant' field can be used to store quantization/variant info parsed from the filename (e.g., 'int4', 'fp16').\n * - This enables efficient dropdown population and status display for all quantizations/variants.\n */\n\nexport const DBNames = Object.freeze({\n  DB_USER_DATA: 'TabAgentUserData',\n  DB_LOGS: 'TabAgentLogs',\n  DB_MODELS: 'TabAgentModels',\n  DB_CHATS: 'TabAgentChats',\n  DB_MESSAGES: 'TabAgentMessages',\n  DB_EMBEDDINGS: 'TabAgentEmbeddings',\n  DB_KNOWLEDGE_GRAPH_NODES: 'TabAgentKnowledgeGraphNodes',\n  DB_KNOWLEDGE_GRAPH_EDGES: 'TabAgentKnowledgeGraphEdges',\n  DB_CHAT_SUMMARIES: 'TabAgentChatSummaries',\n  DB_ATTACHMENTS: 'TabAgentAttachments',\n});\n\nexport enum NodeType {\n  Chat = 'chat',\n  Message = 'message',\n  Embedding = 'embedding',\n  Attachment = 'attachment',\n  Summary = 'summary',\n  \n}\n\nexport enum LogLevel {\n  Info = 'info',\n  Log = 'log',\n  Warn = 'warn',\n  Error = 'error',\n  Debug = 'debug',\n}\n\nexport const schema = {\n  [DBNames.DB_USER_DATA]: {\n    version: 2,\n    stores: {\n      [DBNames.DB_CHATS]: {\n        keyPath: 'id',\n        indexes: [ { name: 'chat_timestamp', keyPath: 'chat_timestamp' }, { name: 'user_id', keyPath: 'user_id' } ]\n      },\n      [DBNames.DB_MESSAGES]: {\n        keyPath: 'id',\n        indexes: [ { name: 'chat_id', keyPath: 'chat_id' }, { name: 'timestamp', keyPath: 'timestamp' } ]\n      },\n      [DBNames.DB_EMBEDDINGS]: {\n        keyPath: 'id',\n        indexes: [ { name: 'input', keyPath: 'input', unique: false }, { name: 'model', keyPath: 'model', unique: false } ]\n      },\n      [DBNames.DB_KNOWLEDGE_GRAPH_NODES]: {\n        keyPath: 'id',\n        indexes: [ { name: 'type', keyPath: 'type', unique: false }, { name: 'label', keyPath: 'label', unique: false }, { name: 'embedding_id', keyPath: 'embedding_id', unique: false } ]\n      },\n      [DBNames.DB_KNOWLEDGE_GRAPH_EDGES]: {\n        keyPath: 'id',\n        indexes: [ { name: 'from_node_id', keyPath: 'from_node_id', unique: false }, { name: 'to_node_id', keyPath: 'to_node_id', unique: false }, { name: 'edge_type', keyPath: 'edge_type', unique: false } ]\n      },\n      [DBNames.DB_ATTACHMENTS]: {\n        keyPath: 'id',\n        indexes: [ { name: 'message_id', keyPath: 'message_id' } ]\n      },\n      [DBNames.DB_CHAT_SUMMARIES]: {\n        keyPath: 'id',\n        indexes: [ { name: 'chat_id', keyPath: 'chat_id' }, { name: 'created_at', keyPath: 'created_at'}]\n      },\n    }\n  },\n  [DBNames.DB_LOGS]: {\n    version: 1,\n    stores: { [DBNames.DB_LOGS]: { keyPath: 'id', indexes: [ { name: 'timestamp', keyPath: 'timestamp' }, { name: 'level', keyPath: 'level' } ] } }\n  },\n  [DBNames.DB_MODELS]: {\n    version: 2, // bump version if needed\n    stores: {\n      [DBNames.DB_MODELS]: {\n        keyPath: 'id',\n        indexes: [\n          { name: 'chunkGroupId', keyPath: 'chunkGroupId' }, // Group all chunks/manifests for a file\n          { name: 'type', keyPath: 'type' }, // 'manifest' or 'chunk'\n          { name: 'chunkIndex', keyPath: 'chunkIndex' }, // For ordered chunk retrieval\n          { name: 'fileName', keyPath: 'fileName' }, // File name\n          { name: 'folder', keyPath: 'folder' }, // Folder or model id\n          { name: 'fileType', keyPath: 'fileType' }, // File type (e.g., onnx, json)\n          { name: 'addedAt', keyPath: 'addedAt' }, // For recency/cleanup\n          { name: 'lastAccessed', keyPath: 'lastAccessed' }, // For LRU/cleanup\n          { name: 'status', keyPath: 'status' }, // For manifest status (see above)\n          { name: 'totalChunks', keyPath: 'totalChunks' }, // For manifest: total number of chunks\n          { name: 'size', keyPath: 'size' }, // For manifest: total file size\n          { name: 'chunkSize', keyPath: 'chunkSize' }, // For chunk: size of this chunk\n          { name: 'checksum', keyPath: 'checksum' }, // For chunk or manifest integrity\n          { name: 'version', keyPath: 'version' }, // For file versioning\n          { name: 'variant', keyPath: 'variant' }, // For quantization/variant info\n          { name: 'folder_type', keyPath: ['folder', 'type'] }, // Compound index for efficient manifest queries\n          // Add more as needed\n        ]\n      }\n    }\n  }\n};\n\nexport const dbChannel = new BroadcastChannel('tabagent-db');","// idbSummary.ts\n\nimport { BaseCRUD } from \"./idbBase\";\nimport { DBNames } from \"./idbSchema\";\nimport { DBActions } from \"./dbActions\";\n\nexport class Summary extends BaseCRUD<Summary> {\n  public chat_id: string;\n  public summary_text: string;\n  public message_ids: string[];\n  public parent_summary_id: string | null = null;\n  public start_message_id: string | null = null;\n  public end_message_id: string | null = null;\n  public start_timestamp?: number;\n  public end_timestamp?: number;\n  public token_count?: number;\n  public metadata_json?: string;\n  public created_at: number;\n  public updated_at: number;\n  public embedding_id?: string;\n\n  constructor(\n    id: string,\n    chat_id: string,\n    summary_text: string,\n    dbWorker: Worker,\n    created_at: number,\n    updated_at: number,\n    options: {\n      message_ids?: string[];\n      parent_summary_id?: string | null;\n      start_message_id?: string | null;\n      end_message_id?: string | null;\n      start_timestamp?: number;\n      end_timestamp?: number;\n      token_count?: number;\n      metadata?: Record<string, any>;\n      embedding_id?: string;\n    } = {}\n  ) {\n    super(id, summary_text, dbWorker);\n    this.chat_id = chat_id;\n    this.summary_text = summary_text;\n    this.created_at = created_at;\n    this.updated_at = updated_at;\n    this.message_ids = options.message_ids || [];\n    this.parent_summary_id = options.parent_summary_id === undefined ? null : options.parent_summary_id;\n    this.start_message_id = options.start_message_id === undefined ? null : options.start_message_id;\n    this.end_message_id = options.end_message_id === undefined ? null : options.end_message_id;\n    this.start_timestamp = options.start_timestamp;\n    this.end_timestamp = options.end_timestamp;\n    this.token_count = options.token_count;\n    this.metadata_json = options.metadata ? JSON.stringify(options.metadata) : undefined;\n    this.embedding_id = options.embedding_id;\n  }\n\n  static async create(\n    chat_id: string,\n    summary_text: string,\n    dbWorker: Worker,\n    options: {\n      id?: string;\n      message_ids?: string[];\n      parent_summary_id?: string | null;\n      start_message_id?: string | null;\n      end_message_id?: string | null;\n      start_timestamp?: number;\n      end_timestamp?: number;\n      token_count?: number;\n      metadata?: Record<string, any>;\n      embedding_id?: string;\n    } = {}\n  ): Promise<string> {\n    const id = options.id || crypto.randomUUID();\n    const now = Date.now();\n    const summaryInstance = new Summary(id, chat_id, summary_text, dbWorker, now, now, options);\n    return summaryInstance.saveToDB();\n  }\n\n  get metadata(): Record<string, any> | undefined {\n    try {\n        return this.metadata_json ? JSON.parse(this.metadata_json) : undefined;\n    } catch (e) {\n        console.error(`Failed to parse summary metadata_json for summary ${this.id}:`, e);\n        return undefined;\n    }\n  }\n\n  set metadata(data: Record<string, any> | undefined) {\n    this.metadata_json = data ? JSON.stringify(data) : undefined;\n  }\n\n  static async read(id: string, dbWorker: Worker): Promise<Summary | undefined> {\n    const requestId = crypto.randomUUID();\n    return new Promise<Summary | undefined>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && event.data.result) {\n            const sd = event.data.result;\n            resolve(new Summary(sd.id, sd.chat_id, sd.summary_text, dbWorker, sd.created_at, sd.updated_at,\n              { message_ids: sd.message_ids, parent_summary_id: sd.parent_summary_id, start_message_id: sd.start_message_id, end_message_id: sd.end_message_id, start_timestamp: sd.start_timestamp, end_timestamp: sd.end_timestamp, token_count: sd.token_count, metadata: sd.metadata_json ? JSON.parse(sd.metadata_json) : undefined, embedding_id: sd.embedding_id }\n            ));\n          } else if (event.data.success && !event.data.result) {\n            resolve(undefined);\n          } else {\n            reject(new Error(event.data.error || `Failed to get summary (id: ${id})`));\n          }\n        }\n      };\n      dbWorker.addEventListener('message', handleMessage);\n      dbWorker.postMessage({ action: DBActions.GET, payload: [DBNames.DB_USER_DATA, DBNames.DB_CHAT_SUMMARIES, id], requestId });\n      setTimeout(() => { dbWorker.removeEventListener('message', handleMessage); reject(new Error(`Timeout getting summary ${id}`)); }, 5000);\n    });\n  }\n\n  async update(updates: Partial<Omit<Summary, 'dbWorker' | 'id' | 'chat_id' | 'created_at'>>): Promise<void> {\n    const { id, chat_id, created_at, dbWorker, ...allowedUpdates } = updates as any;\n     if (allowedUpdates.metadata && typeof allowedUpdates.metadata === 'object') {\n        this.metadata = allowedUpdates.metadata; delete allowedUpdates.metadata;\n    }\n    Object.assign(this, allowedUpdates);\n    await this.saveToDB();\n  }\n\n  async delete(): Promise<void> {\n    const requestId = crypto.randomUUID();\n    return new Promise<void>((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success) { resolve(); }\n          else { reject(new Error(event.data.error || `Failed to delete summary (id: ${this.id})`)); }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({ action: DBActions.DELETE, payload: [DBNames.DB_USER_DATA, DBNames.DB_CHAT_SUMMARIES, this.id], requestId });\n      setTimeout(() => { this.dbWorker.removeEventListener('message', handleMessage); reject(new Error(`Timeout deleting summary ${this.id}`)); }, 5000);\n    });\n  }\n\n  async saveToDB(): Promise<string> {\n    const requestId = crypto.randomUUID();\n    const now = Date.now();\n    this.updated_at = now;\n    if (!this.created_at) { this.created_at = now; }\n    const { dbWorker, ...summaryData } = this;\n    return new Promise((resolve, reject) => {\n      const handleMessage = (event: MessageEvent) => {\n        if (event.data && event.data.requestId === requestId) {\n          this.dbWorker.removeEventListener('message', handleMessage);\n          if (event.data.success && typeof event.data.result === 'string') {\n            resolve(event.data.result);\n          } else if (event.data.success) {\n            reject(new Error('Summary saved, but worker did not return valid ID.'));\n          } else {\n            reject(new Error(event.data.error || 'Failed to save summary'));\n          }\n        }\n      };\n      this.dbWorker.addEventListener('message', handleMessage);\n      this.dbWorker.postMessage({\n        action: DBActions.PUT,\n        payload: [DBNames.DB_USER_DATA, DBNames.DB_CHAT_SUMMARIES, summaryData],\n        requestId\n      });\n      setTimeout(() => { this.dbWorker.removeEventListener('message', handleMessage); reject(new Error(`Timeout saving summary ${this.id}`)); }, 5000);\n    });\n  }\n}","import { showError } from '../Utilities/generalUtils';\nimport { \n    DbMessagesUpdatedNotification, \n    DbSessionUpdatedNotification, \n    DbGetSessionRequest\n} from '../DB/dbEvents';\nimport { MessageSenderTypes } from '../events/eventNames';\nimport { dbChannel } from '../DB/idbSchema';\nimport browser from 'webextension-polyfill';\n\nlet chatBodyElement: HTMLElement | null = null;\nlet currentSessionId: string | null = null;\nlet requestDbAndWaitFunc: ((request: any) => Promise<any>) | null = null;\nlet observer: MutationObserver | null = null; // MutationObserver\nconst TEMP_MESSAGE_CLASS = 'temp-status-message'; // Class for temporary messages\n\nfunction handleMessagesUpdate(notification: any) {\n    console.log('[ChatRenderer handleMessagesUpdate] handleMessagesUpdate received notification:', JSON.parse(JSON.stringify(notification)));\n    if (!notification || !notification.sessionId || !notification.payload) {\n        console.warn('[ChatRenderer][DEBUG] handleMessagesUpdate: Invalid or incomplete notification received. Bailing out.', { notification });\n        return;\n    }\n    \n    if (notification.sessionId === currentSessionId) {\n        console.log(`[ChatRenderer handleMessagesUpdate] Received message update notification for active session ${currentSessionId}. Rendering.`);\n        \n        let messages = notification.payload.messages;\n        if (!Array.isArray(messages)) {\n            console.error('[ChatRenderer handleMessagesUpdate] ERROR: notification.payload.messages is not an array! Got:', notification.payload);\n            return;\n        }\n        \n        console.log(`[ChatRenderer handleMessagesUpdate] Messages array received:`, JSON.stringify(messages));\n        if (!chatBodyElement) return;\n        chatBodyElement.innerHTML = '';\n        if (messages.length === 0) {\n            console.log(`[ChatRenderer handleMessagesUpdate] Active session ${currentSessionId} has no messages. Displaying welcome.`);\n            displayWelcomeMessage();\n        } else {\n            messages.forEach((msg: any) => renderSingleMessage(msg));\n            scrollToBottom();\n        }\n    }\n}\n\nfunction handleSessionMetadataUpdate(notification: any) {\n    if (!notification || !notification.sessionId || !notification.payload?.session) return;\n\n    if (notification.sessionId === currentSessionId) {\n        const updatedSessionData = notification.payload.session;\n        console.log(`[ChatRenderer] Received metadata update for active session ${currentSessionId}. New Title: ${updatedSessionData.title}, Starred: ${updatedSessionData.isStarred}`);\n        \n        updateChatHeader(updatedSessionData);\n    }\n}\n\ndocument.addEventListener(DbMessagesUpdatedNotification.type, (e: Event) => {\n    const customEvent = e as CustomEvent;\n    handleMessagesUpdate(customEvent.detail);\n});\n\ndocument.addEventListener(DbSessionUpdatedNotification.type, (e: Event) => {\n    const customEvent = e as CustomEvent;\n    handleSessionMetadataUpdate(customEvent.detail);\n});\n\ndbChannel.onmessage = (event: MessageEvent) => {\n    console.log('[ChatRenderer] dbChannel event received:', event.data);\n    const message = event.data;\n    const payloadKeys = message && message.payload ? Object.keys(message.payload) : [];\n    const sessionId = message.sessionId || (message.payload && message.payload.session && message.payload.session.id) || 'N/A';\n    console.log(`[ChatRenderer] dbChannel.onmessage: type=${message.type}, sessionId=${sessionId}, payloadKeys=[${payloadKeys.join(', ')}]`);\n    const type = message?.type;\n    if (type === DbMessagesUpdatedNotification.type) {\n        handleMessagesUpdate(message.payload);\n    }\n    if (type === DbSessionUpdatedNotification.type) {\n        handleSessionMetadataUpdate(message.payload);\n    }\n};\n\n// If browser.runtime.onMessage is used for notifications, add a similar log\nif (typeof browser !== 'undefined' && browser.runtime && browser.runtime.onMessage) {\n    browser.runtime.onMessage.addListener((message: any) => {\n        const payloadKeys = message && message.payload ? Object.keys(message.payload) : [];\n        const sessionId = message.sessionId || (message.payload && message.payload.session && message.payload.session.id) || 'N/A';\n        console.log(`[ChatRenderer] browser.runtime.onMessage: type=${message.type}, sessionId=${sessionId}, payloadKeys=[${payloadKeys.join(', ')}]`);\n        const type = message?.type;\n        if (type === DbMessagesUpdatedNotification.type) {\n            handleMessagesUpdate(message.payload);\n        }\n        if (type === DbSessionUpdatedNotification.type) {\n            handleSessionMetadataUpdate(message.payload);\n        }\n    });\n}\n\nexport function initializeRenderer(chatBody: HTMLElement, requestDbFunc: (request: any) => Promise<any>) {\n    if (!chatBody) {\n        console.error(\"[ChatRenderer] chatBody element is required for initialization.\");\n        return;\n    }\n    if (!requestDbFunc) {\n        console.error(\"[ChatRenderer] requestDbAndWait function is required for initialization.\");\n        return;\n    }\n    chatBodyElement = chatBody;\n    requestDbAndWaitFunc = requestDbFunc;\n    console.log(\"[ChatRenderer] Initialized with chat body element and DB request function.\");\n    initializeObserver();\n}\n\nexport function setActiveSessionId(sessionId: string | null) {\n    console.log(`[ChatRenderer] Setting active session ID to: ${sessionId}`);\n    currentSessionId = sessionId;\n    if (chatBodyElement) {\n        chatBodyElement.innerHTML = '';\n    }\n    if (!sessionId) {\n        displayWelcomeMessage();\n    } else {\n        console.log(`[ChatRenderer] Proactively loading messages for new session: ${sessionId}`);\n        loadAndRenderMessages(sessionId);\n    }\n}\n\nexport function displayWelcomeMessage() {\n    if (!chatBodyElement) return;\n    chatBodyElement.innerHTML = '';\n    const welcomeMsg = {\n        messageId: 'welcome-msg',\n        sender: 'system',\n        text: 'Welcome to Tab Agent! Ask me anything or paste a URL to scrape.',\n        timestamp: Date.now(),\n        isLoading: false\n    };\n    renderSingleMessage(welcomeMsg);\n}\n\nexport function scrollToBottom() {\n    if (chatBodyElement) {\n        requestAnimationFrame(() => {\n            if (chatBodyElement) {\n                chatBodyElement.scrollTop = chatBodyElement.scrollHeight;\n            }\n        });\n    }\n}\n\nasync function loadAndRenderMessages(sessionId: string | null) {\n    if (!requestDbAndWaitFunc) {\n        console.error(\"[ChatRenderer] Cannot load messages: requestDbAndWait function not available.\");\n        if (chatBodyElement) chatBodyElement.innerHTML = '<div class=\"p-4 text-red-500\">Error: Cannot load chat messages.</div>';\n        return;\n    }\n    if (!sessionId) {\n        console.warn(\"[ChatRenderer] loadAndRenderMessages called with null sessionId. Displaying welcome.\");\n        displayWelcomeMessage();\n        return;\n    }\n\n    console.log(`[ChatRenderer] Requesting messages for session ${sessionId}...`);\n    try {\n        const request = new DbGetSessionRequest(sessionId);\n        const sessionData = await requestDbAndWaitFunc(request);\n\n        if (sessionData && sessionData.messages) {\n            console.log(`[ChatRenderer] Received ${sessionData.messages.length} messages for ${sessionId}. Rendering.`);\n            if (chatBodyElement) chatBodyElement.innerHTML = '';\n            if (sessionData.messages.length === 0) {\n                displayWelcomeMessage();\n            } else {\n                sessionData.messages.forEach((msg: any) => renderSingleMessage(msg));\n                scrollToBottom();\n            }\n        } else {\n            console.warn(`[ChatRenderer] No messages found in session data for ${sessionId}. Displaying welcome.`, sessionData);\n            displayWelcomeMessage();\n        }\n    } catch (error: unknown) {\n        const errMsg = error instanceof Error ? error.message : String(error);\n        showError(`Failed to load chat: ${errMsg}`);\n        if (chatBodyElement) chatBodyElement.innerHTML = `<div class=\"p-4 text-red-500\">Failed to load chat: ${errMsg}</div>`;\n    }\n}\n\nfunction updateChatHeader(sessionData: any) {\n    if (!sessionData) {\n        console.log('[ChatRenderer] Clearing chat header (no active session).');\n    } else {\n        console.log(`[ChatRenderer] Updating chat header for ${sessionData.id}. Title: ${sessionData.title}, Starred: ${sessionData.isStarred}`);\n    }\n}\n\nfunction renderSingleMessage(msg: any) {\n    if (!chatBodyElement) return;\n\n    console.log('[ChatRenderer] renderSingleMessage: msg object:', JSON.parse(JSON.stringify(msg)));\n\n    // Prefer content over text for display\n    let displayContent = (typeof msg.content === 'string' && msg.content.trim() !== '') ? msg.content : msg.text;\n    console.log(`[ChatRenderer] renderSingleMessage: Using displayContent:`, displayContent, ' (from', (msg.content ? 'content' : 'text'), ')');\n\n    // Parse metadata for type detection\n    let meta: any = {};\n    try { meta = typeof msg.metadata === 'string' ? JSON.parse(msg.metadata) : (msg.metadata || {}); } catch {\n        console.error('[ChatRenderer] Error parsing metadata for message:', msg.messageId);\n    }\n    const extraction = meta.extraction;\n    const isPageExtractor = (meta.extractionType === 'PageExtractor') || (extraction && extraction.__type === 'PageExtractor');\n\n    const messageDiv = document.createElement('div');\n    messageDiv.classList.add('flex', 'mb-2');\n    messageDiv.id = msg.messageId || `msg-fallback-${Date.now()}-${Math.random().toString(36).substring(2)}`;\n    \n    const bubbleDiv = document.createElement('div');\n    bubbleDiv.classList.add('rounded-lg', 'break-words', 'relative', 'group', 'p-2', 'min-w-0');\n\n    if (msg.sender !== MessageSenderTypes.USER) {\n        bubbleDiv.classList.add('max-w-4xl');\n    }\n\n    // Actions container (copy/download) as before\n    const actionsContainer = document.createElement('div');\n    actionsContainer.className = 'actions-container absolute top-1 right-1 transition-opacity flex space-x-1 z-10';\n\n    const copyButton = document.createElement('button');\n    copyButton.innerHTML = '<img src=\"icons/copy.svg\" alt=\"Copy\" class=\"w-4 h-4\">';\n    copyButton.title = 'Copy message text';\n    copyButton.onclick = () => {\n        let textToCopy = displayContent;\n        if (msg.metadata?.type === 'scrape_result_full' && msg.metadata.scrapeData) {\n            textToCopy = JSON.stringify(msg.metadata.scrapeData, null, 2);\n        }\n        navigator.clipboard.writeText(textToCopy).then(() => {\n            window.originalUITooltipController?.showTooltip(copyButton, 'Copied!');\n        }).catch((err: any) => console.error('Failed to copy text: ', err));\n    };\n    actionsContainer.appendChild(copyButton);\n\n    if (msg.metadata?.type === 'scrape_result_full' && msg.metadata.scrapeData) {\n        const downloadButton = document.createElement('button');\n        downloadButton.innerHTML = '<img src=\"icons/download.svg\" alt=\"Download\" class=\"w-4 h-4\">';\n        downloadButton.title = 'Download scrape data as JSON';\n        downloadButton.onclick = () => {\n            console.log('Download clicked for:', msg.metadata.scrapeData); // Placeholder\n            window.originalUITooltipController?.showTooltip(downloadButton, 'Download (placeholder)');\n        };\n        actionsContainer.appendChild(downloadButton);\n    }\n    // IMPORTANT: Append actionsContainer AFTER main content is set, or ensure it's not overwritten.\n    // For now, we will append it after other content elements are added to bubbleDiv.\n\n    let contentToParse = displayContent || '';\n    let specialHeaderHTML = '';\n\n    // --- Special handling for PageExtractor results ---\n    if (isPageExtractor && extraction) {\n        specialHeaderHTML = `<div class=\"scrape-header p-2 rounded-t-md bg-gray-200 dark:bg-gray-700 border-b border-gray-300 dark:border-gray-600 mb-1\"><h4 class=\"text-sm font-semibold text-gray-700 dark:text-gray-300\">Scraped Page Extraction</h4><p class=\"text-xs text-gray-500 dark:text-gray-400 break-all\">URL: ${extraction.url || 'N/A'}</p></div>`;\n        contentToParse = '```json\\n' + JSON.stringify(extraction, null, 2) + '\\n```';\n        console.log('[ChatRenderer] Rendering PageExtractor JSON:', contentToParse);\n    } else if (displayContent) {\n        console.log('[ChatRenderer] Preparing to parse regular message. Input to marked:', contentToParse);\n    }\n\n    console.log(`[ChatRenderer] Before style application: msg.sender = ${msg.sender}`);\n    // Apply sender-specific alignment and base bubble styling\n    if (msg.isLoading) {\n        messageDiv.classList.add('justify-start');\n        bubbleDiv.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-gray-500', 'dark:text-gray-400', 'italic', 'border', 'border-gray-300', 'dark:border-gray-500');\n    } else if (msg.sender === MessageSenderTypes.USER) {\n        messageDiv.classList.add('justify-end', 'min-w-0');\n        bubbleDiv.classList.add(\n            'bg-[rgba(236,253,245,0.51)]', // very subtle green tint\n            'dark:bg-[rgba(20,83,45,0.12)]', // subtle dark green tint for dark mode\n            'text-green-900',\n            'dark:text-green-100',\n            'border',\n            'border-green-100',\n            'dark:border-green-900'\n        );\n    } else if (msg.sender === 'error') {\n        messageDiv.classList.add('justify-start');\n        bubbleDiv.classList.add(\n            'bg-[rgba(254,226,226,0.37)]', // subtle red tint (light)\n            'dark:bg-[rgba(120,20,20,0.12)]', // subtle red tint (dark)\n            'text-red-700',\n            'dark:text-red-200',\n            'border',\n            'border-red-200',\n            'dark:border-red-700'\n        );\n    } else if (msg.sender === 'system') { \n        messageDiv.classList.add('justify-start');\n        bubbleDiv.classList.add(\n            'bg-[rgba(219,234,254,0.5)]', // subtle blue tint\n            'dark:bg-[rgba(30,41,59,0.2)]', // subtle dark blue/gray for dark mode\n            'text-blue-900',\n            'dark:text-blue-100',\n            'border',\n            'border-blue-100',\n            'dark:border-blue-900'\n        );\n    } else { // Default for 'ai' or other non-user/non-error/non-system senders\n        messageDiv.classList.add('justify-start');\n        bubbleDiv.classList.add('bg-gray-100', 'dark:bg-gray-700', 'text-gray-900', 'dark:text-gray-100', 'border', 'border-gray-300', 'dark:border-gray-600');\n    }\n    console.log('[ChatRenderer] messageDiv classes:', messageDiv.className);\n    console.log('[ChatRenderer] bubbleDiv classes:', bubbleDiv.className);\n\n    // --- HEADER BAR WITH FOLDOUT AND ACTIONS ---\n    const headerBar = document.createElement('div');\n    headerBar.className = 'bubble-header flex items-center justify-between px-2 py-0.5 min-w-[300px] w-full bg-[rgba(200,200,200,0.18)] dark:bg-[rgba(50,50,50,0.28)] rounded-t-lg border-b border-gray-200 dark:border-gray-700 transition-all duration-150 group';\n    headerBar.onmouseenter = () => headerBar.classList.add('bg-[rgba(200,200,200,0.28)]', 'dark:bg-[rgba(50,50,50,0.38)]');\n    headerBar.onmouseleave = () => headerBar.classList.remove('bg-[rgba(200,200,200,0.28)]', 'dark:bg-[rgba(50,50,50,0.38)]');\n\n    // Foldout button with SVG chevron\n    const foldoutBtn = document.createElement('button');\n    foldoutBtn.className = 'toggle-foldout mr-2 flex items-center justify-center w-5 h-5 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition cursor-pointer';\n    foldoutBtn.title = 'Expand/collapse message';\n    foldoutBtn.innerHTML = `<svg class=\"chevron-icon transition-transform duration-150\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M6 8L10 12L14 8\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/></svg>`;\n    headerBar.appendChild(foldoutBtn);\n\n    // Actions container (already created above)\n    actionsContainer.classList.add('ml-auto', 'flex', 'items-center', 'space-x-1');\n    headerBar.appendChild(actionsContainer);\n\n    // --- MAIN CONTENT (foldable) ---\n    const mainContentDiv = document.createElement('div');\n    mainContentDiv.className = 'message-main-content';\n\n    if (window.marked && window.marked.parse) {\n        try {\n            const localRenderer = new window.marked.Renderer();\n\n            const escapeHtmlEntities = (str: string): string => {\n                if (typeof str !== 'string') return '';\n                return str.replace(/[&<>\"'/]/g, function (match: string): string {\n                    return {\n                        '&': '&amp;',\n                        '<': '&lt;',\n                        '>': '&gt;',\n                        '\"': '&quot;',\n                        \"'\": '&#39;',\n                        '/': '&#x2F;'\n                    }[match] || '';\n                });\n            };\n\n            // ONLY override the .code() method for now\n            localRenderer.code = (tokenOrCode: any, languageInfoString: string, isEscaped: boolean) => {\n                // Log what we receive\n                console.log('[ChatRenderer Custom Code] Received arguments:', \n                    {\n                        tokenOrCode_type: typeof tokenOrCode,\n                        tokenOrCode_value: JSON.parse(JSON.stringify(tokenOrCode)), // Deep copy for logging\n                        languageInfoString_type: typeof languageInfoString,\n                        languageInfoString_value: languageInfoString,\n                        isEscaped_value: isEscaped\n                    }\n                );\n\n                let actualCodeString = '';\n                let actualLanguageString = languageInfoString || '';\n                // let actuallyEscaped = isEscaped; // Not directly used with hljs which expects raw code\n\n                if (typeof tokenOrCode === 'object' && tokenOrCode !== null && typeof tokenOrCode.text === 'string') {\n                    actualCodeString = tokenOrCode.text;\n                    actualLanguageString = tokenOrCode.lang || actualLanguageString; \n                    // actuallyEscaped = typeof tokenOrCode.escaped === 'boolean' ? tokenOrCode.escaped : isEscaped;\n                    console.log('[ChatRenderer Custom Code] Interpreted as token object. Using token.text and token.lang.');\n                } else if (typeof tokenOrCode === 'string') {\n                    actualCodeString = tokenOrCode;\n                    console.log('[ChatRenderer Custom Code] Interpreted as direct code string.');\n                } else {\n                    console.warn('[ChatRenderer Custom Code] Received unexpected type for code argument:', tokenOrCode);\n                    actualCodeString = '[Error: Unexpected code content type]';\n                }\n                \n                // Initialize safeLanguage and langClass based on the *provided* language hint\n                let languageHint = actualLanguageString.trim();\n                let safeLanguage = escapeHtmlEntities(languageHint || 'plaintext');\n                let langClass = `language-${safeLanguage}`;\n                \n                const copyIcon = '<img src=\"icons/copy.svg\" alt=\"Copy code\" class=\"w-4 h-4\">'; \n                const downloadIcon = '<img src=\"icons/download.svg\" alt=\"Download code\" class=\"w-4 h-4\">';\n                \n                const encodedCodeForAttr = encodeURIComponent(actualCodeString);\n                \n                let highlightedCodeForDisplay = '';\n                if (window.hljs) {\n                    // highlight expects raw, unescaped code.\n                    // actualCodeString should be raw based on Marked default behavior without sanitize: true\n                    if (actualLanguageString && window.hljs.getLanguage(actualLanguageString)) {\n                        try {\n                            highlightedCodeForDisplay = window.hljs.highlight(actualCodeString, { language: actualLanguageString, ignoreIllegals: true }).value;\n                            console.log('[ChatRenderer Custom Code] Highlighted with specified language:', actualLanguageString);\n                        } catch (e) {\n                            console.error('[ChatRenderer Custom Code] hljs.highlight error:', e);\n                            highlightedCodeForDisplay = escapeHtmlEntities(actualCodeString);\n                        }\n                    } else {\n                        try {\n                            const autoResult = window.hljs.highlightAuto(actualCodeString);\n                            highlightedCodeForDisplay = autoResult.value;\n                            const detectedLang = autoResult.language;\n                            console.log('[ChatRenderer Custom Code] Highlighted with auto-detection. Detected:', detectedLang);\n\n                            if (detectedLang) { // If auto-detection was successful\n                                safeLanguage = escapeHtmlEntities(detectedLang);\n                                langClass = `language-${safeLanguage}`; // Update based on detected language\n                            }\n                        } catch (e) {\n                            console.error('[ChatRenderer Custom Code] hljs.highlightAuto error:', e);\n                            highlightedCodeForDisplay = escapeHtmlEntities(actualCodeString);\n                        }\n                    }\n                } else {\n                    console.warn('[ChatRenderer Custom Code] window.hljs not found. Falling back to escaped code.');\n                    highlightedCodeForDisplay = escapeHtmlEntities(actualCodeString);\n                }\n\n                return `\n<div class=\"code-block-wrapper bg-gray-800 dark:bg-gray-900 rounded-md shadow-md my-2 text-sm\">\n    <div class=\"code-block-header flex justify-between items-center px-3 py-1.5 bg-gray-700 dark:bg-gray-800 rounded-t-md border-b border-gray-600 dark:border-gray-700\">\n        <span class=\"code-language text-xs text-gray-300 dark:text-gray-400 font-semibold\">${safeLanguage}</span>\n        <div class=\"code-actions flex space-x-2\">\n            <button class=\"code-action-copy-snippet p-1 rounded text-gray-300 hover:bg-gray-600 dark:hover:bg-gray-700\" title=\"Copy code\" data-code=\"${encodedCodeForAttr}\">\n                ${copyIcon}\n            </button>\n            <button class=\"code-action-download-snippet p-1 rounded text-gray-300 hover:bg-gray-600 dark:hover:bg-gray-700\" title=\"Download ${safeLanguage} snippet\" data-code=\"${encodedCodeForAttr}\" data-lang=\"${safeLanguage}\">\n                ${downloadIcon}\n            </button>\n        </div>\n    </div>\n    <pre class=\"p-3 overflow-x-auto\"><code class=\"${langClass}\">${highlightedCodeForDisplay}</code></pre>\n</div>`;\n            };\n\n            // DO NOT override .paragraph, .list, .listitem, .heading for this test.\n            // Let Marked use its defaults for these.\n\n            const parsedContent = window.marked.parse(contentToParse || '', {\n                renderer: localRenderer, // Use the renderer with only .code overridden\n                gfm: true, \n                breaks: true \n            });\n            console.log('[ChatRenderer Minimal Custom Marked.parse() output:]', parsedContent);\n            mainContentDiv.innerHTML = parsedContent;\n            if (window.hljs) {\n                console.log('[ChatRenderer] Content set. highlight should have processed via Marked config.');\n            }\n        } catch (e) {\n            console.error('Error during marked.parse:', e);\n            mainContentDiv.textContent = contentToParse || ''; \n        }\n    } else {\n        console.warn('Marked not available. Falling back to textContent.');\n        mainContentDiv.textContent = contentToParse || '';\n    }\n\n    // FOLDOUT LOGIC\n    let expanded = true;\n    foldoutBtn.onclick = () => {\n        expanded = !expanded;\n        mainContentDiv.style.display = expanded ? '' : 'none';\n        // Rotate chevron\n        const svg = foldoutBtn.querySelector('.chevron-icon') as HTMLElement | null;\n        if (svg) svg.style.transform = expanded ? 'rotate(0deg)' : 'rotate(-90deg)';\n    };\n    // Default: expanded\n    mainContentDiv.style.display = '';\n\n    // --- ASSEMBLE BUBBLE ---\n    bubbleDiv.innerHTML = '';\n    bubbleDiv.appendChild(headerBar);\n    if (specialHeaderHTML) {\n        const headerDiv = document.createElement('div');\n        headerDiv.innerHTML = specialHeaderHTML;\n        bubbleDiv.appendChild(headerDiv);\n    }\n    bubbleDiv.appendChild(mainContentDiv);\n    bubbleDiv.appendChild(actionsContainer); // Append actions container LAST to ensure it's not overwritten and is on top (due to z-10)\n    \n    messageDiv.appendChild(bubbleDiv);\n    chatBodyElement.appendChild(messageDiv);\n    scrollToBottom();\n    return messageDiv;\n}\n\n// --- NEW: Functions for Temporary Messages ---\n\n/**\n * Renders a temporary status message directly to the chat body.\n * These messages are not saved to the database.\n * @param {string} type - 'system', 'success', or 'error'\n * @param {string} text - The message content.\n */\nexport function renderTemporaryMessage(type: string, text: string) {\n    if (!chatBodyElement) return;\n\n    // Only log non-system temporary messages to reduce noise\n    if (type !== 'system') {\n        console.log(`[ChatRenderer] Rendering temporary message (${type}): ${text}`);\n    }\n    const messageDiv = document.createElement('div');\n    messageDiv.classList.add('message', `message-${type}`, TEMP_MESSAGE_CLASS);\n\n    // Basic styling (can be enhanced in CSS)\n    messageDiv.style.padding = '8px 12px';\n    messageDiv.style.borderRadius = '8px';\n    messageDiv.style.marginBottom = '10px';\n    messageDiv.style.maxWidth = '90%';\n    messageDiv.style.alignSelf = 'center'; // Center align system/error messages\n    messageDiv.style.backgroundColor = type === 'error' ? '#fee2e2' : (type === 'success' ? '#dcfce7' : '#f3f4f6'); // Example colors\n    messageDiv.style.color = type === 'error' ? '#b91c1c' : (type === 'success' ? '#166534' : '#374151'); // Example colors\n\n    // Handle dark mode styling (basic example)\n    if (document.documentElement.classList.contains('dark')) {\n        messageDiv.style.backgroundColor = type === 'error' ? '#450a0a' : (type === 'success' ? '#14532d' : '#374151');\n        messageDiv.style.color = type === 'error' ? '#fca5a5' : (type === 'success' ? '#bbf7d0' : '#d1d5db');\n    }\n\n    messageDiv.textContent = text;\n\n    chatBodyElement.appendChild(messageDiv);\n    scrollToBottom();\n}\n\n/**\n * Removes all temporary status messages from the chat body.\n */\nexport function clearTemporaryMessages() {\n    if (!chatBodyElement) return;\n    console.log(\"[ChatRenderer] Clearing temporary status messages.\");\n    const tempMessages = chatBodyElement.querySelectorAll(`.${TEMP_MESSAGE_CLASS}`);\n    tempMessages.forEach((msg: Element) => msg.remove());\n}\n\n// --- END: Temporary Message Functions ---\n\nfunction initializeObserver() {\n    if (observer) observer.disconnect(); // Disconnect previous observer if any\n\n    observer = new MutationObserver(mutations => {\n        mutations.forEach(mutation => {\n            if (mutation.type === 'childList') {\n                mutation.addedNodes.forEach(node => {\n                    if (node.nodeType === Node.ELEMENT_NODE) {\n                        // If using hljs and it needs to be re-triggered on dynamic additions, this is one place.\n                        // However, if Marked+hljs provides fully rendered HTML, this might only be for other dynamic changes.\n                        // For now, let's assume the initial render from Marked handles it.\n                        // const codeBlocks = node.querySelectorAll('pre code[class*=\"language-\"]');\n                        // codeBlocks.forEach(codeElement => {\n                        //     if (!codeElement.classList.contains('hljs-highlighted')) { // or appropriate hljs class\n                        //         if (window.hljs) window.hljs.highlightElement(codeElement); // or hljs.highlightBlock(codeElement)\n                        //         codeElement.classList.add('hljs-highlighted');\n                        //     }\n                        // });\n                    }\n                });\n            }\n        });\n    });\n\n    if (chatBodyElement) {\n        observer.observe(chatBodyElement, { childList: true, subtree: true });\n        console.log(\"[ChatRenderer] MutationObserver initialized and observing chat body.\");\n\n        // Event delegation for code block actions\n        chatBodyElement.addEventListener('click', async (event: MouseEvent) => {\n            const target = (event.target as HTMLElement).closest('button');\n            if (!target) return;\n\n            if (target.classList.contains('code-action-copy-snippet')) {\n                const codeToCopy = target.dataset.code;\n                if (codeToCopy) {\n                    try {\n                        await navigator.clipboard.writeText(decodeURIComponent(codeToCopy));\n                        window.originalUITooltipController?.showTooltip(target, 'Code Copied!');\n                    } catch (err) {\n                        console.error('Failed to copy code snippet:', err);\n                        showError('Failed to copy code snippet.');\n                    }\n                }\n            } else if (target.classList.contains('code-action-download-snippet')) {\n                const codeToDownload = target.dataset.code;\n                const lang = target.dataset.lang || 'txt';\n                const filename = `snippet.${lang}`;\n                if (codeToDownload) {\n                    try {\n                        downloadFile(filename, decodeURIComponent(codeToDownload), getMimeType(lang));\n                        window.originalUITooltipController?.showTooltip(target, 'Downloading...');\n                    } catch (err) {\n                        console.error('Failed to download code snippet:', err);\n                        showError('Failed to download code snippet.');\n                    }\n                }\n            }\n        });\n        console.log(\"[ChatRenderer] Event listeners for code block actions (copy/download) added to chatBody.\");\n\n    } else {\n        console.error(\"[ChatRenderer] Cannot initialize MutationObserver or event listeners: chatBody is null.\");\n    }\n}\n\n// Helper function to get MIME type from language\nfunction getMimeType(lang: string): string {\n    const mimeTypes: Record<string, string> = {\n        json: 'application/json',\n        javascript: 'application/javascript',\n        js: 'application/javascript',\n        html: 'text/html',\n        css: 'text/css',\n        xml: 'application/xml',\n        python: 'text/x-python',\n        py: 'text/x-python',\n        java: 'text/x-java-source',\n        c: 'text/x-csrc',\n        cpp: 'text/x-c++src',\n        cs: 'text/x-csharp',\n        go: 'text/x-go',\n        rb: 'text/x-ruby',\n        php: 'application/x-httpd-php',\n        swift: 'text/x-swift',\n        kt: 'text/x-kotlin',\n        rs: 'text/rust',\n        sql: 'application/sql',\n        sh: 'application/x-sh',\n        bash: 'application/x-sh',\n        // Add more as needed\n        txt: 'text/plain',\n        plaintext: 'text/plain'\n    };\n    return mimeTypes[lang.toLowerCase()] || 'text/plain';\n}\n\n// Helper function to trigger file download\nfunction downloadFile(filename: string, content: string, mimeType: string) {\n    const blob = new Blob([content], { type: mimeType });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n}","import { showError } from '../Utilities/generalUtils';\nimport { DbAddMessageRequest } from '../DB/dbEvents';\ndeclare const eventBus: any;\nlet getActiveSessionIdFunc: (() => string | null) | null = null;\nlet ui: { triggerFileInputClick: () => void } | null = null;\n\nexport function initializeFileHandling(dependencies: { getActiveSessionIdFunc: () => string | null; uiController: { triggerFileInputClick: () => void } }) {\n    getActiveSessionIdFunc = dependencies.getActiveSessionIdFunc;\n    ui = dependencies.uiController;\n\n    if (!getActiveSessionIdFunc || !ui) {\n        console.error(\"FileHandler: Missing getActiveSessionIdFunc or uiController dependency!\");\n    } else {\n        console.log(\"[FileHandler] Initialized (Note: DB/Renderer interaction via events assumed).\");\n    }\n}\n\nexport async function handleFileSelected(event: Event) {\n    if (!getActiveSessionIdFunc) {\n         console.error(\"FileHandler: Not initialized properly (missing getActiveSessionIdFunc).\");\n         return;\n    }\n\n    const input = event.target as HTMLInputElement;\n    const files = input.files;\n    if (!files || files.length === 0) {\n        console.log(\"FileHandler: No file selected.\");\n        return;\n    }\n\n    const file = files[0];\n    console.log(`FileHandler: File selected - ${file.name}, Type: ${file.type}, Size: ${file.size}`);\n\n    const sessionId = getActiveSessionIdFunc();\n    if (!sessionId) {\n        showError(\"Please start or select a chat before attaching a file.\");\n        input.value = '';\n        return;\n    }\n\n    const fileMessage = {\n        sender: 'system',\n        text: ` Attached file: ${file.name}`,\n        timestamp: Date.now(),\n        isLoading: false,\n    };\n\n    try {\n        const request = new DbAddMessageRequest(sessionId, fileMessage);\n        eventBus.publish(DbAddMessageRequest.type, request);\n        console.log(\"[FileHandler] Published DbAddMessageRequest for file attachment.\");\n\n    } catch (error) {\n         console.error(\"FileHandler: Error publishing file attachment message event:\", error);\n         showError(\"Failed to process file attachment.\");\n    } finally {\n        input.value = '';\n    }\n}\n\nexport function handleAttachClick() {\n    if (!ui) {\n        console.error(\"FileHandler: UI Controller not available to trigger file input.\");\n        return;\n    }\n    console.log(\"FileHandler: Triggering file input click.\");\n    ui.triggerFileInputClick();\n}","import browser from 'webextension-polyfill';\nimport { URL_REGEX,  showError } from '../Utilities/generalUtils';\nimport { sendDbRequestSmart } from '../sidepanel';\nimport {\n    DbCreateSessionRequest,\n    DbAddMessageRequest,\n    DbUpdateMessageRequest,\n    DbUpdateStatusRequest,\n} from '../DB/dbEvents';\nimport { clearTemporaryMessages } from './chatRenderer';\nimport { UIEventNames, RuntimeMessageTypes } from '../events/eventNames';\n\nlet getActiveSessionIdFunc: (() => string | null) | null = null;\nlet onSessionCreatedCallback: ((sessionId: string) => void) | null = null;\nlet getCurrentTabIdFunc: (() => number | null) | null = null;\nlet isSendingMessage = false; // TODO: Remove this and rely on status check via DB event\n\n\n\nfunction requestDbAndWait(requestEvent: any): Promise<any> {\n    return new Promise((resolve, reject) => {\n        (async () => {\n            try {\n                const result = await sendDbRequestSmart(requestEvent);\n                console.log('[Trace][sidepanel] requestDbAndWait: Raw result', result);\n                const response = Array.isArray(result) ? result[0] : result;\n                if (response && (response.success || response.error === undefined)) {\n                    resolve(response.data || response.payload);\n                } else {\n                    reject(new Error(response?.error || `DB operation ${requestEvent.type} failed`));\n                }\n            } catch (error) {\n                reject(error);\n            }\n        })();\n    });\n}\n\nasync function handleQuerySubmit(data: any) {\n    const { text } = data;\n    console.log(`[Orchestrator: handleQuerySubmit] received event with text: \"${text}\"`);\n    if (isSendingMessage) {\n        console.warn(\"[Orchestrator handleQuerySubmit]: Already processing a previous submission.\");\n        return;\n    }\n    isSendingMessage = true;\n\n    let sessionId = getActiveSessionIdFunc ? getActiveSessionIdFunc() : null;\n    const currentTabId = getCurrentTabIdFunc ? getCurrentTabIdFunc() : null;\n    let placeholderMessageId = null;\n\n    console.log(`[Orchestrator: handleQuerySubmit] Processing submission. Text: \"${text}\". Session: ${sessionId}`);\n    const isURL = URL_REGEX.test(text);\n\n    try {\n        clearTemporaryMessages();\n        const userMessage = { sender: 'user', text: text, timestamp: Date.now(), isLoading: false };\n        if (!sessionId) {\n            console.log(\"[Orchestrator: handleQuerySubmit] No active session, creating new one via event.\");\n            const createRequest = new DbCreateSessionRequest(userMessage);\n            const createResponse = await requestDbAndWait(createRequest);\n            sessionId = (createResponse as any).newSessionId;\n            if (onSessionCreatedCallback) {\n                onSessionCreatedCallback(sessionId!);\n            } else {\n                 console.error(\"[Orchestrator: handleQuerySubmit] onSessionCreatedCallback is missing!\");\n                 throw new Error(\"Configuration error: Cannot notify about new session.\");\n            }\n        } else {\n            console.log(`[Orchestrator: handleQuerySubmit] Adding user message to existing session ${sessionId} via event.`);\n            clearTemporaryMessages();\n            const addRequest = new DbAddMessageRequest(sessionId, userMessage);\n            await requestDbAndWait(addRequest);\n        }\n        console.log(`[Orchestrator: handleQuerySubmit] Setting session ${sessionId} status to 'processing' via event`);\n        const statusRequest = new DbUpdateStatusRequest(sessionId!, 'processing');\n        await requestDbAndWait(statusRequest);\n        let placeholder;\n        if (isURL) {\n            placeholder = { sender: 'system', text: ` Scraping ${text}...`, timestamp: Date.now(), isLoading: true };\n        } else {\n            placeholder = { sender: 'ai', text: 'Thinking...', timestamp: Date.now(), isLoading: true };\n        }\n        console.log(`[Orchestrator: handleQuerySubmit] Adding placeholder to session ${sessionId} via event.`);\n        const addPlaceholderRequest = new DbAddMessageRequest(sessionId!, placeholder);\n        const placeholderResponse = await requestDbAndWait(addPlaceholderRequest);\n        console.log(`[Orchestrator: handleQuerySubmit] Placeholder response:`, placeholderResponse);\n        placeholderMessageId = (placeholderResponse as any).newMessageId;\n        if (typeof placeholderMessageId !== 'string' && placeholderMessageId && placeholderMessageId.newMessageId) {\n            placeholderMessageId = placeholderMessageId.newMessageId;\n        }\n        // Log the type and value for debugging\n        if (typeof placeholderMessageId === 'string') {\n            console.log(`[Orchestrator: handleQuerySubmit] placeholderMessageId (string):`, placeholderMessageId);\n        } else {\n            console.warn(`[Orchestrator: handleQuerySubmit] placeholderMessageId is not a string! Full value:`, placeholderMessageId);\n        }\n        \n        if (isURL) {\n            // Always send scrape request to background, let background decide how to scrape\n            try {\n                const response = await browser.runtime.sendMessage({\n                    type: RuntimeMessageTypes.SCRAPE_REQUEST,\n                    payload: {\n                        url: text,\n                        chatId: sessionId,\n                        messageId: placeholderMessageId,\n                        tabId: currentTabId\n                    }\n                });\n                console.log(\"[Orchestrator: handleQuerySubmit] SCRAPE_REQUEST sent to background.\", response);\n            } catch (error: unknown) {\n                const errObj = error as Error;\n                console.error('[Orchestrator: handleQuerySubmit] Error sending SCRAPE_REQUEST:', errObj.message);\n                const errorUpdateRequest = new DbUpdateMessageRequest(sessionId!, placeholderMessageId, {\n                    isLoading: false, sender: 'error', text: `Failed to initiate scrape: ${errObj.message}`\n                });\n                requestDbAndWait(errorUpdateRequest).catch(e => console.error(\"Failed to update placeholder on send error:\", e));\n                requestDbAndWait(new DbUpdateStatusRequest(sessionId!, 'error')).catch(e => console.error(\"Failed to set session status on send error:\", e));\n                isSendingMessage = false;\n            }\n        } else {\n            console.log(\"[Orchestrator: handleQuerySubmit] Sending query to background for AI response.\");\n            const messagePayload = {\n                type: RuntimeMessageTypes.SEND_CHAT_MESSAGE,\n                payload: {\n                    chatId: sessionId,\n                    messages: [{ role: 'user', content: text }], \n                    options: { /* model, temp, etc */ },\n                    messageId: placeholderMessageId\n                }\n            };\n            try {\n                const response = await browser.runtime.sendMessage(messagePayload);\n                if (response && response.success) {\n                    console.log('[Orchestrator: handleQuerySubmit] Background acknowledged forwarding sendChatMessage. Actual AI response will follow separately.', response);\n                } else {\n                    console.error('[Orchestrator: handleQuerySubmit] Background reported an error while attempting to forward sendChatMessage:', response?.error);\n                    const errorPayload = { isLoading: false, sender: 'error', text: `Error forwarding query: ${response?.error || 'Unknown error'}` };\n                    const errorUpdateRequest = new DbUpdateMessageRequest(sessionId!, placeholderMessageId, errorPayload);\n                    await requestDbAndWait(errorUpdateRequest); // Can await here too\n                    await requestDbAndWait(new DbUpdateStatusRequest(sessionId!, 'error'));\n                    isSendingMessage = false; // Reset flag if forwarding failed\n                }\n            } catch (error: unknown) {\n                const errObj = error as Error;\n                console.error('[Orchestrator: handleQuerySubmit] Error sending query to background or processing its direct ack:', errObj);\n                const errorText = errObj && typeof errObj.message === 'string' ? errObj.message : 'Unknown error during send/ack';\n                const errorPayload = { isLoading: false, sender: 'error', text: `Failed to send query: ${errorText}` };\n                const errorUpdateRequest = new DbUpdateMessageRequest(sessionId!, placeholderMessageId, errorPayload);\n                requestDbAndWait(errorUpdateRequest).catch(e => console.error(\"Failed to update placeholder on send error (within catch):\", e));\n                requestDbAndWait(new DbUpdateStatusRequest(sessionId!, 'error')).catch(e => console.error(\"Failed to set session status on send error (within catch):\", e));\n                isSendingMessage = false; // Reset flag on send error\n            }\n        }\n    } catch (error: unknown) {\n        const errObj = error as Error;\n        console.error(\"[Orchestrator: handleQuerySubmit] Error processing query submission:\", errObj);\n        showError(`Error: ${errObj.message || errObj}`);\n        if (sessionId) {\n            console.log(`[Orchestrator: handleQuerySubmit] Setting session ${sessionId} status to 'error' due to processing failure via event`);\n            requestDbAndWait(new DbUpdateStatusRequest(sessionId!, 'error')).catch(e => console.error(\"Failed to set session status on processing error:\", e));\n        } else {\n            console.error(\"[Orchestrator: handleQuerySubmit] Error occurred before session ID was established.\");\n        }\n        isSendingMessage = false;\n    }\n}\n\nasync function handleBackgroundMsgResponse(message: any) {\n    const { chatId, messageId, text } = message;\n    console.log(`[Orchestrator: handleBackgroundMsgResponse] for chat ${chatId}, placeholder ${messageId}`);\n    try {\n        const updatePayload = { isLoading: false, sender: 'ai', text: text || 'Received empty response.' };\n        const updateRequest = new DbUpdateMessageRequest(chatId, messageId, updatePayload);\n        await requestDbAndWait(updateRequest);\n        console.log(`[Orchestrator: handleBackgroundMsgResponse] Setting session ${chatId} status to 'idle' after response via event`);\n        const statusRequest = new DbUpdateStatusRequest(chatId, 'idle');\n        await requestDbAndWait(statusRequest);\n    } catch (error: unknown) {\n        const errObj = error as Error;\n        console.error(`[Orchestrator: handleBackgroundMsgResponse] Error handling background response for chat ${chatId}:`, errObj);\n        showError(`Failed to update chat with response: ${errObj.message || errObj}`);\n        const statusRequest = new DbUpdateStatusRequest(chatId, 'error');\n        requestDbAndWait(statusRequest).catch(e => console.error(\"Failed to set session status on response processing error:\", e));\n    } finally {\n         isSendingMessage = false; // TODO: Remove later\n    }\n}\n\nasync function handleBackgroundMsgError(message: any) {\n    console.error(`[Orchestrator: handleBackgroundMsgError] Received error for chat ${message.chatId}, placeholder ${message.messageId}: ${message.error}`);\n    showError(`Error processing request: ${message.error}`); // Show global error regardless\n\n    const sessionId = getActiveSessionIdFunc ? getActiveSessionIdFunc() : null; // Get current session ID\n\n    if (sessionId && message.chatId === sessionId && message.messageId) {\n        // Only update DB if the error belongs to the *active* session and has a message ID\n        console.log(`[Orchestrator: handleBackgroundMsgError] Attempting to update message ${message.messageId} in active session ${sessionId} with error.`);\n        const errorPayload = { isLoading: false, sender: 'error', text: `Error: ${message.error}` };\n        const errorUpdateRequest = new DbUpdateMessageRequest(sessionId, message.messageId, errorPayload);\n        const statusRequest = new DbUpdateStatusRequest(sessionId, 'error');\n        try {\n            await requestDbAndWait(errorUpdateRequest);\n            console.log(`[Orchestrator: handleBackgroundMsgError] Error message update successful for session ${sessionId}.`);\n            await requestDbAndWait(statusRequest);\n            console.log(`[Orchestrator: handleBackgroundMsgError] Session ${sessionId} status set to 'error'.`);\n        } catch (dbError: unknown) {\n            const dbErr = dbError as Error;\n            console.error('[Orchestrator: handleBackgroundMsgError] Error updating chat/status on background error:', dbErr);\n            // Show a more specific UI error if DB update fails\n            showError(`Failed to update chat with error status: ${dbErr.message}`);\n            // Attempt to set status to error even if message update failed\n            try {\n                 await requestDbAndWait(new DbUpdateStatusRequest(sessionId, 'error'));\n            } catch (statusError) {\n                 console.error('[Orchestrator: handleBackgroundMsgError] Failed to set session status on error handling error:', statusError);\n            }\n        }\n    } else {\n         console.warn(`[Orchestrator: handleBackgroundMsgError] Received error, but no active session ID (${sessionId}) or message ID (${message.messageId}) matches the error context (${message.chatId}). Not updating DB.`);\n         // If the error is specifically a model load error (we might need a better way to signal this)\n         // ensure the UI controller knows. The direct worker:error event might be better.\n    }\n\n    isSendingMessage = false; // Reset flag after handling error\n}\n\nasync function handleBackgroundScrapeStage(payload: any) {\n    const { stage, success, chatId, messageId, error, ...rest } = payload;\n    console.log(`[Orchestrator: handleBackgroundScrapeStage] Stage ${stage}, chatId: ${chatId}, Success: ${success}`);\n\n    let updatePayload: any = {};\n    let finalStatus = 'idle'; // Default to idle on success\n\n    if (success) {\n        console.log(`[Orchestrator: handleBackgroundScrapeStage] Scrape stage ${stage} succeeded for chat ${chatId}.`);\n        // Use the main extracted content if available\n        let mainContent = rest?.extraction?.content || rest?.content || rest?.title || 'Scrape complete.';\n        updatePayload = { \n            isLoading: false, \n            sender: 'system', \n            text: mainContent, // <-- Show main extracted content in UI\n            content: mainContent, // <-- Also update content for UI rendering\n            metadata: { \n                type: 'scrape_result_full', \n                scrapeData: rest // Put the full data here for the renderer\n            }\n        };\n        finalStatus = 'idle';\n\n    } else {\n        // If a stage fails, update the message immediately with the error\n        const errorText = error || `Scraping failed (Stage ${stage}). Unknown error.`;\n        console.error(`[Orchestrator: handleBackgroundScrapeStage] Scrape stage ${stage} failed for chat ${chatId}. Error: ${errorText}`);\n        updatePayload = { isLoading: false, sender: 'error', text: `Scraping failed (Stage ${stage}): ${errorText}` };\n        finalStatus = 'error';\n    }\n\n    // --- Update DB regardless of success/failure based on this stage result --- \n    try {\n        console.log(`[Orchestrator: handleBackgroundScrapeStage] Updating message ${messageId} for stage ${stage} result.`);\n        const updateRequest = new DbUpdateMessageRequest(chatId, messageId, updatePayload);\n        await requestDbAndWait(updateRequest);\n        console.log(`[Orchestrator: handleBackgroundScrapeStage] Updated placeholder ${messageId} with stage ${stage} result.`);\n\n        // Also set final session status based on this stage outcome\n        console.log(`[Orchestrator: handleBackgroundScrapeStage] Setting session ${chatId} status to '${finalStatus}' after stage ${stage} result via event`);\n        const statusRequest = new DbUpdateStatusRequest(chatId, finalStatus);\n        await requestDbAndWait(statusRequest);\n\n    } catch (dbError: unknown) {\n        const dbErr = dbError as Error;\n        console.error(`[Orchestrator: handleBackgroundScrapeStage] Failed to update DB after stage ${stage} result:`, dbErr);\n        showError(`Failed to update chat with scrape result: ${dbErr.message || dbErr}`);\n        // If DB update fails, maybe try setting status to error anyway?\n        if (finalStatus !== 'error') {\n             try {\n                 const fallbackStatusRequest = new DbUpdateStatusRequest(chatId, 'error');\n                 await requestDbAndWait(fallbackStatusRequest);\n             } catch (fallbackError) {\n                 console.error(\"Failed to set fallback error status:\", fallbackError);\n             }\n        }\n    } finally {\n        // Reset sending flag only after processing a stage result\n        // This assumes the background script won't send more results for this specific scrape\n        // Might need adjustment if background sends a final DIRECT_SCRAPE_RESULT later\n         isSendingMessage = false; \n         console.log(\"[Orchestrator: handleBackgroundScrapeStage] Resetting isSendingMessage after processing scrape stage result.\");\n    }\n}\n\nasync function handleBackgroundDirectScrapeResult(message: any) {\n    const { chatId, messageId, success, error, ...scrapeData } = message;\n    console.log(`[Orchestrator: handleBackgroundDirectScrapeResult] for chat ${chatId}, placeholder ${messageId}, Success: ${success}`);\n    const updatePayload: any = { isLoading: false };\n     if (success) {\n         updatePayload.sender = 'system';\n         // Use the main extracted content if available\n         let mainContent = scrapeData?.extraction?.content || scrapeData?.content || scrapeData?.title || 'Scrape complete.';\n         updatePayload.text = mainContent;\n         updatePayload.content = mainContent; // <-- Also update content for UI rendering\n         updatePayload.metadata = {\n             type: 'scrape_result_full', \n             scrapeData: scrapeData\n         };\n     } else {\n         updatePayload.sender = 'error';\n         updatePayload.text = `Scraping failed: ${error || 'Unknown error.'}`;\n     }\n    try {\n        const updateRequest = new DbUpdateMessageRequest(chatId, messageId, updatePayload);\n        await requestDbAndWait(updateRequest);\n        const finalStatus = success ? 'idle' : 'error';\n        console.log(`[Orchestrator: handleBackgroundDirectScrapeResult] Setting session ${chatId} status to '${finalStatus}' after direct scrape result via event`);\n        const statusRequest = new DbUpdateStatusRequest(chatId, finalStatus);\n        await requestDbAndWait(statusRequest);\n    } catch (error: unknown) {\n        const errObj = error as Error;\n        console.error(`[Orchestrator: handleBackgroundDirectScrapeResult] Error handling direct scrape result for chat ${chatId}:`, errObj);\n        showError(`Failed to update chat with direct scrape result: ${errObj.message || errObj}`);\n        const statusRequest = new DbUpdateStatusRequest(chatId, 'error');\n        requestDbAndWait(statusRequest).catch(e => console.error(\"Failed to set session status on direct scrape processing error:\", e));\n    } finally {\n         isSendingMessage = false; // TODO: Remove later\n    }\n}\n\ndocument.addEventListener(UIEventNames.QUERY_SUBMITTED, (e: Event) => handleQuerySubmit((e as CustomEvent).detail));\ndocument.addEventListener(UIEventNames.BACKGROUND_RESPONSE_RECEIVED, (e: Event) => handleBackgroundMsgResponse((e as CustomEvent).detail));\ndocument.addEventListener(UIEventNames.BACKGROUND_ERROR_RECEIVED, (e: Event) => handleBackgroundMsgError((e as CustomEvent).detail));\ndocument.addEventListener(UIEventNames.BACKGROUND_SCRAPE_STAGE_RESULT, handleBackgroundScrapeStage);\ndocument.addEventListener(UIEventNames.BACKGROUND_SCRAPE_RESULT_RECEIVED, handleBackgroundDirectScrapeResult);\n\nexport function initializeOrchestrator(dependencies: { getActiveSessionIdFunc: () => string | null; onSessionCreatedCallback: (sessionId: string) => void; getCurrentTabIdFunc: () => number | null }) {\n    getActiveSessionIdFunc = dependencies.getActiveSessionIdFunc;\n    onSessionCreatedCallback = (sessionId: string) => {\n        console.log('[Orchestrator] onSessionCreatedCallback registered for sessionId:', sessionId);\n        dependencies.onSessionCreatedCallback(sessionId);\n    };\n    getCurrentTabIdFunc = dependencies.getCurrentTabIdFunc;\n\n    if (!getActiveSessionIdFunc || !onSessionCreatedCallback || !getCurrentTabIdFunc) {\n        console.error(\"Orchestrator: Missing one or more dependencies during initialization!\");\n        return;\n    }\n\n    console.log(\"[Orchestrator] Initializing and subscribing to application events...\");\n    console.log(\"[Orchestrator] Event subscriptions complete.\");\n}","import {  UIEventNames } from '../events/eventNames';\nimport {  DBEventNames } from '../DB/dbEvents';\nimport {  clearTemporaryMessages } from './chatRenderer';\nimport browser from 'webextension-polyfill';\nimport { dbChannel } from '../DB/idbSchema';\nimport { DbStatusUpdatedNotification } from '../DB/dbEvents';\nimport { showNotification } from '../notifications';\nimport { downloadModelAssets } from '../modelAssetDownloader';\n\nlet queryInput: HTMLTextAreaElement | null,\n    sendButton: HTMLButtonElement | null,\n    chatBody: HTMLElement | null,\n    attachButton: HTMLButtonElement | null,\n    fileInput: HTMLInputElement | null,\n    loadingIndicatorElement: HTMLElement | null,\n    newChatButton: HTMLButtonElement | null,\n    downloadModelButton: HTMLButtonElement | null,\n    modelLoadProgress: HTMLElement | null;\nlet isInitialized = false;\nlet attachFileCallback: (() => void) | null | undefined = null;\nlet currentSessionId: string | null = null;\n\n\n// Define available models (can be moved elsewhere later)\nconst AVAILABLE_MODELS = {\n    // Model ID (value) : Display Name\n  //  \"Xenova/Qwen1.5-1.8B-Chat\": \"Qwen 1.8B Chat (Quantized)\",\n   // \"Xenova/Phi-3-mini-4k-instruct\": \"Phi-3 Mini Instruct (Quantized)\",\n    //\"HuggingFaceTB/SmolLM-1.7B-Instruct\": \"SmolLM 1.7B Instruct\",\n    //\"HuggingFaceTB/SmolLM2-1.7B\": \"SmolLM2 1.7B\",\n   // \"google/gemma-3-4b-it-qat-q4_0-gguf\": \"Gemma 3 4B IT Q4 (GGUF)\", \n   // \"bubblspace/Bubbl-P4-multimodal-instruct\": \"Bubbl-P4 Instruct (Multimodal)\", \n    //\"microsoft/Phi-4-multimodal-instruct\": \"Phi-4 Instruct (Multimodal)\", \n   // \"microsoft/Phi-4-mini-instruct\": \"Phi-4 Mini Instruct\",\n    //\"Qwen/Qwen3-4B\": \"Qwen/Qwen3-4B\",\n    //\"google/gemma-3-1b-pt\": \"google/gemma-3-1b-pt\",\n\n    \"HuggingFaceTB/SmolLM2-360M-Instruct\": \"SmolLM2-360M Instruct\",\n    \"onnx-models/all-MiniLM-L6-v2-onnx\": \"MiniLM-L6-v2\",\n    // Add more models here as needed\n};\n\ndocument.addEventListener(DbStatusUpdatedNotification.type, (e: Event) => {\n    const customEvent = e as CustomEvent;\n    console.log('[UIController] Received DbStatusUpdatedNotification: ', customEvent.detail);\n    handleStatusUpdate(customEvent.detail);\n  });\n\n// Add this at the top level to ensure UI progress bar updates\nbrowser.runtime.onMessage.addListener((message: any, sender: any, sendResponse: any) => {\n    const type = message?.type;\n    console.log('[UIController] browser.runtime.onMessage Received progress update: ', message.type, message.payload);\n    if (message.type === DbStatusUpdatedNotification.type) {\n        handleStatusUpdate(message.payload);\n    }\n\n    if (Object.values(DBEventNames).includes(type)) {\n        return false;\n    }\n    if (message.type === UIEventNames.MODEL_DOWNLOAD_PROGRESS || message.type === UIEventNames.BACKGROUND_LOADING_STATUS_UPDATE) {\n       \n        handleDownLoadingProgress(message.payload);\n    }\n});\n\ndbChannel.onmessage = (event) => {\n    const message = event.data;\n    const type = message?.type;\n    console.log('[UIController] dbChannel.onmessage Received progress update: ', message.type, message.payload);\n    if (type === DbStatusUpdatedNotification.type) {\n        handleStatusUpdate(message.payload);\n    }\n    // Add other notification types as needed\n};\n\nfunction selectElements() {\n    queryInput = document.getElementById('query-input') as HTMLTextAreaElement | null;\n    sendButton = document.getElementById('send-button') as HTMLButtonElement | null;\n    chatBody = document.getElementById('chat-body');\n    attachButton = document.getElementById('attach-button') as HTMLButtonElement | null;\n    fileInput = document.getElementById('file-input') as HTMLInputElement | null;\n    loadingIndicatorElement = document.getElementById('loading-indicator');\n    modelLoadProgress = document.getElementById('model-load-progress') as HTMLElement | null;\n    if (!queryInput || !sendButton || !chatBody || !attachButton || !fileInput /*|| !sessionListElement*/) {\n        console.error(\"UIController: One or more essential elements not found (excluding session list)!\");\n        return false;\n    }\n    return true;\n}\n\nfunction attachListeners() {\n    queryInput?.addEventListener('input', adjustTextareaHeight);\n    queryInput?.addEventListener('keydown', handleEnterKey);\n    sendButton?.addEventListener('click', handleSendButtonClick);\n    attachButton?.addEventListener('click', handleAttachClick);\n}\n\nfunction removeListeners() {\n    queryInput?.removeEventListener('input', adjustTextareaHeight);\n    queryInput?.removeEventListener('keydown', handleEnterKey);\n    sendButton?.removeEventListener('click', handleSendButtonClick);\n    attachButton?.removeEventListener('click', handleAttachClick);\n}\n\nfunction handleEnterKey(event: KeyboardEvent) {\n    if (event.key === 'Enter' && !event.shiftKey) {\n        event.preventDefault();\n        const messageText = getInputValue();\n        if (messageText && !queryInput!.disabled) {\n            console.log(\"[UIController] Enter key pressed. Publishing ui:querySubmitted\");\n            document.dispatchEvent(new CustomEvent(UIEventNames.QUERY_SUBMITTED, { detail: { text: messageText } }));\n            clearInput();\n        } else {\n             console.log(\"[UIController] Enter key pressed, but input is empty or disabled.\");\n        }\n    }\n}\n\nfunction handleSendButtonClick() {\n    const messageText = getInputValue();\n    if (messageText && !queryInput!.disabled) {\n        console.log(\"[UIController] Send button clicked. Publishing ui:querySubmitted\");\n        document.dispatchEvent(new CustomEvent(UIEventNames.QUERY_SUBMITTED, { detail: { text: messageText } }));\n        clearInput();\n    } else {\n        console.log(\"[UIController] Send button clicked, but input is empty or disabled.\");\n    }\n}\n\nfunction handleAttachClick() {\n    if (attachFileCallback) {\n        attachFileCallback();\n    }\n}\n\nexport function adjustTextareaHeight() {\n    if (!queryInput) return;\n    queryInput.style.height = 'auto';\n    const maxHeight = 150;\n    const scrollHeight = queryInput.scrollHeight;\n    queryInput.style.height = `${Math.min(scrollHeight, maxHeight)}px`;\n    if (sendButton) {\n        sendButton.disabled = queryInput.value.trim() === '' || queryInput.disabled;\n    }\n}\n\nfunction setInputStateInternal(status: string) {\n    console.log(`[UIController] setInputStateInternal called with status: ${status}`);\n    if (!isInitialized || !queryInput || !sendButton) return;\n    switch (status) {\n        case 'processing':\n            queryInput.disabled = true;\n            sendButton.disabled = true;\n            break;\n        case 'error':\n        case 'idle':\n        case 'complete':\n        default:\n            queryInput.disabled = false;\n            adjustTextareaHeight();\n            break;\n    }\n    console.log(`[UIController] Input disabled state: ${queryInput.disabled}`);\n}\n\n\n\nfunction handleStatusUpdate(notification: any) {\n    if (!isInitialized || !notification || !notification.sessionId || !notification.payload) return;\n    if (notification.sessionId === currentSessionId) {\n        setInputStateInternal(notification.payload.status || 'idle');\n    }\n}\n\ndocument.addEventListener(UIEventNames.MODEL_DOWNLOAD_PROGRESS, (e: Event) => {\n    handleDownLoadingProgress((e as CustomEvent).detail);\n});\nfunction handleDownLoadingProgress(payload: any) {\n    console.log('[DEBUG][handleLoadingProgress] payload:', payload);\n    if (!payload) return;\n    const statusDiv = document.getElementById('model-load-status');\n    const statusText = document.getElementById('model-load-status-text');\n    const progressBar = document.getElementById('model-load-progress-bar');\n    const progressInner = document.getElementById('model-load-progress-inner');\n\n    if (!statusDiv || !statusText || !progressBar || !progressInner) {\n        console.warn('[UIController] Model load progress bar not found.');\n        return;\n    }\n\n    // Always show the status area while loading or on error\n    statusDiv.style.display = 'block';\n    progressBar.style.width = '100%';\n    console.log('[DEBUG][handleLoadingProgress] Showing progress bar.');\n\n    // Handle error\n    if (payload.status === 'error' || payload.error) {\n        statusText.textContent = payload.error || 'Error loading model';\n        progressInner.style.background = '#f44336'; // red\n        progressInner.style.width = '100%';\n        return;\n    }\n\n    // Main progress bar (overall)\n    let percent = payload.progress || payload.percent || 0;\n    percent = Math.max(0, Math.min(100, percent));\n    console.log('[DEBUG][handleLoadingProgress] percent:', percent);\n    progressInner.style.width = percent + '%';\n    progressInner.style.background = '#4caf50'; // green\n\n    // Status text\n    let text = '';\n    function truncateFileName(name: string, maxLen = 32) {\n        if (!name) return '';\n        return name.length > maxLen ? name.slice(0, maxLen - 3) + '...' : name;\n    }\n    if (payload.summary && payload.message) {\n        text = payload.message;\n    } else if (payload.status === 'progress' && payload.file) {\n        const shortFile = truncateFileName(payload.file);\n        text = `Downloading ${shortFile}`;\n        if (payload.chunkIndex && payload.totalChunks) {\n            text += ` (chunk ${payload.chunkIndex} of ${payload.totalChunks})`;\n        }\n        text += `... ${Math.round(percent)}%`;\n    } else if (payload.status === 'done' && payload.file) {\n        const shortFile = truncateFileName(payload.file);\n        text = `${shortFile} downloaded. Preparing pipeline...`;\n    } else {\n        text = 'Loading...';\n    }\n    statusText.textContent = text;\n\n    // Hide when done (but not on error)\n    if ((percent >= 100 || payload.status === 'popupclosed'|| payload.status === 'done' || (payload.summary && percent >= 100)) && !(payload.status === 'error' || payload.error)) {\n        console.log('[DEBUG][handleLoadingProgress] Hiding progress bar in 1s');\n        setDownLoadButtonState('idle', 'Download Model');   \n        setTimeout(() => { statusDiv.style.display = 'none'; }, 150);\n    }\n}\n\nexport async function initializeUI(callbacks: { onAttachFile?: () => void; onNewChat?: () => void }) {\n    console.log(\"[UIController] Initializing...\");\n    if (isInitialized) {\n        removeListeners();\n    }\n    if (!selectElements()) {\n        isInitialized = false;\n        return null;\n    }\n    attachFileCallback = callbacks?.onAttachFile;\n    \n    attachListeners();\n    \n    newChatButton = document.getElementById('new-chat-button') as HTMLButtonElement | null;\n    if (newChatButton && callbacks?.onNewChat) {\n        newChatButton.addEventListener('click', callbacks.onNewChat);\n    }\n\n    isInitialized = true;\n    setInputStateInternal('idle');\n    adjustTextareaHeight();\n    console.log(\"[UIController] Initialized successfully.\");\n\n    console.log(`[UIController] Returning elements: chatBody is ${chatBody ? 'found' : 'NULL'}, fileInput is ${fileInput ? 'found' : 'NULL'}`);\n\n    clearTemporaryMessages();\n\n    downloadModelButton = document.getElementById('download-model-btn') as HTMLButtonElement | null;\n    if (downloadModelButton) {\n        downloadModelButton.addEventListener('click', handleLoadModelClick);\n    } else {\n        console.error(\"[UIController] Load Model button not found!\");\n    }\n\n\n\n    disableInput(\"Download or load a model from dropdown to begin.\");\n    setDownLoadButtonState('idle', 'Download Model');\n\n    console.log(\"[UIController] Initializing UI elements...\");\n\n    // Populate model selector\n    console.log(\"[UIController] Attempting to find model selector...\");\n    const modelSelector = document.getElementById('model-selector');\n    console.log(modelSelector ? \"[UIController] Model selector found.\" : \"[UIController] WARNING: Model selector NOT found!\");\n    if (modelSelector) {\n        modelSelector.innerHTML = ''; // Clear existing options\n        console.log(\"[UIController] Populating model selector. Available models:\", AVAILABLE_MODELS);\n        for (const [modelId, displayName] of Object.entries(AVAILABLE_MODELS)) {\n            console.log(`[UIController] Adding option: ${displayName} (${modelId})`);\n            const option = document.createElement('option');\n            option.value = modelId;\n            option.textContent = displayName;\n            modelSelector.appendChild(option);\n        }\n\n    } else {\n        console.warn(\"[UIController] Model selector dropdown not found.\");\n    }\n\n    console.log(\"[UIController] UI Initialization complete.\");\n    return { chatBody, queryInput, sendButton, attachButton, fileInput };\n}\n\nexport function setActiveSession(sessionId: string | null) {\n    console.log(`[UIController] Setting active session for UI state: ${sessionId}`);\n    currentSessionId = sessionId;\n    if (!sessionId) {\n        setInputStateInternal('idle'); \n    } \n}\n\nexport function checkInitialized() {\n    return isInitialized;\n}\n\nexport function getInputValue() {\n    return queryInput?.value.trim() || '';\n}\n\nexport function clearInput() {\n    console.log(\"[UIController] Entering clearInput function.\");\n    if (queryInput) {\n        queryInput.value = '';\n        adjustTextareaHeight();\n    }\n}\n\nexport function focusInput() {\n    queryInput?.focus();\n}\n\nexport function triggerFileInputClick() {\n    fileInput?.click();\n}\n\nfunction handleLoadModelClick() {\n    if (!isInitialized) return;\n    console.log(\"[UIController] Load Model button clicked.\");\n\n    const modelSelector = document.getElementById('model-selector') as HTMLSelectElement | null;\n    const selectedModelId = modelSelector?.value;\n\n    if (!selectedModelId) {\n        console.error(\"[UIController] Cannot load: No model selected or selector not found.\");\n        showNotification(\"Error: Please select a model.\", \"error\");\n        return;\n    }\n\n    console.log(`[UIController] Requesting load for model: ${selectedModelId}`);\n    setDownLoadButtonState('loading'); \n    disableInput(`Loading ${AVAILABLE_MODELS[selectedModelId as keyof typeof AVAILABLE_MODELS] || selectedModelId}...`); \n    document.dispatchEvent(new CustomEvent(UIEventNames.REQUEST_MODEL_LOAD, { detail: { modelId: selectedModelId } }));\n}\n\nfunction setDownLoadButtonState(state: string, text = 'Load') {\n    if (!isInitialized || !downloadModelButton) return;\n\n    switch (state) {\n        case 'idle':\n            downloadModelButton.disabled = false;\n            downloadModelButton.textContent = text;\n            downloadModelButton.classList.replace('bg-yellow-500', 'bg-green-500');\n            downloadModelButton.classList.replace('bg-gray-500', 'bg-green-500');\n            break;\n        case 'loading':\n            downloadModelButton.disabled = true;\n            downloadModelButton.textContent = text === 'Load' ? 'Loading...' : text;\n            downloadModelButton.classList.replace('bg-green-500', 'bg-yellow-500');\n             downloadModelButton.classList.replace('bg-gray-500', 'bg-yellow-500');\n            break;\n        case 'loaded':\n            downloadModelButton.disabled = true;\n            downloadModelButton.textContent = 'Loaded';\n            downloadModelButton.classList.replace('bg-green-500', 'bg-gray-500'); \n            downloadModelButton.classList.replace('bg-yellow-500', 'bg-gray-500');\n            break;\n        case 'error':\n            downloadModelButton.disabled = false;\n            downloadModelButton.textContent = 'Load Failed';\n            downloadModelButton.classList.replace('bg-yellow-500', 'bg-red-500');\n            downloadModelButton.classList.replace('bg-green-500', 'bg-red-500');\n            downloadModelButton.classList.replace('bg-gray-500', 'bg-red-500');\n            break;\n    }\n}\n\nfunction disableInput(reason = \"Processing...\") {\n    if (!isInitialized || !queryInput || !sendButton) return;\n    queryInput.disabled = true;\n    queryInput.placeholder = reason;\n    sendButton.disabled = true;\n}\n\nfunction enableInput() {\n    if (!isInitialized || !queryInput || !sendButton) return;\n    queryInput.disabled = false; \n    queryInput.placeholder = \"Ask Tab Agent...\";\n    sendButton.disabled = queryInput.value.trim() === '';\n}\n\ndocument.addEventListener(UIEventNames.WORKER_READY, (e: Event) => {\n    const customEvent = e as CustomEvent;\n    const payload = customEvent.detail;\n    console.log(\"[UIController] Received worker:ready signal\", payload);\n    // Hide progress bar area\n    const statusDiv = document.getElementById('model-load-status');\n    if (statusDiv) statusDiv.style.display = 'none';\n    setDownLoadButtonState('loaded');\n});\n\ndocument.addEventListener(UIEventNames.WORKER_ERROR, (e: Event) => {\n    const customEvent = e as CustomEvent;\n    const payload = customEvent.detail;\n    console.error(\"[UIController] Received worker:error signal\", payload);\n    // Show error in progress bar area and keep it visible\n    const statusDiv = document.getElementById('model-load-status');\n    const statusText = document.getElementById('model-load-status-text');\n    const progressInner = document.getElementById('model-load-progress-inner');\n    if (statusDiv && statusText && progressInner) {\n        statusDiv.style.display = 'block';\n        statusText.textContent = payload?.error || 'Model load failed.';\n        progressInner.style.background = '#f44336';\n        progressInner.style.width = '100%';\n    }\n    setDownLoadButtonState('error');\n    disableInput(\"Model load failed. Check logs.\");\n});","\r\nexport const llmChannel = new BroadcastChannel('tabagent-llm');\r\nexport const logChannel = new BroadcastChannel('tabagent-logs'); ","import { MessageSenderTypes } from '../events/eventNames';\nimport browser from 'webextension-polyfill';\n\n/**\n * Formats a chat session object into a self-contained HTML string.\n * @param sessionData - The chat session object from the database.\n * @returns {string} - The generated HTML string.\n */\nexport function formatChatToHtml(sessionData: any): string {\n    if (!sessionData) return '';\n\n    const title = sessionData.title || 'Chat Session';\n    const messagesHtml = (sessionData.messages || []).map((msg: any) => {\n        const senderClass = msg.sender === MessageSenderTypes.USER ? 'user-message' : 'other-message';\n        const senderLabel = msg.sender === MessageSenderTypes.USER ? 'You' : (msg.sender === MessageSenderTypes.AI ? 'Agent' : 'System');\n        // Basic sanitization: escape HTML characters to prevent XSS if message text somehow contains HTML\n        const escapedText = msg.text.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n        // Convert newlines to <br> tags for display\n        const formattedText = escapedText.replace(/\\n/g, '<br>');\n\n        return `\n            <div class=\"message-row ${senderClass === 'user-message' ? 'row-user' : 'row-other'}\">\n                <div class=\"message-bubble ${senderClass}\">\n                    <span class=\"sender-label\">${senderLabel}:</span>\n                    <div class=\"message-text\">${formattedText}</div>\n                </div>\n            </div>\n        `;\n    }).join('\\n');\n\n    // Basic CSS for styling the downloaded file\n    const css = `\n        body { font-family: sans-serif; line-height: 1.6; margin: 0; padding: 0; background-color: #f8f9fa; color: #212529; }\n        .container { max-width: 800px; margin: 20px auto; background-color: #ffffff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }\n        h1 { color: #343a40; border-bottom: 1px solid #dee2e6; padding-bottom: 10px; margin-top: 0; }\n        .chat-body { margin-top: 20px; }\n        .message-row { margin-bottom: 15px; overflow: hidden; /* Clear floats */ }\n        .row-user { text-align: right; }\n        .row-other { text-align: left; }\n        .message-bubble { display: inline-block; padding: 10px 15px; border-radius: 15px; max-width: 75%; word-wrap: break-word; }\n        .user-message { background-color: #007bff; color: white; margin-left: auto; /* Align right */ }\n        .other-message { background-color: #e9ecef; color: #343a40; margin-right: auto; /* Align left */ }\n        .sender-label { font-weight: bold; display: block; margin-bottom: 5px; font-size: 0.9em; color: inherit; }\n        .message-text { margin-top: 5px; }\n    `;\n\n    return `\n        <!DOCTYPE html>\n        <html lang=\"en\">\n        <head>\n            <meta charset=\"UTF-8\">\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n            <title>${title.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\")}</title>\n            <style>${css}</style>\n        </head>\n        <body>\n            <div class=\"container\">\n                <h1>${title.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\")}</h1>\n                <div class=\"chat-body\">\n                    ${messagesHtml}\n                </div>\n            </div>\n        </body>\n        </html>\n    `;\n}\n\n/**\n * Initiates the download of the provided HTML content as a file.\n * Requires the \"downloads\" permission in manifest.json.\n * @param htmlContent - The HTML string to download.\n * @param filename - The suggested filename (e.g., \"chat_session.html\").\n * @param onError - Optional callback function to handle errors.\n */\nexport async function downloadHtmlFile(\n    htmlContent: string,\n    filename: string,\n    onError?: (message: string) => void\n): Promise<void> {\n    try {\n        const blob = new Blob([htmlContent], { type: 'text/html' });\n        const url = URL.createObjectURL(blob);\n\n        console.log(`Initiating download for: ${filename} (prompting user)`);\n        try {\n            const downloadId = await browser.downloads.download({\n                url: url,\n                filename: filename,\n                saveAs: true\n            });\n            // Always revoke the URL\n            setTimeout(() => URL.revokeObjectURL(url), 100);\n            if (downloadId) {\n                console.log(`Download initiated (or dialog opened) with ID: ${downloadId}`);\n            } else {\n                console.log(\"Download cancelled by user (no downloadId assigned).\" );\n            }\n        } catch (err: any) {\n            setTimeout(() => URL.revokeObjectURL(url), 100);\n            const message = err?.message || String(err);\n            console.error(\"Download API error:\", message);\n            if (!message || !message.toLowerCase().includes('cancel')) {\n                if (onError) {\n                    onError(`Download failed: ${message || 'Unknown error'}`);\n                } else {\n                    console.error(\"No error handler provided for download failure.\");\n                    alert(`Download failed: ${message || 'Unknown error'}. Ensure extension has permissions.`);\n                }\n            } else {\n                console.log(\"Download cancelled by user.\");\n            }\n        }\n    } catch (error) {\n        console.error(\"Error creating blob or initiating download:\", error);\n        if (onError) {\n            onError(\"An error occurred while preparing the download.\");\n        } else {\n            console.error(\"No error handler provided for download preparation error.\");\n            alert(\"An error occurred while preparing the download.\");\n        }\n    }\n} ","import { DbGetSessionRequest } from '../DB/dbEvents';\r\nimport { formatChatToHtml, downloadHtmlFile } from './downloadFormatter';\r\n\r\n/**\r\n * Fetches, formats, and initiates the download for a chat session.\r\n * @param {string} sessionId - The ID of the session to download.\r\n * @param {Function} requestDbAndWaitFunc - The function to make DB requests.\r\n * @param {Function} showNotificationFunc - The function to display notifications.\r\n */\r\nexport async function initiateChatDownload(\r\n    sessionId: string,\r\n    requestDbAndWaitFunc: (req: any) => Promise<any>,\r\n    showNotificationFunc: (message: string, type: string) => void\r\n): Promise<void> {\r\n    if (!sessionId || !requestDbAndWaitFunc || !showNotificationFunc) {\r\n        console.error(\"[initiateChatDownload] Failed: Missing sessionId, requestDbAndWaitFunc, or showNotificationFunc.\");\r\n        if (showNotificationFunc) showNotificationFunc(\"Download failed due to internal error.\", 'error');\r\n        return;\r\n    }\r\n\r\n    console.log(`[initiateChatDownload] Preparing download for: ${sessionId}`);\r\n    showNotificationFunc(\"Preparing download...\", 'info');\r\n\r\n    try {\r\n        const sessionData = await requestDbAndWaitFunc(new DbGetSessionRequest(sessionId));\r\n        if (!sessionData) {\r\n            throw new Error(\"Chat session data not found.\");\r\n        }\r\n\r\n        const htmlContent = formatChatToHtml(sessionData);\r\n        const safeTitle = (sessionData.title || sessionData.name || 'Chat_Session').replace(/[^a-z0-9_\\-.]/gi, '_').replace(/_{2,}/g, '_');\r\n        const filename = `${safeTitle}_${sessionId.substring(0, 8)}.html`;\r\n\r\n        downloadHtmlFile(htmlContent, filename, (errorMessage) => {\r\n            showNotificationFunc(errorMessage, 'error');\r\n        });\r\n    } catch (error: unknown) {\r\n        console.error(`[initiateChatDownload] Error preparing download for ${sessionId}:`, error);\r\n        let message = 'Unknown error';\r\n        if (error instanceof Error) message = error.message;\r\n        showNotificationFunc(`Failed to prepare download: ${message}`, 'error');\r\n    }\r\n} ","import browser from 'webextension-polyfill';\r\n\r\nexport function showError(message: string): void {\r\n    console.error(\"UI Error:\", message);\r\n    const errorDiv = document.createElement('div');\r\n    errorDiv.style.position = 'fixed';\r\n    errorDiv.style.bottom = '10px';\r\n    errorDiv.style.left = '10px';\r\n    errorDiv.style.backgroundColor = 'red';\r\n    errorDiv.style.color = 'white';\r\n    errorDiv.style.padding = '10px';\r\n    errorDiv.style.borderRadius = '5px';\r\n    errorDiv.style.zIndex = '1000';\r\n    errorDiv.textContent = message;\r\n    document.body.appendChild(errorDiv);\r\n    setTimeout(() => errorDiv.remove(), 3000);\r\n}\r\n\r\nexport function debounce<T extends (...args: any[]) => void>(func: T, wait: number): (...args: Parameters<T>) => void {\r\n    let timeout: ReturnType<typeof setTimeout>;\r\n    return function executedFunction(...args: Parameters<T>): void {\r\n        const later = () => {\r\n            clearTimeout(timeout);\r\n            func(...args);\r\n        };\r\n        clearTimeout(timeout);\r\n        timeout = setTimeout(later, wait);\r\n    };\r\n}\r\n\r\nexport const URL_REGEX = /^(https?):\\/\\/[^\\s/$.?#].[^\\s]*$/i;\r\n\r\nexport function getActiveTab(): Promise<any | null> {\r\n    if (typeof browser === 'undefined' || !browser.tabs) {\r\n         console.warn(\"Utils: Browser context or tabs API not available. Cannot get active tab.\");\r\n         return Promise.resolve(null);\r\n    }\r\n    return browser.tabs.query({ active: true, currentWindow: true })\r\n        .then((tabs: any[]) => {\r\n            if (tabs && tabs.length > 0) {\r\n                return tabs[0];\r\n            } else {\r\n                return null;\r\n            }\r\n        })\r\n        .catch((error: any) => {\r\n            console.error(\"Utils: Error querying active tab:\", error.message);\r\n            return null;\r\n        });\r\n}\r\n\r\nexport function getActiveTabUrl(): Promise<string | null> {\r\n    if (typeof browser === 'undefined' || !browser.tabs) {\r\n        console.warn(\"Utils: Browser context or tabs API not available.\");\r\n        return Promise.resolve(null);\r\n    }\r\n    return browser.tabs.query({ active: true, currentWindow: true })\r\n        .then((tabs: any[]) => {\r\n            if (tabs && tabs.length > 0 && tabs[0].url) {\r\n                return tabs[0].url!;\r\n            } else {\r\n                return null;\r\n            }\r\n        })\r\n        .catch((error: any) => {\r\n            console.error(\"Utils: Error querying active tab URL:\", error.message);\r\n            return Promise.reject(error);\r\n        });\r\n} ","const prefix = '[ModelMetadata]';\nconst LOG_GENERAL = true;\nconst LOG_ERROR = true;\n\nexport async function fetchModelMetadataInternal(modelId: string) {\n    const apiUrl = `https://huggingface.co/api/models/${encodeURIComponent(modelId)}`;\n    if (LOG_GENERAL) console.log(prefix, `Fetching model metadata from: ${apiUrl}`);\n    try {\n        const response = await fetch(apiUrl);\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(prefix, `Failed to fetch model file list for ${modelId}: ${response.status} ${response.statusText}`, errorText);\n            throw new Error(`Metadata fetch failed (${response.status}): ${response.statusText}`);\n        }\n        const metadata = await response.json();\n        if (LOG_GENERAL) console.log(prefix, `Model metadata fetched successfully for ${modelId}.`);\n        return metadata;\n    } catch (error) {\n        if (LOG_ERROR) console.error(prefix, `Error fetching metadata for ${modelId}:`, error);\n        throw error;\n    }\n}\n\nexport async function filterAndValidateFilesInternal(metadata: any, modelId: string, baseRepoUrl: string) {\n    const hfFileEntries = metadata.siblings || [];\n    // Only keep files we care about\n    const filteredEntries = hfFileEntries.filter((f: any) => f.rfilename.endsWith('.onnx') || f.rfilename.endsWith('on') || f.rfilename.endsWith('.txt'));\n\n    if (filteredEntries.length === 0) {\n        return { neededFileEntries: [], message: \"No .onnx, on, or .txt files found in model metadata.\" };\n    }\n\n    async function getFileSizeWithHEAD(url: string) {\n        try {\n            const headResp = await fetch(url, { method: 'HEAD' });\n            if (headResp.ok) {\n                const len = headResp.headers.get('Content-Length');\n                return len ? parseInt(len, 10) : null;\n            }\n        } catch (e) {\n            console.warn('[ModelMetadata]', `HEAD request failed for ${url}:`, e);\n        }\n        return null;\n    }\n\n    // Ensure size is set for each entry\n    const sizePromises = filteredEntries.map(async (entry: any) => {\n        if (typeof entry.size !== 'number' || !isFinite(entry.size) || entry.size <= 0) {\n            const url = baseRepoUrl + entry.rfilename;\n            const size = await getFileSizeWithHEAD(url);\n            if (size && isFinite(size) && size > 0) {\n                entry.size = size;\n            } else {\n                entry.skip = true;\n            }\n        }\n    });\n\n    await Promise.all(sizePromises);\n    // Now build full manifest objects\n    const neededFileEntries = filteredEntries.filter((e: any) => !e.skip).map((entry: any) => {\n        const fileName = entry.rfilename;\n        const fileType = fileName.split('.').pop();\n        const size = entry.size;\n        const totalChunks = Math.ceil(size / (10 * 1024 * 1024)); // Use CHUNK_SIZE if available\n        const chunkGroupId = `${modelId}/${fileName}`;\n        return {\n            id: `${chunkGroupId}:manifest`,\n            type: 'manifest',\n            chunkGroupId,\n            fileName,\n            folder: modelId,\n            fileType,\n            size,\n            totalChunks,\n            chunkSizeUsed: 10 * 1024 * 1024, // Use CHUNK_SIZE if available\n            status: 'missing',\n            addedAt: Date.now(),\n        };\n    });\n    return { neededFileEntries, message: null };\n} ","\n\n\nexport const UIEventNames = Object.freeze({\n  QUERY_SUBMITTED: 'querySubmitted',\n  BACKGROUND_RESPONSE_RECEIVED: 'background:responseReceived',\n  BACKGROUND_ERROR_RECEIVED: 'background:errorReceived',\n  BACKGROUND_SCRAPE_STAGE_RESULT: 'background:scrapeStageResult',\n  BACKGROUND_SCRAPE_RESULT_RECEIVED: 'background:scrapeResultReceived',\n  BACKGROUND_LOADING_STATUS_UPDATE: 'ui:loadingStatusUpdate',\n  REQUEST_MODEL_LOAD: 'ui:requestModelLoad',\n  WORKER_READY: 'worker:ready',\n  WORKER_ERROR: 'worker:error',\n  NAVIGATION_PAGE_CHANGED: 'navigation:pageChanged',\n  SCRAPE_PAGE: 'SCRAPE_PAGE',\n  SCRAPE_ACTIVE_TAB: 'SCRAPE_ACTIVE_TAB',\n  DYNAMIC_SCRIPT_MESSAGE_TYPE: 'offscreenIframeResult',\n  MODEL_DOWNLOAD_PROGRESS: 'modelDownloadProgress',\n  // Add more as needed\n});\n\nexport const WorkerEventNames = Object.freeze({\n  WORKER_SCRIPT_READY: 'workerScriptReady',\n  WORKER_READY: 'workerReady',\n  LOADING_STATUS: 'loadingStatus',\n  GENERATION_STATUS: 'generationStatus',\n  GENERATION_UPDATE: 'generationUpdate',\n  GENERATION_COMPLETE: 'generationComplete',\n  GENERATION_ERROR: 'generationError',\n  RESET_COMPLETE: 'resetComplete',\n  ERROR: 'error',\n\n});\n\nexport const ModelWorkerStates = Object.freeze({\n  UNINITIALIZED: 'uninitialized',\n  CREATING_WORKER: 'creating_worker',\n  WORKER_SCRIPT_READY: 'worker_script_ready',\n  LOADING_MODEL: 'loading_model',\n  MODEL_READY: 'model_ready',\n  GENERATING: 'generating',\n  ERROR: 'error',\n  IDLE: 'idle',\n});\n\nexport const RuntimeMessageTypes = Object.freeze({\n  LOAD_MODEL: 'loadModel',\n  SEND_CHAT_MESSAGE: 'sendChatMessage',\n  INTERRUPT_GENERATION: 'interruptGeneration',\n  RESET_WORKER: 'resetWorker',\n  GET_MODEL_WORKER_STATE: 'getModelWorkerState',\n  SCRAPE_REQUEST: 'scrapeRequest',\n  GET_DRIVE_FILE_LIST: 'getDriveFileList',\n  GET_LOG_SESSIONS: 'getLogSessions',\n  GET_LOG_ENTRIES: 'getLogEntries',\n  DETACH_SIDE_PANEL: 'detachSidePanel',\n  GET_DETACHED_STATE: 'getDetachedState',\n  GET_DB_READY_STATE: 'getDbReadyState',\n});\n\nexport const SiteMapperMessageTypes = Object.freeze({\n  OPEN_TAB: 'openTab',\n  MAPPED: 'mapped',\n});\n\nexport const ModelLoaderMessageTypes = Object.freeze({\n  INIT: 'init',\n  GENERATE: 'Generate',\n  INTERRUPT: 'Interrupt',\n  RESET: 'Reset',\n  DOWNLOAD_MODEL_ASSETS: 'DownloadModelAssets',\n  LIST_MODEL_FILES: 'ListModelFiles',\n  LIST_MODEL_FILES_RESULT: 'ListModelFilesResult',\n});\n\nexport const InternalEventBusMessageTypes = Object.freeze({\n  BACKGROUND_EVENT_BROADCAST: 'BackgroundEventBroadcast'\n});\n\nexport const RawDirectMessageTypes = Object.freeze({\n  WORKER_GENERIC_RESPONSE: 'WorkerGenericResponse',\n  WORKER_GENERIC_ERROR: 'WorkerGenericError',\n  WORKER_SCRAPE_STAGE_RESULT: 'WorkerScrapeStageResult',\n  WORKER_DIRECT_SCRAPE_RESULT: 'WorkerDirectScrapeResult',\n  WORKER_UI_LOADING_STATUS_UPDATE: 'UiLoadingStatusUpdate' // This one is used as a direct message type\n});\n\nexport const Contexts = Object.freeze({\n  BACKGROUND: 'Background',\n  MAIN_UI: 'MainUI',\n  POPUP: 'Popup',\n  OTHERS: 'Others',\n  UNKNOWN: 'Unknown',\n});\n\nexport const MessageSenderTypes = Object.freeze({\n  USER: 'user',\n  SYSTEM: 'system',\n  AI: 'ai',\n  AGENT: 'agent',\n  // Add more as needed\n});\n\nexport const MessageContentTypes = Object.freeze({\n  TEXT: 'text',\n  IMAGE: 'image',\n  FILE: 'file',\n  CODE: 'code',\n  AGENT_ACTION: 'agent_action',\n  // Add more as needed\n});\n\n\n\nexport const TableNames = Object.freeze({\n  CHATS: 'chats',\n  MESSAGES: 'messages',\n  CHAT_SUMMARIES: 'chat_summaries',\n  ATTACHMENTS: 'attachments',\n  USERS: 'users',\n  LOGS: 'logs',\n  MODEL_ASSETS: 'model_assets',\n  KNOWLEDGE_GRAPH_NODES: 'knowledge_graph_nodes',\n  KNOWLEDGE_GRAPH_EDGES: 'knowledge_graph_edges',\n});\n\n","import browser from 'webextension-polyfill';\nimport { UIEventNames } from './events/eventNames';\nimport { sendDbRequestSmart } from './sidepanel';\nimport { Contexts } from './events/eventNames';\nimport { DbAddModelAssetRequest,      \n     DbCreateAllFileManifestsForRepoRequest, \n     DbListModelFilesRequest, \n     DbUpdateManifestRequest } from './DB/dbEvents';\nimport { fetchModelMetadataInternal, filterAndValidateFilesInternal } from './Utilities/modelMetadata';\n// @ts-ignore: If using JS/TS without types for spark-md5\nimport SparkMD5 from 'spark-md5';\nimport { ModelAssetManifest } from './DB/idbModelAsset';\n\n// Constants\nconst prefix = '[Downloader]';\nconst CHUNK_SIZE = 10 * 1024 * 1024; // 10MB\nconst MAX_RETRIES = 3; // Max retries for fetch within streamAndStoreFileWithProgress\nconst PROGRESS_THROTTLE_MS = 1000;\nconst CHUNK_PROCESSED_FOR_PAUSE = 10;\nconst PAUSE_BYTES_THRESHOLD = 100 * 1024 * 1024; // 100MB\nconst LARGE_FILE_THRESHOLD = 500 * 1024 * 1024; // 500MB\nconst PAUSE_DURATION_MS = 200; // 200ms for normal files\nconst LARGE_FILE_PAUSE_DURATION_MS = 1000; // 1000ms for files >500MB\nconst LOG_GENERAL = true;\nconst LOG_CHUNK = LOG_GENERAL && true;\nconst LOG_MEMORY = LOG_GENERAL && false;\nconst LOG_ERROR = true;\nconst USE_MD5_CHECKSUM = false;\n\n\n// --- Global State & Controller ---\ninterface GlobalDownloadQueueItem {\n    manager: DownloadManager;\n    filePlan: FilePlan;\n    retries: number;\n}\n\nclass GlobalDownloadController {\n    private activeDownload: GlobalDownloadQueueItem | null = null;\n    private queue: GlobalDownloadQueueItem[] = [];\n    private static MAX_GLOBAL_RETRIES = 1; // Max retries for a file at the global queue level\n\n    public requestDownload(manager: DownloadManager, filePlan: FilePlan) {\n        if (this.queue.some(item => item.manager.modelId === manager.modelId && item.filePlan.manifest.id === filePlan.manifest.id) ||\n            (this.activeDownload?.manager.modelId === manager.modelId && this.activeDownload?.filePlan.manifest.id === filePlan.manifest.id)) {\n            if (LOG_GENERAL) console.log(prefix, `[GlobalController] File ${filePlan.manifest.fileName} for ${manager.modelId} already in global queue or active.`);\n            return;\n        }\n\n        if (LOG_GENERAL) console.log(prefix, `[GlobalController] Queuing download for ${filePlan.manifest.fileName} from manager ${manager.modelId}`);\n        this.queue.push({ manager, filePlan, retries: 0 });\n        this.tryProcessNext();\n    }\n\n    private tryProcessNext() {\n        if (this.activeDownload || this.queue.length === 0) {\n            return;\n        }\n        this.activeDownload = this.queue.shift()!;\n        if (LOG_GENERAL) console.log(prefix, `[GlobalController] Starting download for ${this.activeDownload.filePlan.manifest.fileName} from manager ${this.activeDownload.manager.modelId}`);\n\n        sendUpdateToPopup(this.activeDownload.manager.modelId, {\n            type: 'file_update',\n            fileName: this.activeDownload.filePlan.manifest.fileName,\n            status: 'downloading',\n            progress: 0\n        });\n\n        this.activeDownload.manager.executeFileDownload(this.activeDownload.filePlan)\n            .then(success => {\n                if (LOG_GENERAL) console.log(prefix, `[GlobalController] Download finished for ${this.activeDownload!.filePlan.manifest.fileName} (manager ${this.activeDownload!.manager.modelId}). Success: ${success}`);\n                this.notifyDownloadComplete(this.activeDownload!.manager, this.activeDownload!.filePlan, success);\n            });\n    }\n\n    public notifyDownloadComplete(manager: DownloadManager, filePlan: FilePlan, success: boolean) {\n        if (!this.activeDownload || this.activeDownload.manager.modelId !== manager.modelId || this.activeDownload.filePlan.manifest.id !== filePlan.manifest.id) {\n            if (LOG_ERROR) console.error(prefix, `[GlobalController] Mismatched notifyDownloadComplete. Expected ${this.activeDownload?.filePlan.manifest.fileName} for ${this.activeDownload?.manager.modelId}, got ${filePlan.manifest.fileName} for ${manager.modelId}`);\n            if (this.activeDownload && this.activeDownload.manager.modelId === manager.modelId) {\n                 // If manager is the same but file different, it's an internal error in that manager.\n                 // Mark current activeDownload as done to unblock queue.\n            }\n            this.activeDownload = null;\n            this.tryProcessNext();\n            return;\n        }\n\n        const completedItem = this.activeDownload;\n        this.activeDownload = null;\n\n        if (!success && completedItem.retries < GlobalDownloadController.MAX_GLOBAL_RETRIES) {\n            completedItem.retries++;\n            if (LOG_GENERAL) console.log(prefix, `[GlobalController] Re-queuing ${filePlan.manifest.fileName} for ${manager.modelId}, global attempt ${completedItem.retries + 1}`);\n            this.queue.unshift(completedItem); // Add to front for immediate retry\n        } else if (!success) {\n             if (LOG_ERROR) console.error(prefix, `[GlobalController] Download failed permanently for ${filePlan.manifest.fileName} (manager ${manager.modelId}) after ${completedItem.retries + 1} global attempts.`);\n        }\n        this.tryProcessNext();\n    }\n}\nconst globalController = new GlobalDownloadController();\nconst downloadManagers: Map<string, DownloadManager> = new Map();\nlet globalPopupCallback: ((update: any) => void) | null = null;\n\nexport interface FilePlan {\n    manifest: ModelAssetManifest;\n    isONNX: boolean;\n    fullDownloadUrl: string;\n    fileIdx: number;\n}\n\ninterface DownloadProgress {\n    totalFiles: number;\n    totalBytes: number;\n    currentFileIndex: number;\n    currentFile: string;\n    currentFileSize: number;\n    currentFileDownloaded: number;\n    totalDownloaded: number;\n    done: boolean;\n    error: string | null;\n    message?: string;\n    filesSuccessfullyProcessedCount: number;\n    totalFilesToAttempt: number;\n    progress?: number;\n}\n\ninterface BadChunkInfo {\n    fileName: string;\n    chunkIndex: number;\n    reason: string;\n    chunkLength?: number;\n    payload?: any;\n}\n\nexport interface FileState {\n    status: 'unknown' | 'present' | 'queued' | 'downloading' | 'downloaded' | 'failed';\n    progress: number;\n}\n\nclass DownloadError extends Error {\n    constructor(message: string, public context?: any) {\n        super(message);\n        this.name = 'DownloadError';\n    }\n}\n\nclass ProgressManager {\n    private progress: DownloadProgress;\n    private lastSentPercent: number = 0;\n    private lastSentTime: number = 0;\n\n    constructor(private managerModelId: string) {\n        this.progress = this.createInitialState();\n    }\n\n    private createInitialState(): DownloadProgress {\n        return {\n            totalFiles: 0,\n            totalBytes: 0,\n            currentFileIndex: 0,\n            currentFile: '',\n            currentFileSize: 0,\n            currentFileDownloaded: 0,\n            totalDownloaded: 0,\n            done: false,\n            error: null,\n            filesSuccessfullyProcessedCount: 0,\n            totalFilesToAttempt: 0,\n        };\n    }\n\n    reset() {\n        this.progress = this.createInitialState();\n        this.lastSentPercent = 0;\n        this.lastSentTime = 0;\n        if (LOG_GENERAL) console.log(prefix, `[${this.managerModelId}] ProgressManager reset`);\n    }\n\n    incrementTotalDownloaded(bytes: number) {\n        this.progress.totalDownloaded += bytes;\n    }\n\n    updateProgress(update: Partial<DownloadProgress>) {\n        this.progress = { ...this.progress, ...update };\n        const percent = this.progress.totalBytes > 0\n            ? Math.floor((this.progress.totalDownloaded / this.progress.totalBytes) * 100)\n            : 0;\n        this.progress.progress = percent;\n        const now = Date.now();\n\n        let message = '';\n        if (this.progress.error) {\n            message = `Error: ${this.progress.error}`;\n        } else if (this.progress.done) {\n            message = `Download complete: ${this.progress.filesSuccessfullyProcessedCount} of ${this.progress.totalFilesToAttempt} files. Total: ${formatBytes(this.progress.totalDownloaded)}.`;\n        } else {\n            message = `Downloading ${this.progress.currentFile || 'N/A'} (${formatBytes(this.progress.currentFileDownloaded)} of ${formatBytes(this.progress.currentFileSize)})  Overall: ${formatBytes(this.progress.totalDownloaded)} of ${formatBytes(this.progress.totalBytes)} (${percent}%)`;\n        }\n        this.progress.message = message;\n\n        const shouldSend = this.progress.done || this.progress.error || percent > this.lastSentPercent || now - this.lastSentTime >= PROGRESS_THROTTLE_MS;\n        if (shouldSend) {\n            sendUiGlobalProgress(this.managerModelId, this.progress);\n            this.lastSentPercent = percent;\n            this.lastSentTime = now;\n            if (LOG_GENERAL && (this.progress.done || this.progress.error || this.progress.progress === 0 || this.progress.progress === 100 || (this.progress.progress && this.progress.progress % 10 === 0))) { // Throttle logging\n                 console.log(prefix, `[${this.managerModelId}] Progress update sent: ${message}`);\n            }\n        }\n    }\n\n    getProgress(): Readonly<DownloadProgress> {\n        return { ...this.progress };\n    }\n}\n\nclass DownloadManager {\n    public modelId: string;\n    private baseDownloadUrl: string;\n    public filePlans: FilePlan[] = [];\n    public fileStates: { [fileName: string]: FileState } = {};\n    private localDownloadQueue: FilePlan[] = [];\n    public nonOnnxTotalSize: number = 0;\n    public nonOnnxDownloadedSize: number = 0;\n    private successfullyProcessedCount: number = 0;\n    private metadata: any = null;\n    private progressManager: ProgressManager;\n    public manifests: ModelAssetManifest[] = [];\n\n    constructor(modelId: string, manifestsFromUI: ModelAssetManifest[] | null = null) {\n        this.modelId = modelId;\n        this.baseDownloadUrl = `https://huggingface.co/${modelId}/resolve/main/`;\n        this.progressManager = new ProgressManager(this.modelId);\n        this.manifests = manifestsFromUI || [];\n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] DownloadManager initialized.`);\n    }\n\n    async initAndProcessDownloads(selectedOnnxFile: string | null = null) {\n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Initializing and processing downloads. Selected ONNX: ${selectedOnnxFile}`);\n        this.resetInternalState();\n        return this.fetchAndProcessManifests(selectedOnnxFile);\n    }\n\n    private resetInternalState() {\n        this.filePlans = [];\n        this.localDownloadQueue = [];\n        this.nonOnnxTotalSize = 0;\n        this.nonOnnxDownloadedSize = 0;\n        this.successfullyProcessedCount = 0;\n        this.metadata = null;\n        this.progressManager.reset();\n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Internal state reset for new operation.`);\n    }\n\n    private async fetchAndProcessManifests(selectedOnnxFile: string | null) {\n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Fetching manifests.`);\n        let req: any;\n        let manifestResult: any;\n\n        if (this.manifests.length > 0) {\n            if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Using ${this.manifests.length} manifests provided from UI.`);\n        } else {\n            req = new DbListModelFilesRequest({ folder: this.modelId, returnObjects: true });\n            manifestResult = await sendDbRequestSmart(req);\n            this.manifests = manifestResult && manifestResult.success ? manifestResult.data : [];\n            if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Read ${this.manifests.length} manifests from DB.`);\n        }\n\n        if (this.manifests.length === 0) {\n            if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] No manifests locally, fetching metadata from remote.`);\n            try {\n                this.metadata = await fetchModelMetadataInternal(this.modelId);\n                if (!this.metadata) {\n                    if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Failed to fetch metadata.`);\n                    throw new DownloadError(\"Failed to fetch metadata\");\n                }\n                if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Fetched metadata.`, this.metadata);\n\n                const { neededFileEntries, message: filterMessage } = await filterAndValidateFilesInternal(this.metadata, this.modelId, this.baseDownloadUrl);\n                if (filterMessage || neededFileEntries.length === 0) {\n                    const msg = filterMessage || `No usable files found for ${this.modelId}.`;\n                    if (LOG_ERROR) console.log(prefix, `[${this.modelId}] ${msg}`);\n                    this.progressManager.updateProgress({ error: msg, done: true });\n                    return { success: false, message: msg };\n                }\n                if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Filtered and validated ${neededFileEntries.length} files.`);\n\n                const createReq = new DbCreateAllFileManifestsForRepoRequest(neededFileEntries);\n                await sendDbRequestSmart(createReq);\n                if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Stored manifests in DB.`);\n\n                req = new DbListModelFilesRequest({ folder: this.modelId, returnObjects: true });\n                manifestResult = await sendDbRequestSmart(req);\n                this.manifests = manifestResult && manifestResult.success ? manifestResult.data : [];\n                if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Re-read ${this.manifests.length} manifests from DB.`);\n            } catch (error) {\n                const errMsg = error instanceof Error ? error.message : String(error);\n                if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Critical error fetching metadata:`, error);\n                this.progressManager.updateProgress({ error: errMsg, done: true });\n                return { success: false, error: `Download process failed for ${this.modelId}: ${errMsg}` };\n            }\n        }\n\n        if (this.manifests.length === 0) {\n            const msg = `No manifests available for ${this.modelId} after DB and remote fetch.`;\n            if (LOG_ERROR) console.log(prefix, `[${this.modelId}] ${msg}`);\n            this.progressManager.updateProgress({ error: msg, done: true });\n            return { success: false, message: msg };\n        }\n\n        return this.processManifests(selectedOnnxFile);\n    }\n\n    private async processManifests(selectedOnnxFile: string | null) {\n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Processing ${this.manifests.length} manifests. Selected ONNX: ${selectedOnnxFile}`);\n        const onnxFiles = this.manifests.filter(m => m.fileType === 'onnx');\n        const nonOnnxFiles = this.manifests.filter(m => m.fileType !== 'onnx');\n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Found ${onnxFiles.length} ONNX files and ${nonOnnxFiles.length} non-ONNX files`);\n\n        let manifestsToPlan: ModelAssetManifest[];\n        if (selectedOnnxFile && selectedOnnxFile !== 'all') {\n            manifestsToPlan = [\n                ...nonOnnxFiles,\n                ...onnxFiles.filter(m => m.fileName === selectedOnnxFile)\n            ];\n        } else {\n            manifestsToPlan = this.manifests;\n        }\n        \n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Building download plan for ${manifestsToPlan.length} files.`);\n        const { downloadPlan, totalBytesToDownload } = buildDownloadPlanInternal(manifestsToPlan);\n        this.filePlans = downloadPlan; \n\n        const { initialStates, missingNonOnnx, nonOnnxTotal, nonOnnxPresent } = await getMissingFilesAndInitialStates(this.filePlans, this.modelId);\n        this.fileStates = initialStates;\n        this.nonOnnxTotalSize = nonOnnxTotal;\n        this.nonOnnxDownloadedSize = nonOnnxPresent;\n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Initial file states: ${Object.keys(initialStates).length} files, ${missingNonOnnx.length} missing non-ONNX files. Non-ONNX: ${formatBytes(nonOnnxPresent)} / ${formatBytes(nonOnnxTotal)} present.`);\n\n        let initialOverallDownloadedBytes = 0;\n        this.successfullyProcessedCount = 0;\n        this.filePlans.forEach(plan => {\n            if (this.fileStates[plan.manifest.fileName]?.status === 'present') {\n                initialOverallDownloadedBytes += plan.manifest.size;\n                this.successfullyProcessedCount++;\n            }\n        });\n\n        this.progressManager.updateProgress({\n            totalFiles: this.filePlans.length,\n            totalBytes: totalBytesToDownload,\n            totalFilesToAttempt: this.filePlans.length, \n            filesSuccessfullyProcessedCount: this.successfullyProcessedCount,\n            totalDownloaded: initialOverallDownloadedBytes,\n        });\n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Download plan built: ${this.filePlans.length} files, ${formatBytes(totalBytesToDownload)}. Initial progress: ${this.successfullyProcessedCount} files / ${formatBytes(initialOverallDownloadedBytes)} already present.`);\n\n\n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Queueing ${missingNonOnnx.length} missing non-ONNX files for download.`);\n        missingNonOnnx.forEach(file => {\n            const fileStateStatus = this.fileStates[file.manifest.fileName]?.status;\n            const isAlreadyHandled = fileStateStatus === 'present' || \n                                 fileStateStatus === 'downloaded' || \n                                 fileStateStatus === 'queued' || \n                                 fileStateStatus === 'downloading';\n            if (!isAlreadyHandled) {\n                this.requestFileDownload(file);\n                if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Requested non-ONNX file: ${file.manifest.fileName}`);\n            }\n        });\n\n        const onnxFilePlansInCurrentScope = this.filePlans.filter(p => p.isONNX);\n\n        if (onnxFilePlansInCurrentScope.length === 1) {\n            const singleOnnxPlan = onnxFilePlansInCurrentScope[0];\n            if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Single ONNX file in scope: ${singleOnnxPlan.manifest.fileName}`);\n            const fileStateStatus = this.fileStates[singleOnnxPlan.manifest.fileName]?.status;\n            const isAlreadyHandled = fileStateStatus === 'present' || \n                                 fileStateStatus === 'downloaded' || \n                                 fileStateStatus === 'queued' || \n                                 fileStateStatus === 'downloading';\n            if (!isAlreadyHandled) {\n                this.requestFileDownload(singleOnnxPlan);\n                if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Requested single ONNX file: ${singleOnnxPlan.manifest.fileName}`);\n            }\n        } else if (onnxFilePlansInCurrentScope.length > 1) {\n            if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Multiple ONNX files (${onnxFilePlansInCurrentScope.length}) in scope.`);\n            if (!selectedOnnxFile || selectedOnnxFile === 'all') { \n                this.progressManager.updateProgress({ \n                    currentFile: '',\n                    currentFileDownloaded: 0,\n                });\n                if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Showing ONNX selection popup.`);\n                \n                const currentNonOnnxPlans = this.filePlans.filter(p => !p.isONNX);\n                let nonOnnxStatusForPopup = 'unknown';\n                if (currentNonOnnxPlans.length > 0) {\n                    const allNonOnnxPresent = currentNonOnnxPlans.every(p => {\n                        const s = this.fileStates[p.manifest.fileName]?.status;\n                        return s === 'present' || s === 'downloaded';\n                    });\n                    const anyNonOnnxDownloading = currentNonOnnxPlans.some(p => this.fileStates[p.manifest.fileName]?.status === 'downloading');\n                    const anyNonOnnxQueued = currentNonOnnxPlans.some(p => this.fileStates[p.manifest.fileName]?.status === 'queued');\n                    const anyNonOnnxFailed = currentNonOnnxPlans.some(p => this.fileStates[p.manifest.fileName]?.status === 'failed');\n\n                    if (allNonOnnxPresent) nonOnnxStatusForPopup = 'present';\n                    else if (anyNonOnnxDownloading) nonOnnxStatusForPopup = 'downloading';\n                    else if (anyNonOnnxQueued) nonOnnxStatusForPopup = 'queued';\n                    else if (anyNonOnnxFailed) nonOnnxStatusForPopup = 'failed';\n                    else nonOnnxStatusForPopup = 'pending'; \n                } else {\n                    nonOnnxStatusForPopup = 'no_files'; \n                }\n\n                let nonOnnxProgressForPopup = 0;\n                if (this.nonOnnxTotalSize > 0) { \n                    nonOnnxProgressForPopup = Math.floor((this.nonOnnxDownloadedSize / this.nonOnnxTotalSize) * 100);\n                } else if (currentNonOnnxPlans.length === 0) {\n                    nonOnnxProgressForPopup = 100; \n                }\n\n                if (window.showOnnxSelectionPopup) {\n                    window.showOnnxSelectionPopup(\n                        this.modelId, \n                        onnxFilePlansInCurrentScope, \n                        this.filePlans, \n                        this.fileStates, \n                        nonOnnxProgressForPopup,\n                        nonOnnxStatusForPopup,\n                        (filePlan: FilePlan) => this.handleUserFileRequestFromPopup(filePlan)\n                    );\n                }\n                return { success: true, message: \"Multiple ONNX files, popup shown for user selection.\" };\n            } else { \n                const planToDownload = onnxFilePlansInCurrentScope.find(p => p.manifest.fileName === selectedOnnxFile);\n                if (planToDownload) {\n                    if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Pre-selected ONNX file: ${selectedOnnxFile}`);\n                    const fileStateStatus = this.fileStates[planToDownload.manifest.fileName]?.status;\n                    const isAlreadyHandled = fileStateStatus === 'present' || \n                                         fileStateStatus === 'downloaded' || \n                                         fileStateStatus === 'queued' || \n                                         fileStateStatus === 'downloading';\n                    if (!isAlreadyHandled) {\n                        this.requestFileDownload(planToDownload);\n                        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Requested pre-selected ONNX file: ${selectedOnnxFile}`);\n                    }\n                } else {\n                     if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Selected ONNX file (${selectedOnnxFile}) not found in current plan manifests.`);\n                }\n            }\n        }\n        this.checkRepoCompletion();\n        return { success: true, message: \"Model manifests processed and UI notified.\" };\n    }\n\n    public requestFileDownload(filePlan: FilePlan) {\n        const existingState = this.fileStates[filePlan.manifest.fileName]?.status;\n        if (existingState === 'present' || existingState === 'downloaded' || existingState === 'queued' || existingState === 'downloading') {\n            if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] File ${filePlan.manifest.fileName} already handled (status: ${existingState}). Ignoring request.`);\n            return;\n        }\n\n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Requesting file download via GlobalController: ${filePlan.manifest.fileName}`);\n        this.localDownloadQueue.push(filePlan);\n        this.fileStates[filePlan.manifest.fileName] = { status: 'queued', progress: 0 };\n        sendUpdateToPopup(this.modelId, { type: 'file_update', fileName: filePlan.manifest.fileName, status: 'queued', progress: 0 });\n        this.progressManager.updateProgress({}); \n        globalController.requestDownload(this, filePlan);\n    }\n\n    public async executeFileDownload(filePlan: FilePlan): Promise<boolean> {\n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Executing download for: ${filePlan.manifest.fileName}`);\n        this.fileStates[filePlan.manifest.fileName] = { status: 'downloading', progress: 0 };\n        sendUpdateToPopup(this.modelId, { type: 'file_update', fileName: filePlan.manifest.fileName, status: 'downloading', progress: 0 });\n\n        if (!filePlan.isONNX) {\n            const nonOnnxProgressPercent = this.nonOnnxTotalSize > 0 ? Math.floor((this.nonOnnxDownloadedSize / this.nonOnnxTotalSize) * 100) : (this.filePlans.filter(p => !p.isONNX).length > 0 ? 0 : 100);\n            sendUpdateToPopup(this.modelId, { type: 'non_onnx_update', status: 'downloading', progress: nonOnnxProgressPercent });\n        }\n\n        this.progressManager.updateProgress({\n            currentFile: filePlan.manifest.fileName,\n            currentFileSize: filePlan.manifest.size,\n            currentFileDownloaded: 0,\n        });\n\n        const badChunks: BadChunkInfo[] = [];\n        const result = await this._modified_streamAndStoreFileWithProgress(filePlan, badChunks);\n\n        if (result.fileFailed || result.badChunkFound) {\n            this.fileStates[filePlan.manifest.fileName] = { status: 'failed', progress: this.fileStates[filePlan.manifest.fileName]?.progress || 0 };\n            sendUpdateToPopup(this.modelId, { type: 'file_update', fileName: filePlan.manifest.fileName, status: 'failed', progress: this.fileStates[filePlan.manifest.fileName].progress });\n            if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Download failed for ${filePlan.manifest.fileName}.`);\n            this.progressManager.updateProgress({ error: `Failed ${filePlan.manifest.fileName}` });\n            this.checkRepoCompletion();\n            return false;\n        } else {\n            this.fileStates[filePlan.manifest.fileName] = { status: 'downloaded', progress: 100 };\n            sendUpdateToPopup(this.modelId, { type: 'file_update', fileName: filePlan.manifest.fileName, status: 'downloaded', progress: 100 });\n            this.successfullyProcessedCount++;\n            this.progressManager.updateProgress({ filesSuccessfullyProcessedCount: this.successfullyProcessedCount });\n            if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Successfully downloaded ${filePlan.manifest.fileName}`);\n\n            await this.updateManifestStatusInDb(filePlan, 'complete');\n\n            if (!filePlan.isONNX) {\n                const nonOnnxProgressPercent = this.nonOnnxTotalSize > 0 ? Math.floor((this.nonOnnxDownloadedSize / this.nonOnnxTotalSize) * 100) : (this.filePlans.filter(p => !p.isONNX).length > 0 ? 0 : 100);\n                sendUpdateToPopup(this.modelId, { type: 'non_onnx_update', status: nonOnnxProgressPercent === 100 ? 'downloaded' : 'downloading', progress: nonOnnxProgressPercent });\n                const allNonOnnxProcessedForThisRepo = this.filePlans\n                    .filter(p => !p.isONNX)\n                    .every(p => this.fileStates[p.manifest.fileName]?.status === 'downloaded' || this.fileStates[p.manifest.fileName]?.status === 'present');\n                if (allNonOnnxProcessedForThisRepo) {\n                    sendUpdateToPopup(this.modelId, { type: 'all_non_onnx_complete' });\n                    if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] All non-ONNX files processed.`);\n                }\n            }\n            this.checkRepoCompletion();\n            return true;\n        }\n    }\n    private async _modified_streamAndStoreFileWithProgress(filePlan: FilePlan, badChunks: BadChunkInfo[]): Promise<{ fileFailed: boolean; fileName: string; fileBytesDownloaded: number; fileChunksDownloaded: number; badChunkFound: boolean }> {\n        const { manifest, isONNX } = filePlan;\n        let fileBytesDownloaded = 0;\n        let fileChunksDownloaded = 0;\n        let fileFailed = false;\n        let badChunkFound = false;\n        let chunkIndex = 0;\n        const allChunksSuccess = true; \n        let bytesSinceLastPause = 0;\n        const chunkGroupId = `${this.modelId}/${manifest.fileName}`;\n        const isLargeFile = manifest.size > LARGE_FILE_THRESHOLD;\n        const pauseDuration = isLargeFile ? LARGE_FILE_PAUSE_DURATION_MS : PAUSE_DURATION_MS;\n\n        if (LOG_MEMORY) logMemory(`[${this.modelId}] Before file ${manifest.fileName}`);\n\n        try {\n            let attempt = 0;\n            let response: Response | null = null;\n            while (attempt < MAX_RETRIES) { \n                try {\n                    response = await fetch(filePlan.fullDownloadUrl);\n                    if (response.ok) break;\n                    if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Fetch attempt ${attempt + 1} failed for ${manifest.fileName}: ${response.status} ${response.statusText}`);\n                    attempt++;\n                    if (attempt < MAX_RETRIES) await new Promise(res => setTimeout(res, 200 * Math.pow(2, attempt)));\n                } catch (error) {\n                    if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Fetch error for ${manifest.fileName} on attempt ${attempt + 1}:`, error);\n                    attempt++;\n                     if (attempt < MAX_RETRIES) await new Promise(res => setTimeout(res, 200 * Math.pow(2, attempt)));\n                }\n            }\n            if (!response || !response.ok) {\n                const errorText = response ? await response.text() : 'No response';\n                throw new DownloadError(`[${this.modelId}] Failed to download ${manifest.fileName}: ${response?.status} ${response?.statusText}`, { errorText });\n            }\n            if (!response.body) throw new DownloadError(`[${this.modelId}] Download response body is null for ${manifest.fileName}`);\n\n            const reader = response.body.getReader();\n            let buffer = new Uint8Array(CHUNK_SIZE);\n            let bufferOffset = 0;\n\n            while (true) {\n                const { done, value } = await reader.read();\n                if (done) break;\n                if (!(value instanceof Uint8Array)) {\n                    if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Invalid chunk data for ${manifest.fileName}, chunk ${chunkIndex}: Type ${typeof value}`);\n                    badChunks.push({ fileName: manifest.fileName, chunkIndex, reason: 'Invalid chunk data type', payload: value });\n                    fileFailed = true; badChunkFound = true; reader.cancel('Invalid chunk data'); break;\n                }\n\n                let valueOffset = 0;\n                while (valueOffset < value.length) {\n                    const remainingBuffer = CHUNK_SIZE - bufferOffset;\n                    const copyLength = Math.min(remainingBuffer, value.length - valueOffset);\n                    buffer.set(value.subarray(valueOffset, valueOffset + copyLength), bufferOffset);\n                    bufferOffset += copyLength;\n                    valueOffset += copyLength;\n\n                    if (bufferOffset === CHUNK_SIZE) {\n                        const chunkToStore = buffer;\n                        buffer = new Uint8Array(CHUNK_SIZE); \n                        bufferOffset = 0;\n\n                        if (!manifest.fileName || typeof chunkIndex !== 'number' || !chunkToStore || chunkToStore.byteLength === 0) {\n                            const reason = !manifest.fileName ? 'Missing fileName' : typeof chunkIndex !== 'number' ? 'Invalid chunkIndex' : !chunkToStore ? 'Missing chunkToStore' : 'Empty chunk';\n                            if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Bad chunk for ${manifest.fileName}, chunk ${chunkIndex}: ${reason}, Length: ${chunkToStore?.byteLength || 0}`);\n                            badChunks.push({ fileName: manifest.fileName, chunkIndex, reason, chunkLength: chunkToStore?.byteLength, payload: { fileName: manifest.fileName, chunkIndex, chunkToStore } });\n                            badChunkFound = true; fileFailed = true; reader.cancel('Bad chunk detected'); break;\n                        }\n                        \n                        const chunkArrayBuffer = chunkToStore.buffer.slice(chunkToStore.byteOffset, chunkToStore.byteOffset + chunkToStore.byteLength);\n                        const dbPayload = {\n                            folder: this.modelId, modelId: this.modelId, fileName: manifest.fileName, fileType: manifest.fileType,\n                            data: chunkArrayBuffer, chunkIndex, totalChunks: manifest.totalChunks, chunkGroupId,\n                            binarySize: chunkToStore.byteLength, totalFileSize: manifest.size,\n                            checksum: USE_MD5_CHECKSUM ? checksumChunkMD5(chunkArrayBuffer) : 'na',\n                        };\n                        const success = await tryStoreChunkInternal(dbPayload); \n                        if (!success) {\n                            if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Failed to store chunk ${chunkIndex} for ${manifest.fileName} after retries.`);\n                            badChunks.push({ fileName: manifest.fileName, chunkIndex, reason: 'Failed to store chunk after retries', chunkLength: chunkToStore.byteLength, payload: dbPayload });\n                            badChunkFound = true; fileFailed = true; reader.cancel('Chunk storage failed'); break;\n                        }\n\n                        const bytesInThisChunk = chunkToStore.byteLength;\n                        fileBytesDownloaded += bytesInThisChunk;\n                        bytesSinceLastPause += bytesInThisChunk;\n                        fileChunksDownloaded++;\n\n                        this.progressManager.incrementTotalDownloaded(bytesInThisChunk); \n                        this.progressManager.updateProgress({ currentFileDownloaded: fileBytesDownloaded }); \n\n                        const currentFileProgressPercent = manifest.size > 0 ? Math.floor((fileBytesDownloaded / manifest.size) * 100) : 100;\n                        if (this.fileStates[manifest.fileName]) {\n                           this.fileStates[manifest.fileName].progress = currentFileProgressPercent;\n                        } else {\n                            if(LOG_ERROR) console.error(prefix, `[${this.modelId}] FileState for ${manifest.fileName} not found during chunk processing! Initializing.`);\n                            this.fileStates[manifest.fileName] = {status: 'downloading', progress: currentFileProgressPercent };\n                        }\n                        sendUpdateToPopup(this.modelId, { type: 'file_update', fileName: manifest.fileName, status: 'downloading', progress: currentFileProgressPercent });\n\n                        if (!isONNX) { this.nonOnnxDownloadedSize += bytesInThisChunk; }\n\n                        if (LOG_CHUNK && (chunkIndex === 0 || chunkIndex === manifest.totalChunks - 1 || chunkIndex % 10 === 0 )) {\n                            console.log(prefix, `[${this.modelId}] Stored chunk ${chunkIndex} for ${manifest.fileName}, bytes: ${bytesInThisChunk}, total downloaded for file: ${fileBytesDownloaded}`);\n                        }\n                        chunkIndex++;\n                        if (chunkIndex % CHUNK_PROCESSED_FOR_PAUSE === 0 || bytesSinceLastPause >= PAUSE_BYTES_THRESHOLD) {\n                            if (LOG_MEMORY) logMemory(`[${this.modelId}] Pausing after chunk ${chunkIndex} for ${manifest.fileName}`);\n                            await new Promise(res => setTimeout(res, pauseDuration));\n                            bytesSinceLastPause = 0;\n                        }\n                    }\n                }\n                if (fileFailed || badChunkFound) break; \n            } \n\n            if (allChunksSuccess && !fileFailed && bufferOffset > 0) { \n                const finalChunkToStore = buffer.subarray(0, bufferOffset);\n\n                if (!manifest.fileName || typeof chunkIndex !== 'number' || !finalChunkToStore || finalChunkToStore.byteLength === 0) {\n                    const reason = !manifest.fileName ? 'Missing fileName' : typeof chunkIndex !== 'number' ? 'Invalid chunkIndex' : !finalChunkToStore ? 'Missing finalChunkToStore' : 'Empty final chunk';\n                    if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Bad final chunk for ${manifest.fileName}, chunk ${chunkIndex}: ${reason}, Length: ${finalChunkToStore?.byteLength || 0}`);\n                    badChunks.push({ fileName: manifest.fileName, chunkIndex, reason, chunkLength: finalChunkToStore?.byteLength, payload: { fileName: manifest.fileName, chunkIndex, finalChunkToStore } });\n                    badChunkFound = true; fileFailed = true;\n                } else {\n                    const finalChunkArrayBuffer = finalChunkToStore.buffer.slice(finalChunkToStore.byteOffset, finalChunkToStore.byteOffset + finalChunkToStore.byteLength);\n                    const dbPayload = {\n                        folder: this.modelId, modelId: this.modelId, fileName: manifest.fileName, fileType: manifest.fileType,\n                        data: finalChunkArrayBuffer, chunkIndex, totalChunks: manifest.totalChunks, chunkGroupId, \n                        binarySize: finalChunkToStore.byteLength, totalFileSize: manifest.size,\n                        checksum: USE_MD5_CHECKSUM ? checksumChunkMD5(finalChunkArrayBuffer) : 'na',\n                    };\n                    const success = await tryStoreChunkInternal(dbPayload);\n                    if (!success) {\n                        if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Failed to store final chunk ${chunkIndex} for ${manifest.fileName}`);\n                        badChunks.push({ fileName: manifest.fileName, chunkIndex, reason: 'Failed to store final chunk', chunkLength: finalChunkToStore.byteLength, payload: dbPayload });\n                        badChunkFound = true; fileFailed = true;\n                    } else {\n                        const bytesInThisChunk = finalChunkToStore.byteLength;\n                        fileBytesDownloaded += bytesInThisChunk;\n                        fileChunksDownloaded++;\n                        this.progressManager.incrementTotalDownloaded(bytesInThisChunk);\n                        this.progressManager.updateProgress({ currentFileDownloaded: fileBytesDownloaded });\n                        if(this.fileStates[manifest.fileName]) {\n                           this.fileStates[manifest.fileName].progress = 100;\n                        } else {\n                             if(LOG_ERROR) console.error(prefix, `[${this.modelId}] FileState for ${manifest.fileName} not found at final chunk! Initializing.`);\n                             this.fileStates[manifest.fileName] = {status: 'downloading', progress: 100 };\n                        }\n                        sendUpdateToPopup(this.modelId, { type: 'file_update', fileName: manifest.fileName, status: 'downloading', progress: 100 }); \n                        if (!isONNX) { this.nonOnnxDownloadedSize += bytesInThisChunk; }\n                        if (LOG_CHUNK) console.log(prefix, `[${this.modelId}] Stored final chunk ${chunkIndex} for ${manifest.fileName}, bytes: ${bytesInThisChunk}, total downloaded for file: ${fileBytesDownloaded}`);\n                    }\n                }\n            }\n            if (manifest.size > LARGE_FILE_THRESHOLD) await new Promise(res => setTimeout(res, pauseDuration)); \n            if (LOG_MEMORY) logMemory(`[${this.modelId}] After file ${manifest.fileName}`);\n\n        } catch (error) { \n            fileFailed = true;\n            const errMsg = error instanceof Error ? error.message : String(error);\n            const context = error instanceof DownloadError ? error.context : null;\n            if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Download stream error for ${this.modelId}/${manifest.fileName}: ${errMsg}`, context ? `Context: ${JSON.stringify(context)}` : '');\n        }\n        return { fileFailed: fileFailed || badChunkFound, fileName: manifest.fileName, fileBytesDownloaded, fileChunksDownloaded, badChunkFound };\n    }\n\n\n    public handleUserFileRequestFromPopup(filePlan: FilePlan) {\n        if (filePlan.manifest.folder !== this.modelId) {\n             if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Popup request for file ${filePlan.manifest.fileName} belonging to different model ${filePlan.manifest.folder}. Ignored.`);\n             return;\n        }\n        if (!this.filePlans.some(p => p.manifest.id === filePlan.manifest.id)) {\n            if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Popup request for file ${filePlan.manifest.fileName} not in current filePlans. Ignored.`);\n            return;\n        }\n\n        if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] User requested download for ${filePlan.manifest.fileName} from popup.`);\n        this.requestFileDownload(filePlan);\n    }\n\n    private checkRepoCompletion() {\n        if (this.filePlans.length === 0) {\n            this.progressManager.updateProgress({\n                done: true,\n                error: null,\n                message: `No files to process for ${this.modelId}.`\n            });\n            return;\n        }\n\n        const allFilesForThisRepoProcessed = this.filePlans.every(p => {\n            const status = this.fileStates[p.manifest.fileName]?.status;\n            return status === 'downloaded' || status === 'present' || status === 'failed';\n        });\n\n        if (allFilesForThisRepoProcessed) {\n            const anyFailed = this.filePlans.some(p => this.fileStates[p.manifest.fileName]?.status === 'failed');\n            const finalMessage = !anyFailed\n                ? `All files for ${this.modelId} processed successfully.`\n                : `Some files for ${this.modelId} failed to download.`;\n\n            if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Repo completion check: ${finalMessage}`);\n            sendUpdateToPopup(this.modelId, { type: 'repo_complete', modelId: this.modelId, success: !anyFailed, finalMessage });\n            \n            this.progressManager.updateProgress({\n                done: true,\n                error: anyFailed ? \"Some files failed\" : null,\n            });\n        }\n    }\n    private async updateManifestStatusInDb(filePlan: FilePlan, status: string) {\n        try {\n            await sendDbRequestSmart(new DbUpdateManifestRequest(filePlan.manifest.id, { status, updatedAt: Date.now() }));\n            if (LOG_GENERAL) console.log(prefix, `[${this.modelId}] Updated manifest status in DB for ${filePlan.manifest.fileName} to ${status}`);\n        } catch (e) {\n            if (LOG_ERROR) console.log(prefix, `[${this.modelId}] Failed to update manifest status in DB for ${filePlan.manifest.fileName}:`, e);\n        }\n    }\n}\n\nfunction getOrCreateDownloadManager(modelId: string, manifestsFromUI: ModelAssetManifest[] | null = null): DownloadManager {\n    if (!downloadManagers.has(modelId)) {\n        if (LOG_GENERAL) console.log(prefix, `Creating new DownloadManager for ${modelId}`);\n        const newManager = new DownloadManager(modelId, manifestsFromUI);\n        downloadManagers.set(modelId, newManager);\n        return newManager;\n    }\n    const existingManager = downloadManagers.get(modelId)!;\n    if (manifestsFromUI && manifestsFromUI.length > 0) {\n        if (LOG_GENERAL) console.log(prefix, `[${modelId}] Updating manifests for existing manager from UI provided data.`);\n        existingManager.manifests = manifestsFromUI;\n    } else if (manifestsFromUI && manifestsFromUI.length === 0 && existingManager.manifests.length > 0) {\n        if (LOG_GENERAL) console.log(prefix, `[${modelId}] Empty manifestsFromUI provided, existing manager will clear its current set if it proceeds with fetch.`);\n        existingManager.manifests = [];\n    }\n    return existingManager;\n}\n\nexport async function downloadModelAssets(\n    modelId: string,\n    selectedOnnxFile: string | null = null,\n    manifestsFromUI: ModelAssetManifest[] | null = null\n) {\n    if (!modelId) {\n        if (LOG_ERROR) console.error(prefix, \"downloadModelAssets called with no modelId\");\n        const errorMsg = \"No modelId provided for download.\";\n        return { success: false, message: errorMsg, error: errorMsg };\n    }\n    const manager = getOrCreateDownloadManager(modelId, manifestsFromUI);\n    return manager.initAndProcessDownloads(selectedOnnxFile);\n}\n\nexport function registerPopupCallbacks(callback: (update: any) => void) {\n    globalPopupCallback = callback;\n    if (LOG_GENERAL) console.log(prefix, 'Registered global popup callback.');\n}\n\n\nfunction sendUpdateToPopup(modelId: string, update: any) {\n    if (typeof globalPopupCallback === 'function') {\n        const updateWithModelId = { ...update, modelId };\n        globalPopupCallback(updateWithModelId);\n        const isProgressUpdate = update.type === 'file_update' && typeof update.progress === 'number';\n        const logThisUpdate = !isProgressUpdate || update.progress === 0 || update.progress === 100 || update.status === 'failed' || update.status === 'downloaded' || update.status === 'queued';\n\n        if (LOG_GENERAL && logThisUpdate) {\n             console.log(prefix, `Sent popup update for ${modelId}: type ${update.type}, file ${update.fileName || 'N/A'}, status ${update.status || 'N/A'}`);\n        }\n    }\n}\n\nexport function handleUserFileRequestFromPopup(modelId: string, filePlan: FilePlan) {\n    const manager = downloadManagers.get(modelId);\n    if (manager) {\n        manager.handleUserFileRequestFromPopup(filePlan);\n    } else {\n        if (LOG_ERROR) console.error(prefix, `No DownloadManager found for ${modelId} to handle popup request for ${filePlan.manifest.fileName}`);\n    }\n}\n\nfunction sendUiGlobalProgress(managerModelId: string, payload: DownloadProgress) {\n    const payloadWithModelId = { ...payload, modelId: managerModelId };\n    if (typeof window !== 'undefined' && (window as any).EXTENSION_CONTEXT === Contexts.MAIN_UI) {\n        document.dispatchEvent(new CustomEvent(UIEventNames.MODEL_DOWNLOAD_PROGRESS, { detail: payloadWithModelId }));\n    } else {\n        try {\n            browser.runtime.sendMessage({\n                type: UIEventNames.MODEL_DOWNLOAD_PROGRESS,\n                payload: payloadWithModelId\n            }).catch((e: any) => {\n                if (LOG_ERROR && !e.message?.includes(\"Receiving end does not exist\")) {\n                     console.log(prefix, `Error sending MODEL_DOWNLOAD_PROGRESS for ${managerModelId}: ${e.message}`);\n                }\n            });\n        } catch (e: any) {\n             if (LOG_ERROR && !e.message?.includes(\"Extension context invalidated\")) {\n                 console.log(prefix, `Error dispatching MODEL_DOWNLOAD_PROGRESS for ${managerModelId}: ${e.message}`);\n            }\n        }\n    }\n    if (LOG_GENERAL && (payload.done || payload.error || (payload.progress && (payload.progress === 0 || payload.progress === 100 || payload.progress % 10 === 0)))) {\n        console.log(prefix, `Sent UI global progress for ${managerModelId}: ${payload.message}`);\n    }\n}\n\nfunction logMemory(label: string) {\n    if (!LOG_MEMORY) return;\n    if (typeof performance !== 'undefined' && (performance as any).memory) {\n        const usedMB = ((performance as any).memory.usedJSHeapSize / 1024 / 1024).toFixed(2);\n        const totalMB = ((performance as any).memory.totalJSHeapSize / 1024 / 1024).toFixed(2);\n        console.log(`${prefix} [Memory][${label}] Used: ${usedMB} MB / Total: ${totalMB} MB`);\n    } else {\n        console.log(`${prefix} [Memory][${label}] performance.memory not available`);\n    }\n}\n\nasync function tryStoreChunkInternal(payload: any, maxRetries = MAX_RETRIES) {\n    let attempt = 0;\n    while (attempt < maxRetries) {\n        const req = new DbAddModelAssetRequest(payload);\n        const addResult = await sendDbRequestSmart(req);\n        if (addResult && addResult.success) return true;\n        attempt++;\n        if (LOG_CHUNK) console.log(prefix, `Retrying chunk store, attempt ${attempt} for ${payload.fileName} chunk ${payload.chunkIndex}`);\n        if (attempt < maxRetries) await new Promise(res => setTimeout(res, 200 * Math.pow(2, attempt)));\n    }\n    return false;\n}\n\nfunction buildDownloadPlanInternal(manifests: ModelAssetManifest[]): { downloadPlan: FilePlan[]; totalBytesToDownload: number; totalChunksToDownload: number } {\n    const downloadPlan = manifests.map((entry, idx) => ({\n        manifest: entry,\n        isONNX: entry.fileType === 'onnx',\n        fullDownloadUrl: buildFullDownloadUrl(entry.folder, entry.fileName),\n        fileIdx: idx + 1,\n    }));\n    const totalBytesToDownload = downloadPlan.reduce((sum, f) => sum + f.manifest.size, 0);\n    const totalChunksToDownload = downloadPlan.reduce((sum, f) => sum + f.manifest.totalChunks, 0);\n    if (LOG_GENERAL) console.log(prefix, `Built download plan with ${downloadPlan.length} files, ${totalBytesToDownload} bytes, ${totalChunksToDownload} chunks`);\n    return { downloadPlan, totalBytesToDownload, totalChunksToDownload };\n}\n\nasync function getMissingFilesAndInitialStates(downloadPlan: FilePlan[], modelId: string): Promise<{ initialStates: { [fileName: string]: FileState }; missingNonOnnx: FilePlan[]; nonOnnxTotal: number; nonOnnxPresent: number }> {\n    const initialStates: { [fileName: string]: FileState } = {};\n    const missingNonOnnxFiles: FilePlan[] = [];\n    let nonOnnxTotalBytes = 0;\n    let nonOnnxPresentBytes = 0;\n\n    for (const plan of downloadPlan) {\n        initialStates[plan.manifest.fileName] = { status: 'unknown', progress: 0 };\n\n        let isPresent = false;\n        if (plan.manifest.status === 'complete' || plan.manifest.status === 'present') {\n            isPresent = true;\n        }\n\n        console.log(`[DEBUG][PresenceCheck] ${plan.manifest.fileName}: manifest status=`, plan.manifest.status, 'isPresent=', isPresent);\n\n        if (isPresent) {\n            initialStates[plan.manifest.fileName] = { status: 'present', progress: 100 };\n            if (!plan.isONNX) {\n                nonOnnxPresentBytes += plan.manifest.size;\n            }\n        } else if (!plan.isONNX) {\n            missingNonOnnxFiles.push(plan);\n        }\n        if (!plan.isONNX) {\n            nonOnnxTotalBytes += plan.manifest.size;\n        }\n    }\n    if (LOG_GENERAL) console.log(prefix, `[${modelId}] Initial states computed: ${missingNonOnnxFiles.length} missing non-ONNX files, ${nonOnnxPresentBytes} bytes present out of ${nonOnnxTotalBytes}`);\n    return { initialStates, missingNonOnnx: missingNonOnnxFiles, nonOnnxTotal: nonOnnxTotalBytes, nonOnnxPresent: nonOnnxPresentBytes };\n}\n\nfunction formatBytes(bytes: number) {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n}\n\nfunction checksumChunkMD5(arrayBuffer: ArrayBuffer): string {\n    return SparkMD5.ArrayBuffer.hash(arrayBuffer);\n}\n\nfunction buildFullDownloadUrl(modelId: string, fileName: string): string {\n    if (/^https?:\\/\\//.test(fileName)) return fileName;\n    return `https://huggingface.co/${modelId}/resolve/main/${fileName}`.replace(/([^:])\\/\\/+/, '$1/');\n}\n\n// Exported function to update the ONNX selection popup for a given repo if open\nexport function updateRepoPopupState(modelId: string) {\n    if (typeof window === 'undefined' || !window.showOnnxSelectionPopup) return;\n    console.log('[updateRepoPopupState] Updating popup state for modelId:', modelId);\n\n    const manager = downloadManagers.get(modelId);\n    console.log('[updateRepoPopupState] Manager:', manager);\n    if (!manager) return;\n    // Only update if popup is open\n    const modal = document.getElementById && document.getElementById('onnx-selection-modal');\n    if (!modal || modal.classList.contains('hidden')) return;\n\n    // Gather current ONNX and non-ONNX state from the manager\n    const onnxFilePlansInCurrentScope = manager.filePlans.filter(p => p.isONNX);\n    const allFilePlans = manager.filePlans;\n    const fileStates = manager.fileStates;\n    // Compute non-ONNX progress and status as in processManifests\n    const currentNonOnnxPlans = allFilePlans.filter(p => !p.isONNX);\n    let nonOnnxStatusForPopup = 'unknown';\n    if (currentNonOnnxPlans.length > 0) {\n        const allNonOnnxPresent = currentNonOnnxPlans.every(p => {\n            const s = fileStates[p.manifest.fileName]?.status;\n            return s === 'present' || s === 'downloaded';\n        });\n        const anyNonOnnxDownloading = currentNonOnnxPlans.some(p => fileStates[p.manifest.fileName]?.status === 'downloading');\n        const anyNonOnnxQueued = currentNonOnnxPlans.some(p => fileStates[p.manifest.fileName]?.status === 'queued');\n        const anyNonOnnxFailed = currentNonOnnxPlans.some(p => fileStates[p.manifest.fileName]?.status === 'failed');\n        if (allNonOnnxPresent) nonOnnxStatusForPopup = 'present';\n        else if (anyNonOnnxDownloading) nonOnnxStatusForPopup = 'downloading';\n        else if (anyNonOnnxQueued) nonOnnxStatusForPopup = 'queued';\n        else if (anyNonOnnxFailed) nonOnnxStatusForPopup = 'failed';\n        else nonOnnxStatusForPopup = 'pending';\n    } else {\n        nonOnnxStatusForPopup = 'no_files';\n    }\n    let nonOnnxProgressForPopup = 0;\n    if (manager.nonOnnxTotalSize > 0) {\n        nonOnnxProgressForPopup = Math.floor((manager.nonOnnxDownloadedSize / manager.nonOnnxTotalSize) * 100);\n    } else if (currentNonOnnxPlans.length === 0) {\n        nonOnnxProgressForPopup = 100;\n    }\n\n    // Always update popup content to reflect the current repo\n    if (onnxFilePlansInCurrentScope.length === 0) {\n        if (window.hideOnnxSelectionPopup) window.hideOnnxSelectionPopup();\n        return;\n    }\n    // Show the popup with the current ONNX file(s), even if only one\n    window.showOnnxSelectionPopup(\n        modelId,\n        onnxFilePlansInCurrentScope,\n        allFilePlans,\n        fileStates,\n        nonOnnxProgressForPopup,\n        nonOnnxStatusForPopup,\n        (filePlan) => manager.handleUserFileRequestFromPopup(filePlan)\n    );\n}\n\n","/**\r\n * @reference lib=\"dom\"\r\n */\r\n// Add EXTENSION_CONTEXT to the Window interface\r\n\r\n\r\nimport { UIEventNames, Contexts } from './events/eventNames';\r\nwindow.EXTENSION_CONTEXT = Contexts.OTHERS;\r\n\r\nlet pageContainers = document.querySelectorAll('.page-container');\r\nlet navButtons = document.querySelectorAll('.nav-button');\r\nlet mainHeaderTitle: HTMLElement | null = document.querySelector('#header h1');\r\nconst CONTEXT_PREFIX = '[Navigation]';\r\nconst pageTitles: { [key: string]: string } = {\r\n    'page-home': 'Tab Agent', \r\n    'page-spaces': 'Spaces',\r\n    'page-library': 'Library',\r\n    'page-settings': 'Settings'\r\n};\r\n\r\nasync function navigateTo(pageId: string) { \r\n    console.log(CONTEXT_PREFIX + `Navigating to ${pageId}`);\r\n   \r\n    pageContainers.forEach(container => {\r\n        container.classList.add('hidden');\r\n        container.classList.remove('active-page');\r\n    });\r\n\r\n    const targetPage = document.getElementById(pageId);\r\n    if (targetPage) {\r\n        targetPage.classList.remove('hidden');\r\n        targetPage.classList.add('active-page');\r\n    } else {\r\n        console.error(CONTEXT_PREFIX + `Navigation error: Page with ID ${pageId} not found. Showing home.`);\r\n        const homePage = document.getElementById('page-home');\r\n        if (homePage) {\r\n             homePage.classList.remove('hidden');\r\n             homePage.classList.add('active-page');\r\n        }\r\n        pageId = 'page-home'; \r\n    }\r\n    \r\n    if (mainHeaderTitle && pageTitles[pageId]) {\r\n         mainHeaderTitle.textContent = pageTitles[pageId];\r\n    } else if (mainHeaderTitle) {\r\n         mainHeaderTitle.textContent = 'Tab Agent'; \r\n    }\r\n\r\n    navButtons.forEach(button => {\r\n        const btn = button as HTMLElement;\r\n        if (btn.dataset.page === pageId) {\r\n            btn.classList.add('active');\r\n        } else {\r\n            btn.classList.remove('active');\r\n        }\r\n    });\r\n\r\n    document.dispatchEvent(new CustomEvent(UIEventNames.NAVIGATION_PAGE_CHANGED, { detail: { pageId } }));\r\n    console.log(CONTEXT_PREFIX + `Published navigation:pageChanged event for ${pageId}`);\r\n\r\n    const queryInput = document.getElementById('query-input');\r\n     if (pageId === 'page-home' && queryInput) {\r\n         (queryInput as HTMLElement).focus(); \r\n     }\r\n}\r\n\r\nfunction initializeNavigation() {\r\n    console.log(CONTEXT_PREFIX + \"Initializing navigation...\");\r\n\r\n    pageContainers = document.querySelectorAll('.page-container');\r\n    navButtons = document.querySelectorAll('.nav-button');\r\n    mainHeaderTitle = document.querySelector('#header h1');\r\n\r\n    navButtons.forEach(button => {\r\n        const btn = button as HTMLElement;\r\n        btn.addEventListener('click', () => {\r\n            const pageId = btn.dataset.page;\r\n            if (pageId) {\r\n                navigateTo(pageId);\r\n            }\r\n        });\r\n    });\r\n\r\n    navigateTo('page-home');\r\n    console.log(CONTEXT_PREFIX + \"Navigation initialized.\");\r\n}\r\n\r\nexport { initializeNavigation, navigateTo }; ","let notificationTimeout: number | null;\r\n\r\n/**\r\n * @param message - The notification message\r\n * @param type - The notification type\r\n * @param duration - Duration in ms\r\n */\r\nexport function showNotification(message: string, type: 'info' | 'success' | 'error' = 'info', duration: number = 3000): void {\r\n    console.log(`[Notification] ${type.toUpperCase()}: ${message} (Duration: ${duration}ms)`);\r\n}\r\n\r\nexport function hideNotification(): void {\r\n    const banner = document.getElementById('notification-banner') as HTMLElement | null;\r\n    if (banner) {\r\n        banner.classList.remove('visible');\r\n    }\r\n    if (notificationTimeout) {\r\n        clearTimeout(notificationTimeout);\r\n        notificationTimeout = null;\r\n    }\r\n    if (banner) {\r\n        banner.onclick = null;\r\n    }\r\n} ","// --- Imports ---\nimport './DB/db';\nimport './modelAssetDownloader';\nimport browser from 'webextension-polyfill';\nimport { initializeNavigation } from './navigation';\nimport * as uiController from './Home/uiController';\nimport {\n  initializeRenderer,\n  setActiveSessionId as setRendererSessionId,\n \n} from './Home/chatRenderer';\nimport { initializeOrchestrator } from './Home/messageOrchestrator';\nimport {\n  initializeFileHandling,\n  handleAttachClick,\n  handleFileSelected,\n} from './Home/fileHandler';\nimport {\n  initializeUI,\n  clearInput,\n  focusInput,\n  setActiveSession,\n} from './Home/uiController';\nimport { getActiveTab, showError as utilShowError, debounce } from './Utilities/generalUtils';\nimport { showNotification } from './notifications';\nimport { DbGetSessionRequest, DbAddLogRequest ,DbWorkerCreatedNotification, DbGetManifestRequest, DbGetAllModelFileManifestsRequest, DbInitializationCompleteNotification, DbCreateAllFileManifestsForRepoRequest, DbListModelFilesRequest, DbManifestUpdatedNotification } from './DB/dbEvents';\nimport { autoEnsureDbInitialized, forwardDbRequest } from './DB/db';\nimport { initializeHistoryPopup } from './Controllers/HistoryPopupController';\nimport { initializeLibraryController } from './Controllers/LibraryController';\nimport { initializeDiscoverController } from './Controllers/DiscoverController';\nimport { initializeSettingsController } from './Controllers/SettingsController';\nimport { initializeSpacesController } from './Controllers/SpacesController';\nimport { initializeDriveController } from './Controllers/DriveController';\nimport {\n  UIEventNames,\n  RuntimeMessageTypes,\n  RawDirectMessageTypes,\n  Contexts,\n  InternalEventBusMessageTypes,\n  WorkerEventNames,\n} from './events/eventNames';\n\nimport { DBEventNames } from './DB/dbEvents';\n\nimport { llmChannel, logChannel } from './Utilities/dbChannels';\nimport { dbChannel } from './DB/idbSchema';\nimport { downloadModelAssets, updateRepoPopupState } from './modelAssetDownloader';\nimport { initializeONNXSelectionPopup } from './Controllers/ONNXSelectionPopupController';\nimport { fetchModelMetadataInternal, filterAndValidateFilesInternal } from './Utilities/modelMetadata';\nimport { ModelAssetManifest } from './DB/idbModelAsset';\n\n// --- Constants ---\nconst LOG_QUEUE_MAX = 1000;\nconst senderId = 'sidepanel-' + Math.random().toString(36).slice(2) + '-' + Date.now();\n\n// --- Global State ---\nlet activeSessionId: string | null = null;\nlet isPopup: boolean = false;\nlet originalTabIdFromPopup: string | null = null;\nlet currentTabId: number | null = null;\nlet isDbReady: boolean = false;\nlet historyPopupController: any = null;\nlet logQueue: any[] = [];\nlet currentModelId: string | null = null;\nlet onnxSelectionPopupController: any = null;\nlet allModelMetaFromDb: Record<string, any[]> = {};\nlet allManifests: ModelAssetManifest[] = [];\nconst prefix = '[Sidepanel]';\n// --- Global Setup ---\n// Set EXTENSION_CONTEXT based on URL query string\n(function () {\n  try {\n    const urlParams = new URLSearchParams(window.location.search);\n    const contextParam = urlParams.get('context');\n    const viewParam = urlParams.get('view');\n    window.EXTENSION_CONTEXT =\n      contextParam === 'popup'\n        ? Contexts.POPUP\n        : viewParam === 'logs'\n        ? Contexts.OTHERS\n        : Contexts.MAIN_UI;\n  } catch (e) {\n    window.EXTENSION_CONTEXT = Contexts.UNKNOWN;\n    console.error('[Sidepanel] Error setting EXTENSION_CONTEXT:', e);\n  }\n})();\n\n// Marked Setup\nif (window.marked) {\n  window.marked.setOptions({\n    highlight: function (code: string, lang: string) {\n      if (lang && window.hljs && window.hljs.getLanguage(lang)) {\n        try {\n          return window.hljs.highlight(code, { language: lang, ignoreIllegals: true }).value;\n        } catch (e) {\n          console.error('hljs error:', e);\n        }\n      } else if (window.hljs) {\n        try {\n          return window.hljs.highlightAuto(code).value;\n        } catch (e) {\n          console.error('hljs auto error:', e);\n        }\n      }\n      const escapeHtml = (htmlStr: string) =>\n        htmlStr\n          .replace(/&/g, '&amp;')\n          .replace(/</g, '&lt;')\n          .replace(/>/g, '&gt;')\n          .replace(/\"/g, '&quot;')\n          .replace(/'/g, '&#39;');\n      return escapeHtml(code);\n    },\n    langPrefix: 'language-',\n    gfm: true,\n    breaks: true,\n  });\n  console.log('[Sidepanel] Marked globally configured to use highlight.');\n} else {\n  console.error('[Sidepanel] Marked library (window.marked) not found.');\n}\n\n// --- DB and Channel Utilities ---\nfunction isDbRequest(type: string) {\n  return typeof type === 'string' && type.endsWith('_REQUEST');\n}\n\nfunction isDbLocalContext() {\n  return typeof forwardDbRequest === 'function';\n}\n\nasync function sendDbRequestSmart(request: any) {\n  if (isDbLocalContext()) {\n    return await forwardDbRequest(request);\n  }\n  return await browser.runtime.sendMessage(request);\n}\n\n// Re-add: fire-and-forget DB request via channel (for logs)\nfunction sendDbRequestViaChannel(request: any) {\n  dbChannel.postMessage(request);\n}\n\nfunction requestDbAndWait(requestEvent: any) {\n  return new Promise((resolve, reject) => {\n    (async () => {\n      try {\n        const result = await sendDbRequestSmart(requestEvent);\n        console.log(`${prefix} requestDbAndWait: Raw result`, result);\n        const response = Array.isArray(result) ? result[0] : result;\n        if (response && (response.success || response.error === undefined)) {\n          resolve(response.data || response.payload);\n        } else {\n          reject(new Error(response?.error || `DB operation ${requestEvent.type} failed`));\n        }\n      } catch (error) {\n        reject(error);\n      }\n    })();\n  });\n}\n\n// --- Logging ---\nfunction bufferOrWriteLog(logPayload: any) {\n  if (!isDbReady) {\n    if (logQueue.length >= LOG_QUEUE_MAX) {\n      logQueue.shift();\n    }\n    logQueue.push(logPayload);\n  } else {\n    const req = new DbAddLogRequest(logPayload);\n    sendDbRequestViaChannel(req);\n  }\n}\n\nlogChannel.onmessage = (event) => {\n  const { type, payload } = event.data;\n  if (type === 'LOG_TO_DB' && payload) {\n    bufferOrWriteLog(payload);\n  }\n};\n\n// --- UI and Worker Utilities ---\nfunction sendUiEvent(type: string, payload: any) {\n  browser.runtime.sendMessage({ type, payload });\n}\n\nfunction sendWorkerError(message: string) {\n  browser.runtime.sendMessage({ type: UIEventNames.WORKER_ERROR, payload: message });\n}\n\nfunction getActiveChatSessionId(): string | null {\n  return activeSessionId;\n}\n\nasync function setActiveChatSessionId(newSessionId: string | null) {\n  console.log(`${prefix} Setting active session ID to: ${newSessionId}`);\n  activeSessionId = newSessionId;\n  if (newSessionId) {\n    await browser.storage.local.set({ lastSessionId: newSessionId });\n  } else {\n    await browser.storage.local.remove('lastSessionId');\n  }\n  setRendererSessionId(newSessionId);\n  setActiveSession(newSessionId);\n}\n\n// --- Channel Handlers ---\nif (window.EXTENSION_CONTEXT === Contexts.MAIN_UI) {\n  dbChannel.onmessage = async (event: MessageEvent) => {\n    const { type, payload, requestId, senderId: reqSenderId, responseType } = event.data;\n    if (!isDbRequest(type)) return;\n    try {\n      const response = await browser.runtime.sendMessage({\n        type,\n        payload,\n        requestId,\n        senderId: reqSenderId,\n      });\n      const respType = responseType || type + '_RESPONSE';\n      dbChannel.postMessage({ type: respType, payload: response, requestId, senderId });\n    } catch (err) {\n      const respType = responseType || type + '_RESPONSE';\n      dbChannel.postMessage({\n        type: respType,\n        payload: { success: false, error: (err as Error).message },\n        requestId,\n        senderId,\n      });\n    }\n  };\n\n  llmChannel.onmessage = async (event) => {\n    const { type, payload, requestId, senderId: msgSenderId } = event.data;\n    if (msgSenderId && msgSenderId !== senderId) return; // Only process messages for this context\n    if (\n      [\n        WorkerEventNames.WORKER_SCRIPT_READY,\n        WorkerEventNames.WORKER_READY,\n        WorkerEventNames.LOADING_STATUS,\n        WorkerEventNames.ERROR,\n        WorkerEventNames.RESET_COMPLETE,\n      ].includes(type)\n    ) {\n      return;\n    }\n    if (type === RuntimeMessageTypes.SEND_CHAT_MESSAGE && typeof window.sendChatMessage === 'function') {\n      const result = await window.sendChatMessage(payload);\n      llmChannel.postMessage({\n        type: RuntimeMessageTypes.SEND_CHAT_MESSAGE + '_RESPONSE',\n        payload: result,\n        requestId,\n        senderId: 'sidepanel',\n        timestamp: Date.now(),\n      });\n    } else if (\n      type === RuntimeMessageTypes.INTERRUPT_GENERATION &&\n      typeof window.interruptGeneration === 'function'\n    ) {\n      const result = await window.interruptGeneration(payload);\n      llmChannel.postMessage({\n        type: RuntimeMessageTypes.INTERRUPT_GENERATION + '_RESPONSE',\n        payload: result,\n        requestId,\n        senderId: 'sidepanel',\n        timestamp: Date.now(),\n      });\n    } else if (type === RuntimeMessageTypes.RESET_WORKER && typeof window.resetWorker === 'function') {\n      const result = await window.resetWorker(payload);\n      llmChannel.postMessage({\n        type: RuntimeMessageTypes.RESET_WORKER + '_RESPONSE',\n        payload: result,\n        requestId,\n        senderId: 'sidepanel',\n        timestamp: Date.now(),\n      });\n    } else if (type === RuntimeMessageTypes.LOAD_MODEL && typeof window.loadModel === 'function') {\n      const result = await window.loadModel(payload);\n      llmChannel.postMessage({\n        type: RuntimeMessageTypes.LOAD_MODEL + '_RESPONSE',\n        payload: result,\n        requestId,\n        senderId: 'sidepanel',\n        timestamp: Date.now(),\n      });\n    } else if (type === RuntimeMessageTypes.GET_MODEL_WORKER_STATE) {\n      const state = window.currentModelWorkerState || 'UNINITIALIZED';\n      const modelId = window.currentModelIdForWorker || null;\n      llmChannel.postMessage({\n        type: RuntimeMessageTypes.GET_MODEL_WORKER_STATE + '_RESPONSE',\n        payload: { state, modelId },\n        requestId,\n        senderId: 'sidepanel',\n        timestamp: Date.now(),\n      });\n    }\n  };\n}\n\n// --- Event Handlers ---\nfunction handleMessage(message: any, sender: any, sendResponse: any) {\n  const { type } = message;\n  if (Object.values(DBEventNames).includes(type)) {\n    return false;\n  }\n  if (type === RawDirectMessageTypes.WORKER_GENERIC_RESPONSE) {\n    sendUiEvent(UIEventNames.BACKGROUND_RESPONSE_RECEIVED, {\n      chatId: message.chatId,\n      messageId: message.messageId,\n      text: message.text,\n    });\n  } else if (type === RawDirectMessageTypes.WORKER_GENERIC_ERROR) {\n    sendUiEvent(UIEventNames.BACKGROUND_ERROR_RECEIVED, {\n      chatId: message.chatId,\n      messageId: message.messageId,\n      error: message.error,\n    });\n    sendResponse({});\n  } else if (type === RawDirectMessageTypes.WORKER_SCRAPE_STAGE_RESULT) {\n    sendUiEvent(UIEventNames.BACKGROUND_SCRAPE_STAGE_RESULT, message.payload);\n    sendResponse({ status: 'received', type });\n  } else if (type === RawDirectMessageTypes.WORKER_DIRECT_SCRAPE_RESULT) {\n    sendUiEvent(UIEventNames.BACKGROUND_SCRAPE_RESULT_RECEIVED, message.payload);\n    sendResponse({});\n  } else if (type === RawDirectMessageTypes.WORKER_UI_LOADING_STATUS_UPDATE) {\n    sendUiEvent(UIEventNames.BACKGROUND_LOADING_STATUS_UPDATE, message.payload);\n  } else if (\n    type === InternalEventBusMessageTypes.BACKGROUND_EVENT_BROADCAST ||\n    type === UIEventNames.MODEL_DOWNLOAD_PROGRESS\n  ) {\n    // No action needed\n  } else {\n    console.warn('[Sidepanel] Received unknown message type from background:', type, message);\n  }\n}\n\nasync function handleSessionCreated(newSessionId: string) {\n  console.log(`${prefix} Orchestrator reported new session created: ${newSessionId}`);\n  console.log(`${prefix} handleSessionCreated callback received sessionId:`, newSessionId);\n  await setActiveChatSessionId(newSessionId);\n  try {\n    const request = new DbGetSessionRequest(newSessionId);\n    const sessionData = await requestDbAndWait(request);\n    if (!(sessionData as any)?.messages) {\n      console.warn(`[Sidepanel] No messages found in session data for new session ${newSessionId}.`, sessionData);\n    }\n  } catch (error) {\n    const err = error as Error;\n    console.error(`[Sidepanel] Failed to fetch messages for new session ${newSessionId}:`, err);\n    utilShowError(`Failed to load initial messages for new chat: ${err.message}`);\n  }\n}\n\nasync function handleNewChat() {\n  console.log(`${prefix} New Chat button clicked.`);\n  await setActiveChatSessionId(null);\n  clearInput();\n  focusInput();\n}\n\nasync function loadAndDisplaySession(sessionId: string | null) {\n  if (!sessionId) {\n    console.log(`${prefix} No session ID to load, setting renderer to null.`);\n    await setActiveChatSessionId(null);\n    return;\n  }\n  console.log(`${prefix} Loading session data for: ${sessionId}`);\n  try {\n    const request = new DbGetSessionRequest(sessionId);\n    const sessionData = await requestDbAndWait(request);\n    console.log(`${prefix} Session data successfully loaded for ${sessionId}.`);\n    await setActiveChatSessionId(sessionId);\n    if (!(sessionData as any)?.messages) {\n      console.warn(`${prefix} No messages found in loaded session data for ${sessionId}.`);\n    }\n  } catch (error) {\n    const err = error as Error;\n    console.error(`${prefix} Failed to load session ${sessionId}:`, err);\n    utilShowError(`Failed to load chat: ${err.message}`);\n    await setActiveChatSessionId(null);\n  }\n}\n\nasync function handleDetach() {\n  if (!currentTabId) {\n    console.error('Cannot detach: Missing tab ID');\n    utilShowError('Cannot detach: Missing tab ID');\n    return;\n  }\n  const currentSessionId = getActiveChatSessionId();\n  try {\n    const response = await browser.runtime.sendMessage({\n      type: 'getPopupForTab',\n      tabId: currentTabId,\n    });\n    if (response?.popupId) {\n      await browser.windows.update(response.popupId, { focused: true });\n      return;\n    }\n    const storageKey = `detachedSessionId_${currentTabId}`;\n    await browser.storage.local.set({ [storageKey]: currentSessionId });\n    console.log(`${prefix} Saved session ID ${currentSessionId} for detach key ${storageKey}.`);\n    const popup = await browser.windows.create({\n      url: browser.runtime.getURL(`sidepanel.html?context=popup&originalTabId=${currentTabId}`),\n      type: 'popup',\n      width: 400,\n      height: 600,\n    });\n    if (popup?.id) {\n      await browser.runtime.sendMessage({\n        type: 'popupCreated',\n        tabId: currentTabId,\n        popupId: popup.id,\n      });\n    } else {\n      throw new Error('Failed to create popup window.');\n    }\n  } catch (error) {\n    const err = error as Error;\n    console.error('Error during detach:', err);\n    utilShowError(`Error detaching chat: ${err.message}`);\n  }\n}\n\nasync function handlePageChange(event: any) {\n  if (!event?.pageId) return;\n  console.log(`${prefix} Navigation changed to: ${event.pageId}`);\n  if (!isDbReady) {\n    console.log(`${prefix} DB not ready yet, skipping session load on initial navigation event.`);\n    return;\n  }\n  if (event.pageId === 'page-home') {\n    console.log(`${prefix} Navigated to home page, checking for specific session load signal...`);\n    try {\n      const { lastSessionId } = await browser.storage.local.get(['lastSessionId']);\n      if (lastSessionId) {\n        console.log(`${prefix} Found load signal: ${lastSessionId}. Loading session and clearing signal.`);\n        await loadAndDisplaySession(lastSessionId);\n        await browser.storage.local.remove('lastSessionId');\n      } else {\n        console.log(`${prefix} No load signal found. Resetting to welcome state.`);\n        await loadAndDisplaySession(null);\n      }\n    } catch (error) {\n      const err = error as Error;\n      console.error(`${prefix} Error checking/loading session based on signal:`, err);\n      utilShowError('Failed to load session state.');\n      await loadAndDisplaySession(null);\n    }\n  }\n}\n\n// --- Worker Status Broadcasting ---\nfunction handleWorkerStatusEvent(event: MessageEvent) {\n  const { type, payload } = event.data;\n  if (\n    [\n      WorkerEventNames.WORKER_SCRIPT_READY,\n      WorkerEventNames.WORKER_READY,\n      WorkerEventNames.LOADING_STATUS,\n      WorkerEventNames.ERROR,\n      WorkerEventNames.RESET_COMPLETE,\n    ].includes(type)\n  ) {\n    llmChannel.postMessage({ type, payload, senderId: 'sidepanel', timestamp: Date.now() });\n  }\n}\n\nif (window.modelWorker) {\n  window.modelWorker.onmessage = (event: MessageEvent) => {\n    handleWorkerStatusEvent(event);\n  };\n}\n\n// --- Main Initialization ---\ndocument.addEventListener('DOMContentLoaded', async () => {\n  console.log(`${prefix} DOM Content Loaded.`);\n  const urlParams = new URLSearchParams(window.location.search);\n  const requestedView = urlParams.get('view');\n\n  // Log Viewer Mode\n  if (requestedView === 'logs') {\n    console.log(`${prefix} Initializing in Log Viewer Mode.`);\n    document.body.classList.add('log-viewer-mode');\n    document.getElementById('header')?.classList.add('hidden');\n    document.getElementById('bottom-nav')?.classList.add('hidden');\n    document\n      .querySelectorAll('#main-content > .page-container:not(#page-log-viewer)')\n      .forEach((el) => el.classList.add('hidden'));\n    const logViewerPage = document.getElementById('page-log-viewer');\n    if (logViewerPage) {\n      logViewerPage.classList.remove('hidden');\n    } else {\n      console.error('CRITICAL: #page-log-viewer element not found!');\n      document.body.innerHTML =\n        \"<p style='color:red; padding: 1em;'>Error: Log viewer UI component failed to load.</p>\";\n      return;\n    }\n    try {\n      const logViewerModule = await import('./Controllers/LogViewerController');\n      await logViewerModule.initializeLogViewerController();\n      console.log(`${prefix} Log Viewer Controller initialized.`);\n    } catch (err) {\n      const error = err as Error;\n      console.error('Failed to load or initialize LogViewerController:', error);\n      if (logViewerPage) {\n        logViewerPage.innerHTML = `<div style='color:red; padding: 1em;'>Error initializing log viewer: ${error.message}</div>`;\n      }\n    }\n    return;\n  }\n\n  // Standard Mode\n    console.log(`${prefix} Initializing in Standard Mode.`);\n  document.getElementById('page-log-viewer')?.classList.add('hidden');\n\n  // Initialize UI and Core Components\n  try {\n    const uiInitResult = await initializeUI({\n      onNewChat: handleNewChat,\n      onAttachFile: handleAttachClick,\n    });\n    if (!uiInitResult) throw new Error('UI initialization failed');\n    const { chatBody, fileInput } = uiInitResult;\n    console.log(`${prefix} UI Controller Initialized.`);\n\n    if (!chatBody) {\n      console.error('[Sidepanel] CRITICAL: chatBody is null before initializeRenderer!');\n      throw new Error('chatBody is null');\n    }\n    initializeRenderer(chatBody, requestDbAndWait);\n    console.log(`${prefix} Chat Renderer Initialized.`);\n\n    initializeNavigation();\n    console.log(`${prefix} Navigation Initialized.`);\n\n    document.addEventListener(UIEventNames.NAVIGATION_PAGE_CHANGED, (e: Event) => handlePageChange((e as CustomEvent).detail));\n\n    initializeFileHandling({\n      uiController,\n      getActiveSessionIdFunc: getActiveChatSessionId,\n    });\n    console.log(`${prefix} File Handler Initialized.`);\n\n    if (fileInput) {\n      fileInput.addEventListener('change', handleFileSelected);\n    } else {\n      console.warn(`${prefix} File input element not found before adding listener.`);\n    }\n\n    const activeTab = await getActiveTab();\n    currentTabId = activeTab?.id;\n    console.log(`${prefix} Current Tab ID: ${currentTabId}`);\n\n    initializeOrchestrator({\n      getActiveSessionIdFunc: getActiveChatSessionId,\n      onSessionCreatedCallback: handleSessionCreated,\n      getCurrentTabIdFunc: () => currentTabId,\n    });\n    console.log(`${prefix} Message Orchestrator Initialized.`);\n\n    browser.runtime.onMessage.addListener(handleMessage);\n    console.log(`${prefix} Background message listener added.`);\n\n    // Initialize Controllers\n    const historyPopupElement = document.getElementById('history-popup');\n    const historyListElement = document.getElementById('history-list');\n    const historySearchElement = document.getElementById('history-search');\n    const closeHistoryButtonElement = document.getElementById('close-history');\n    const historyButton = document.getElementById('history-button');\n    const detachButton = document.getElementById('detach-button');\n\n    if (historyPopupElement && historyListElement && historySearchElement && closeHistoryButtonElement) {\n      historyPopupController = initializeHistoryPopup(\n        {\n          popupContainer: historyPopupElement,\n          listContainer: historyListElement,\n          searchInput: historySearchElement,\n          closeButton: closeHistoryButtonElement,\n        },\n        requestDbAndWait\n      );\n      if (!historyPopupController) {\n        console.error(`${prefix} History Popup Controller initialization failed.`);\n      }\n    } else {\n      console.warn(`${prefix} Could not find all required elements for History Popup Controller.`);\n    }\n\n    if (historyButton && historyPopupController) {\n      historyButton.addEventListener('click', () => historyPopupController.show());\n    } else {\n      console.warn(`${prefix} History button or controller not available for listener.`);\n    }\n\n    if (detachButton) {\n      detachButton.addEventListener('click', handleDetach);\n    } else {\n      console.warn(`${prefix} Detach button not found.`);\n    }\n\n    const libraryListElement = document.getElementById('starred-list');\n    if (libraryListElement) {\n      initializeLibraryController({ listContainer: libraryListElement }, requestDbAndWait);\n      console.log(`${prefix} Library Controller Initialized.`);\n    } else {\n      console.warn(`${prefix} Could not find #starred-list element for Library Controller.`);\n    }\n\n    document.addEventListener(UIEventNames.REQUEST_MODEL_LOAD, async (e: Event) => {\n      const { modelId } = (e as CustomEvent).detail || {};\n      if (!modelId) {\n        sendWorkerError('No model ID specified for loading.');\n        return;\n      }\n      try {\n        // Get selected ONNX file from dropdown\n        const quantSelector = document.getElementById('onnx-variant-selector') as HTMLSelectElement;\n        let selectedOnnxFile = quantSelector?.value || null;\n        // Do NOT convert 'all' to null; pass 'all' as a string\n        console.log(`${prefix} selectedOnnxFile:`, selectedOnnxFile);\n\n        // Pass manifests for this modelId to the downloader\n        const manifestsForModel = allManifests.filter(m => m.folder === modelId);\n        const result = await downloadModelAssets(modelId, selectedOnnxFile, manifestsForModel);\n        if (!result.success) {\n          sendWorkerError(result.error || 'Unknown error during model download.');\n        }\n      } catch (err) {\n        sendWorkerError(`Failed to download model: ${(err as Error).message}`);\n      }\n    });\n\n    initializeDiscoverController();\n    console.log(`${prefix} Discover Controller Initialized.`);\n\n    initializeSettingsController();\n    console.log(`${prefix} Settings Controller Initialized.`);\n\n    initializeSpacesController();\n    console.log(`${prefix} Spaces Controller Initialized.`);\n\n    initializeDriveController({\n      requestDbAndWaitFunc: requestDbAndWait,\n      getActiveChatSessionId,\n      setActiveChatSessionId,\n      showNotification,\n      debounce,\n    });\n    console.log(`${prefix} Drive Controller Initialized.`);\n\n    // Handle Popup Context\n    const popupContext = urlParams.get('context');\n    originalTabIdFromPopup = popupContext === 'popup' ? urlParams.get('originalTabId') : null;\n    isPopup = popupContext === 'popup';\n    console.log(\n      `${prefix} Context: ${isPopup ? 'Popup' : 'Sidepanel'}${\n        isPopup ? ', Original Tab: ' + originalTabIdFromPopup : ''\n      }`\n    );\n\n    if (isPopup && originalTabIdFromPopup) {\n      const storageKey = `detachedSessionId_${originalTabIdFromPopup}`;\n      const result = await browser.storage.local.get(storageKey);\n      const detachedSessionId = result[storageKey];\n      if (detachedSessionId) {\n        console.log(`${prefix} Found detached session ID: ${detachedSessionId}. Loading...`);\n        await loadAndDisplaySession(detachedSessionId);\n      } else {\n        console.log(`${prefix} No detached session ID found for key ${storageKey}. Starting fresh.`);\n        await setActiveChatSessionId(null);\n      }\n    } else {\n      console.log(`${prefix} Starting fresh. Loading empty/welcome state.`);\n      await loadAndDisplaySession(null);\n    }\n\n    // Track model selection\n    const modelSelector = document.getElementById('model-selector') as HTMLSelectElement;\n    if (modelSelector) {\n      modelSelector.addEventListener('change', (e) => {\n        currentModelId = (e.target as HTMLSelectElement).value;\n      });\n      // Set initial value\n      currentModelId = modelSelector.value;\n    }\n\n    // Ensure the model dropdown is populated before fetching metadata and initializing DB\n    // Log the dropdown options\n    const dropdownOptions = Array.from((document.getElementById('model-selector') as HTMLSelectElement).options).map(opt => opt.value);\n    console.log(`${prefix} Model dropdown options before fetch:`, dropdownOptions);\n\n    // Initialize DB\n    const dbInitSuccess = await initializeDatabase();\n    if (!dbInitSuccess) return;\n\n    const onnxModalEl = document.getElementById('onnx-selection-modal');\n    const onnxFileListEl = document.getElementById('onnx-file-list');\n    const dummyModelTitle = document.createElement('div');\n    if (!onnxModalEl || !onnxFileListEl) {\n      throw new Error('ONNX Selection modal or file list element not found');\n    }\n    onnxSelectionPopupController = initializeONNXSelectionPopup({\n      modal: onnxModalEl as HTMLElement,\n      fileList: onnxFileListEl as HTMLElement,\n      modelTitle: dummyModelTitle as HTMLElement\n    });\n    const onnxCloseBtn = document.getElementById('onnx-selection-close');\n    if (onnxCloseBtn && onnxSelectionPopupController) {\n      onnxCloseBtn.addEventListener('click', () => onnxSelectionPopupController.hide());\n    }\n\n    // Expose to window for modelAssetDownloader.ts\n    window.showOnnxSelectionPopup = (modelId, onnxFiles, downloadPlan, initialFileStates, nonOnnxProgress, nonOnnxStatus, requestFileDownloadCb) => {\n      if (onnxSelectionPopupController) {\n        onnxSelectionPopupController.show(\n          modelId,\n          onnxFiles,\n          downloadPlan,\n          initialFileStates,\n          nonOnnxProgress,\n          nonOnnxStatus,\n          requestFileDownloadCb\n        );\n      }\n    };\n\n    // Listen for per-file progress events and update the popup\n    document.addEventListener('MODEL_DOWNLOAD_PROGRESS', (e: any) => {\n      const detail = e.detail || (e as CustomEvent).detail;\n      if (detail && detail.currentFile) {\n        // Only update ONNX file progress bar if it's an ONNX file\n        if (detail.currentFile.endsWith('.onnx')) {\n          // Normalize to base file name for ONNXSelectionPopupController\n          const fileKey = detail.currentFile.split('/').pop();\n          const percent = detail.currentFileSize ? Math.floor((detail.currentFileDownloaded / detail.currentFileSize) * 100) : 0;\n          if (onnxSelectionPopupController) {\n            onnxSelectionPopupController.updateFileProgress(fileKey, percent);\n            if (percent >= 100 || detail.done) {\n              onnxSelectionPopupController.setFileStatus(fileKey, 'loaded');\n            }\n          }\n        }\n      }\n      // Also update main progress bar as before\n      if (typeof detail.progress === 'number') {\n        updateMainProgress(detail.progress, detail.message || '');\n        if (detail.done || detail.error) {\n          setTimeout(hideMainProgress, 1500);\n        }\n      }\n    });\n\n    // --- Main Model Load Progress Bar Wiring ---\n    const modelLoadStatus = document.getElementById('model-load-status');\n    const modelLoadStatusText = document.getElementById('model-load-status-text');\n    const modelLoadProgressBar = document.getElementById('model-load-progress-bar');\n    const modelLoadProgressInner = document.getElementById('model-load-progress-inner');\n\n    function updateMainProgress(percent: number, text: string) {\n      if (!modelLoadStatus || !modelLoadStatusText || !modelLoadProgressBar || !modelLoadProgressInner) return;\n      modelLoadStatus.style.display = '';\n      modelLoadStatusText.textContent = text;\n      modelLoadProgressInner.style.width = `${percent}%`;\n    }\n\n    function hideMainProgress() {\n      if (modelLoadStatus) modelLoadStatus.style.display = 'none';\n      if (modelLoadProgressInner) modelLoadProgressInner.style.width = '0%';\n      if (modelLoadStatusText) modelLoadStatusText.textContent = '';\n    }\n\n    console.log(`${prefix} Initialization complete.`);\n  } catch (error) {\n    const err = error as Error;\n    console.error(`${prefix} Initialization failed:`, err);\n    utilShowError(`Initialization failed: ${err.message}. Please try reloading.`);\n    const chatBody = document.getElementById('chat-body');\n    if (chatBody) {\n        chatBody.innerHTML = `<div class=\"p-4 text-red-500\">Critical Error: ${err.message}. Please reload the extension.</div>`;\n    }\n  }\n\n  // On page load, hide both buttons\n  const downloadBtn = document.getElementById('download-model-btn') as HTMLButtonElement;\n  const loadBtn = document.getElementById('load-model-button') as HTMLButtonElement;\n  if (downloadBtn) downloadBtn.style.display = 'none';\n  if (loadBtn) loadBtn.style.display = 'none';\n\n  // Add dropdown change listeners\n  const modelSelector = document.getElementById('model-selector') as HTMLSelectElement;\n  if (modelSelector) {\n    modelSelector.addEventListener('change', async () => {\n      await handleModelSelectorChange();\n      updateModelActionButtons();\n    });\n  }\n  const quantSelector = document.getElementById('onnx-variant-selector') as HTMLSelectElement;\n  if (quantSelector) {\n    quantSelector.addEventListener('change', () => {\n      updateModelActionButtons();\n    });\n  }\n});\n\ndocument.addEventListener(DbInitializationCompleteNotification.type, async (e: any) => {\n  console.log(`${prefix} DbInitializationCompleteNotification received.`, e.detail);\n  await handleModelSelectorChange();\n  updateModelActionButtons();\n  \n});\n\n// Listen for manifest update notifications and refresh dropdowns\ndocument.addEventListener(DbManifestUpdatedNotification.type, async (e: any) => {\n  const updatedManifest = e.detail?.payload?.manifest;\n  if (!updatedManifest) return;\n\n  // Update or insert the manifest in allManifests\n  const idx = allManifests.findIndex(m => m.id === updatedManifest.id);\n  if (idx !== -1) {\n    allManifests[idx] = updatedManifest;\n  } else {\n    allManifests.push(updatedManifest);\n  }\n\n  await renderDropdownsFromManifests();\n  updateModelActionButtons();\n});\n\nasync function handleModelSelectorChange() {\n  const modelSelector = document.getElementById('model-selector') as HTMLSelectElement;\n  if (!modelSelector) return;\n  const repoIds = Array.from(modelSelector.options).map(opt => opt.value);\n  const reposNeedingFetch: string[] = [];\n  allManifests = [];\n\n  console.log(`${prefix} repoIds:`, repoIds);\n  \n  for (const repo of repoIds) {\n    const dbListReq = new DbListModelFilesRequest({ folder: repo, returnObjects: true });\n    const dbListResp = await sendDbRequestSmart(dbListReq);\n    console.log(`${prefix} dbListResp for repo '${repo}':`, dbListResp);\n    const dbFiles = dbListResp.data || [];\n    console.log(`${prefix} dbFiles for repo '${repo}':`, dbFiles, 'Type:', Array.isArray(dbFiles) ? 'array' : typeof dbFiles, 'Length:', dbFiles.length);\n\n    if (!dbFiles.length) {\n      console.log(`${prefix} Repo '${repo}' not found in DB or has no files. Will fetch and create manifests.`);\n      reposNeedingFetch.push(repo);\n    } else {\n      const manifests = dbFiles.filter((m: any) => typeof m === 'object' && m.fileName);\n      console.log(`${prefix} manifests after filter for repo '${repo}':`, manifests, 'Length:', manifests.length);\n      allManifests.push(...manifests);\n      console.log(`${prefix} allManifests after push for repo '${repo}':`, allManifests, 'Length:', allManifests.length);\n      console.log(`${prefix} Repo '${repo}' already exists in DB with files. Skipping manifest creation.`);\n    }\n  }\n\n  // Now fetch metadata and create manifests only for repos that need it\n  for (const repo of reposNeedingFetch) {\n    try {\n      const baseRepoUrl = `https://huggingface.co/${repo}/resolve/main/`;\n      console.log(`${prefix} Fetching metadata for repo: ${repo}`);\n      const metadata = await fetchModelMetadataInternal(repo);\n      console.log(`${prefix} Got metadata for repo: ${repo}`, metadata);\n      const { neededFileEntries } = await filterAndValidateFilesInternal(metadata, repo, baseRepoUrl);\n      const enriched = { repo, metadata: { ...metadata, manifests: neededFileEntries } };\n      await sendDbRequestSmart(new DbCreateAllFileManifestsForRepoRequest(enriched.metadata.manifests));\n      allManifests.push(...enriched.metadata.manifests);\n      console.log(`${prefix} Repo '${repo}' manifests created in DB.`);\n    } catch (e) {\n      console.warn(`${prefix} Failed to fetch or create manifests for repo: ${repo}`, e);\n    }\n  }\n\n  console.log(`${prefix} Before renderDropdownsFromManifests, allManifests:`, allManifests);\n  await renderDropdownsFromManifests();\n}\n\n// --- Helper: Render dropdowns from manifests ---\nasync function renderDropdownsFromManifests() {\n  if (!allManifests.length) {\n    // fallback: fetch from DB if not already loaded\n    console.log(`${prefix} allManifests is empty. Fetching from DB.`);\n    const req = new DbGetAllModelFileManifestsRequest();\n    const response = await sendDbRequestSmart(req);\n    if (!response.success) return;\n    allManifests = response.data || [];\n  }\n  // Check again after fetch\n  if (!allManifests.length) {\n    console.warn(`${prefix} allManifests is still empty after DB fetch. Nothing to render.`);\n    return;\n  }\n  console.log(`${prefix} allManifests fetched from DB:`, allManifests);\n  const modelSelector = document.getElementById('model-selector') as HTMLSelectElement;\n  const quantSelector = document.getElementById('onnx-variant-selector') as HTMLSelectElement;\n  if (!modelSelector || !quantSelector) return;\n  // Store previous selection\n  const prevSelectedRepo = modelSelector.value;\n\n  // Populate main repo dropdown (unique folders)\n  const uniqueRepos = Array.from(new Set(allManifests.map((m: any) => String(m.folder)))) as string[];\n  modelSelector.innerHTML = '';\n  uniqueRepos.forEach((repo) => {\n    const option = document.createElement('option');\n    option.value = repo;\n    option.textContent = repo;\n    modelSelector.appendChild(option);\n  });\n\n  // Try to restore previous selection if possible\n  let selectedRepo: string = prevSelectedRepo && uniqueRepos.includes(prevSelectedRepo)\n    ? prevSelectedRepo\n    : uniqueRepos[0] || '';\n  modelSelector.value = selectedRepo;\n\n  // Populate quantization dropdown for selected repo (ONNX files)\n  const repoManifests = allManifests.filter((m: any) => m.folder === selectedRepo && m.fileType === 'onnx');\n  quantSelector.innerHTML = '';\n  if (repoManifests.length > 1) {\n    const allOption = document.createElement('option');\n    allOption.value = 'all';\n    allOption.textContent = 'All (show popup)';\n    quantSelector.appendChild(allOption);\n  }\n  repoManifests.forEach((manifest: any) => {\n    const option = document.createElement('option');\n    option.value = String(manifest.fileName);\n    let statusIcon = ''; // default: missing\n    if (manifest.status === 'present' || manifest.status === 'complete') statusIcon = '';\n    if (manifest.status === 'corrupt') statusIcon = '';\n    option.textContent = `${manifest.fileName} ${statusIcon}`;\n    quantSelector.appendChild(option);\n  });\n\n  updateModelActionButtons();\n\n  // --- NEW: Update ONNX popup if open ---\n  const modal = document.getElementById('onnx-selection-modal');\n  if (modal && !modal.classList.contains('hidden')) {\n    updateRepoPopupState(selectedRepo);\n  }\n}\n\n// --- Helper: Database Initialization ---\nasync function initializeDatabase(): Promise<boolean> {\n  try {\n    const result = await autoEnsureDbInitialized();\n    if (result?.success) {\n      console.log(`${prefix} DB initialized directly.`);\n      isDbReady = true;\n      for (const logPayload of logQueue) {\n        const req = new DbAddLogRequest(logPayload);\n        sendDbRequestViaChannel(req);\n      }\n      logQueue = [];\n      return true;\n    } else {\n      throw new Error(`Database initialization failed: ${result?.error || 'Unknown error'}`);\n    }\n  } catch (error) {\n    const err = error as Error;\n    console.error(`${prefix} DB Initialization failed:`, err);\n    utilShowError(`Initialization failed: ${err.message}. Please try reloading.`);\n    const chatBody = document.getElementById('chat-body');\n    if (chatBody) {\n      chatBody.innerHTML = `<div class=\"p-4 text-red-500\">Critical Error: ${err.message}. Please reload the extension.</div>`;\n    }\n    return false;\n  }\n}\n\n// --- Exports ---\nexport { sendDbRequestSmart };\n\nfunction isModelReadyToLoad(selectedRepo: string, selectedOnnx: string) {\n  // 1. Check ONNX file\n  const onnxManifest = allManifests.find(\n    m => m.folder === selectedRepo && m.fileName === selectedOnnx\n  );\n  const onnxReady = onnxManifest && (onnxManifest.status === 'present' || onnxManifest.status === 'complete');\n\n  // 2. Check all supporting files\n  const supportingFiles = allManifests.filter(\n    m => m.folder === selectedRepo && m.fileType !== 'onnx'\n  );\n  const allSupportingReady = supportingFiles.length > 0 && supportingFiles.every(\n    m => m.status === 'present' || m.status === 'complete'\n  );\n\n  // 3. Both must be true\n  return onnxReady && allSupportingReady;\n}\n\nfunction updateModelActionButtons() {\n  const modelSelector = document.getElementById('model-selector') as HTMLSelectElement;\n  const quantSelector = document.getElementById('onnx-variant-selector') as HTMLSelectElement;\n  const downloadBtn = document.getElementById('download-model-btn') as HTMLButtonElement;\n  const loadBtn = document.getElementById('load-model-button') as HTMLButtonElement;\n\n  if (!modelSelector || !quantSelector || !downloadBtn || !loadBtn) return;\n\n  const selectedRepo = modelSelector.value;\n  const selectedOnnx = quantSelector.value;\n\n  // Hide both by default\n  downloadBtn.style.display = 'none';\n  loadBtn.style.display = 'none';\n\n  if (!selectedRepo || !selectedOnnx) return;\n\n  if (isModelReadyToLoad(selectedRepo, selectedOnnx)) {\n    loadBtn.style.display = '';\n    downloadBtn.style.display = 'none';\n  } else {\n    loadBtn.style.display = 'none';\n    downloadBtn.style.display = '';\n  }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"assets/\" + chunkId + \"-\" + \"f0f432f4a3fd7585e809\" + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"tabagent:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"sidepanel\": 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunktabagent\"] = self[\"webpackChunktabagent\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/sidepanel.ts\");\n",""],"names":[],"sourceRoot":""}
var zs=Object.defineProperty;var Js=(l,s,e)=>s in l?zs(l,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[s]=e;var x=(l,s,e)=>Js(l,typeof s!="symbol"?s+"":s,e);var Gs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Us(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var P={exports:{}},Zs=P.exports,As;function Hs(){return As||(As=1,function(l,s){(function(e,t){t(l)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Zs,function(e){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const t="The message port closed before a response was received.",i=y=>{const b={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(b).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class E extends WeakMap{constructor(n,o=void 0){super(o),this.createItem=n}get(n){return this.has(n)||this.set(n,this.createItem(n)),super.get(n)}}const Ss=r=>r&&typeof r=="object"&&typeof r.then=="function",gs=(r,n)=>(...o)=>{y.runtime.lastError?r.reject(new Error(y.runtime.lastError.message)):n.singleCallbackArg||o.length<=1&&n.singleCallbackArg!==!1?r.resolve(o[0]):r.resolve(o)},k=r=>r==1?"argument":"arguments",js=(r,n)=>function(g,...A){if(A.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${k(n.minArgs)} for ${r}(), got ${A.length}`);if(A.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${k(n.maxArgs)} for ${r}(), got ${A.length}`);return new Promise((p,d)=>{if(n.fallbackToNoCallback)try{g[r](...A,gs({resolve:p,reject:d},n))}catch(a){console.warn(`${r} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),g[r](...A),n.fallbackToNoCallback=!1,n.noCallback=!0,p()}else n.noCallback?(g[r](...A),p()):g[r](...A,gs({resolve:p,reject:d},n))})},ls=(r,n,o)=>new Proxy(n,{apply(g,A,p){return o.call(A,r,...p)}});let T=Function.call.bind(Object.prototype.hasOwnProperty);const C=(r,n={},o={})=>{let g=Object.create(null),A={has(d,a){return a in r||a in g},get(d,a,h){if(a in g)return g[a];if(!(a in r))return;let m=r[a];if(typeof m=="function")if(typeof n[a]=="function")m=ls(r,r[a],n[a]);else if(T(o,a)){let w=js(a,o[a]);m=ls(r,r[a],w)}else m=m.bind(r);else if(typeof m=="object"&&m!==null&&(T(n,a)||T(o,a)))m=C(m,n[a],o[a]);else if(T(o,"*"))m=C(m,n[a],o["*"]);else return Object.defineProperty(g,a,{configurable:!0,enumerable:!0,get(){return r[a]},set(w){r[a]=w}}),m;return g[a]=m,m},set(d,a,h,m){return a in g?g[a]=h:r[a]=h,!0},defineProperty(d,a,h){return Reflect.defineProperty(g,a,h)},deleteProperty(d,a){return Reflect.deleteProperty(g,a)}},p=Object.create(r);return new Proxy(p,A)},H=r=>({addListener(n,o,...g){n.addListener(r.get(o),...g)},hasListener(n,o){return n.hasListener(r.get(o))},removeListener(n,o){n.removeListener(r.get(o))}}),Is=new E(r=>typeof r!="function"?r:function(o){const g=C(o,{},{getContent:{minArgs:0,maxArgs:0}});r(g)}),ms=new E(r=>typeof r!="function"?r:function(o,g,A){let p=!1,d,a=new Promise(v=>{d=function(f){p=!0,v(f)}}),h;try{h=r(o,g,d)}catch(v){h=Promise.reject(v)}const m=h!==!0&&Ss(h);if(h!==!0&&!m&&!p)return!1;const w=v=>{v.then(f=>{A(f)},f=>{let Q;f&&(f instanceof Error||typeof f.message=="string")?Q=f.message:Q="An unexpected error occurred",A({__mozWebExtensionPolyfillReject__:!0,message:Q})}).catch(f=>{console.error("Failed to send onMessage rejected reply",f)})};return w(m?h:a),!0}),Ws=({reject:r,resolve:n},o)=>{y.runtime.lastError?y.runtime.lastError.message===t?n():r(new Error(y.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?r(new Error(o.message)):n(o)},cs=(r,n,o,...g)=>{if(g.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${k(n.minArgs)} for ${r}(), got ${g.length}`);if(g.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${k(n.maxArgs)} for ${r}(), got ${g.length}`);return new Promise((A,p)=>{const d=Ws.bind(null,{resolve:A,reject:p});g.push(d),o.sendMessage(...g)})},Ls={devtools:{network:{onRequestFinished:H(Is)}},runtime:{onMessage:H(ms),onMessageExternal:H(ms),sendMessage:cs.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:cs.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},K={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return b.privacy={network:{"*":K},services:{"*":K},websites:{"*":K}},C(y,Ls,b)};e.exports=i(chrome)}})}(P)),P.exports}var Ks=Hs();const Rs=Us(Ks);class Qs{constructor(){this.listeners=new Map}subscribe(s,e){this.listeners.has(s)||this.listeners.set(s,[]),this.listeners.get(s).push(e)}unsubscribe(s,e){if(this.listeners.has(s)){const t=this.listeners.get(s),i=t.indexOf(e);i>-1&&t.splice(i,1),t.length===0&&this.listeners.delete(s)}}publish(s,e){const t=this.listeners.get(s);if(t&&t.length>0)try{const i=structuredClone(e);console.log(`[EventBus] Publishing ${s}. Found ${t.length} listeners. Data to send:`,JSON.stringify(i)),t.forEach((y,b)=>{try{console.log(`[EventBus] Calling listener #${b+1} for ${s} with data:`,JSON.stringify(i)),y(i)}catch(E){console.error(`[EventBus] Error in listener #${b+1} for ${s}:`,E)}})}catch(i){console.error(`[EventBus] Failed to structuredClone data for event ${s}:`,i,e)}else console.log(`[EventBus] No listeners registered for event ${s}. Data:`,JSON.stringify(e))}}const Vs=new Qs,Ds=Object.freeze(Object.defineProperty({__proto__:null,eventBus:Vs},Symbol.toStringTag,{value:"Module"}));function Xs(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var s=Math.random()*16|0,e=l=="x"?s:s&3|8;return e.toString(16)})}class c{constructor(s=null){this.requestId=s||Xs(),this.timestamp=Date.now()}}class u extends c{constructor(s,e,t=null,i=null){super(s),this.success=e,this.data=t,this.error=i?i.message||String(i):null}}class V{constructor(s){this.sessionId=s,this.timestamp=Date.now()}}class X extends u{constructor(s,e,t,i=null){super(s,e,t,i),this.type=X.name}}class Y extends u{constructor(s,e,t,i=null){super(s,e,{newMessageId:t},i),this.type=Y.name}}class G extends u{constructor(s,e,t=null){super(s,e,null,t),this.type=G.name}}class R extends u{constructor(s,e,t=null){super(s,e,null,t),this.type=R.name}}class D extends u{constructor(s,e,t=null){super(s,e,null,t),this.type=D.name}}class q extends u{constructor(s,e,t,i=null){super(s,e,t,i),this.type=q.name}}class _ extends u{constructor(s,e,t,i=null){super(s,e,{newSessionId:t},i),this.type=_.name,console.log(`[dbEvents] DbCreateSessionResponse constructor: type set to ${this.type}`)}get newSessionId(){var s;return(s=this.data)==null?void 0:s.newSessionId}}class ss extends u{constructor(s,e,t=null){super(s,e,null,t),this.type=ss.name}}class es extends u{constructor(s,e,t=null){super(s,e,null,t),this.type=es.name}}class rs extends u{constructor(s,e,t=null,i=null){super(s,e,t,i),this.type=rs.name,this.payload={sessions:t}}}class ns extends u{constructor(s,e,t=null,i=null){super(s,e,t,i),this.type=ns.name}}const N=class N extends c{constructor(s){super(),this.type=N.name,this.payload={sessionId:s}}};x(N,"responseEventName",X.name);let xs=N;const $=class $ extends c{constructor(s,e){super(),this.type=$.name,this.payload={sessionId:s,messageObject:e}}};x($,"responseEventName",Y.name);let us=$;const B=class B extends c{constructor(s,e,t){super(),this.type=B.name,this.payload={sessionId:s,messageId:e,updates:t}}};x(B,"responseEventName",G.name);let ps=B;const M=class M extends c{constructor(s,e){super(),this.type=M.name,this.payload={sessionId:s,status:e}}};x(M,"responseEventName",R.name);let ds=M;const O=class O extends c{constructor(s,e){super(),this.type=O.name,this.payload={sessionId:s,messageId:e}}};x(O,"responseEventName",D.name);let hs=O;const F=class F extends c{constructor(s){super(),this.type=F.name,this.payload={sessionId:s}}};x(F,"responseEventName",q.name);let fs=F;const S=class S extends c{constructor(s){super(),this.type=S.name,this.payload={initialMessage:s},console.log(`[dbEvents] DbCreateSessionRequest constructor: type set to ${this.type}`)}};x(S,"responseEventName",_.name);let ys=S;class Ns extends c{constructor(){super(),this.type=Ns.name,this.payload={}}}const j=class j extends c{constructor(s){super(),this.type=j.name,this.payload={sessionId:s}}};x(j,"responseEventName",ss.name);let bs=j;const I=class I extends c{constructor(s,e){super(),this.type=I.name,this.payload={sessionId:s,newName:e}}};x(I,"responseEventName",es.name);let ws=I;const W=class W extends c{constructor(){super(),this.type=W.name}};x(W,"responseEventName",rs.name);let vs=W;const L=class L extends c{constructor(){super(),this.type=L.name}};x(L,"responseEventName",ns.name);let Es=L;class $s extends V{constructor(s,e){super(s),this.type=$s.name,this.payload={messages:e}}}class Bs extends V{constructor(s,e){super(s),this.type=Bs.name,this.payload={status:e}}}class Ms extends V{constructor(s,e){super(s),this.type=Ms.name,this.payload={session:e}}}class Os{constructor({success:s,error:e=null}){this.type=Os.name,this.timestamp=Date.now(),this.payload={success:s,error:e?e.message||String(e):null}}}class ts extends u{constructor(s,e,t,i=null){super(s,e,t,i),this.type=ts.name}}class as extends u{constructor(s,e,t,i=null){super(s,e,t,i),this.type=as.name}}class is extends u{constructor(s,e,t=null){super(s,e,null,t),this.type=is.name}}class os extends u{constructor(s,e,t,i=null){super(s,e,t,i),this.type=os.name}}class Fs extends c{constructor(s){super(),this.type=Fs.name,this.payload={logEntryData:s}}}const z=class z extends c{constructor(s){super(),this.type=z.name,this.payload={filters:s}}};x(z,"responseEventName",ts.name);let ks=z;const J=class J extends c{constructor(s){super(),this.type=J.name,this.payload={fieldName:s}}};x(J,"responseEventName",as.name);let Ts=J;const U=class U extends c{constructor(s="all"){super(),this.type=U.name,this.payload={filter:s}}};x(U,"responseEventName",is.name);let Cs=U;const Z=class Z extends c{constructor(){super(),this.type=Z.name}};x(Z,"responseEventName",os.name);let Ps=Z;export{Us as A,Ns as B,Fs as C,$s as D,ks as E,Ts as F,Cs as G,Ps as H,Os as I,ts as J,as as K,is as L,os as M,Rs as N,Ds as O,Ms as a,xs as b,Bs as c,ys as d,Vs as e,us as f,ds as g,ps as h,_ as i,Y as j,X as k,G as l,hs as m,D as n,R as o,fs as p,q,vs as r,rs as s,Es as t,ns as u,bs as v,ss as w,ws as x,es as y,Gs as z};
//# sourceMappingURL=dbEvents-BhofnX1y.js.map
